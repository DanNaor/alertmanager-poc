(()=>{var e,t,n,r={15422:(e,t,n)=>{"use strict";n(88146);var r=n(76661),o=n.n(r);o().fn.splitter=function(e,t,n,r){const a=o()(e),i=o()(this),l="splitter."+t+".resize";let s,c,d,u;const m=n,g=r;function f(e){e.preventDefault(),e.pageY>m&&e.pageY<window.innerHeight+o()(window).scrollTop()-g&&(d=e.pageY,s[0].style=u+"top: "+e.pageY+"px;")}function p(){o()(document).off("mousemove",f),o()(document).off("mouseup",p),s[0].style="display: none",i.removeClass("qs-dragging"),a.trigger(l,d-c)}function h(){const e=i[0].getBoundingClientRect();c=e.top+o()(window).scrollTop(),u="position: absolute; left: "+e.left+"px; width: "+e.width+"px; height: "+e.height+"px;",s||(s=o()('<div class="qs-ghost"></div>'),s.appendTo("body")),s[0].style=u+"top: "+c+"px;",i.addClass("qs-dragging"),o()(document).mousemove(f),o()(document).mouseup(p)}o()(this).mousedown(h),o()(this).on("touchstart",h),o()(this).on("touchmove",(function(e){e.preventDefault();const t=e.originalEvent.touches[0].clientY;t>m&&t<window.innerHeight+o()(window).scrollTop()-g&&(d=t,s[0].style=u+"top: "+t+"px;")})),o()(this).on("touchend",p)};let a=o()({});window.bus=a;var i=n(89703),l=n(13870),s=n(96458),c=n(85032),d=n(7386),u=n(91199);const m=(0,u.iv)(["\n  :root {\n    --docsearch-primary-color: ",";\n    --docsearch-text-color: ",";\n    --docsearch-highlight-color: ",";\n    --docsearch-muted-color: #a4a6a8;\n    --docsearch-container-background: rgba(0, 0, 0, 0.5);\n    /* Modal */\n    --docsearch-modal-background: ",";\n    --docsearch-modal-shadow: inset 1px 1px 0 0 #2c2e40, 0 3px 8px 0 #000309;\n    /* Search box */\n    --docsearch-searchbox-background: #2d303e;\n    --docsearch-searchbox-focus-background: #141725;\n    /* Hit */\n    --docsearch-hit-color: ",";\n    --docsearch-hit-active-color: ",";\n    --docsearch-hit-background: ",";\n    --docsearch-hit-shadow: none;\n    /* Footer */\n    --docsearch-footer-background: ",";\n    --docsearch-footer-shadow: inset 0 1px 0 0 rgba(73, 76, 106, 0.5),\n      0 -4px 8px 0 rgba(0, 0, 0, 0.2);\n    /* Keys */\n    --docsearch-key-gradient: linear-gradient(\n      -26.5deg,\n      #32343e 0%,\n      rgb(38, 40, 51) 100%\n    );\n    --docsearch-key-shadow: inset 0 -2px 0 0 #282d55, inset 0 0 1px 1px #51577d,\n      0 2px 2px 0 rgba(3, 4, 9, 0.3);\n\n    // Allotment styling\n    --focus-border: ",";\n    --separator-border: ",";\n    --sash-size: 1rem !important;\n    --sash-hover-size: 0.5rem;\n    .allotment-module_splitView__L-yRc.allotment-module_separatorBorder__x-rDS.allotment-module_vertical__WSwwa\n      > .allotment-module_splitViewContainer__rQnVa\n      > .allotment-module_splitViewView__MGZ6O:not(:first-child)::before {\n      height: 2px;\n    }\n    .allotment-module_splitView__L-yRc.allotment-module_separatorBorder__x-rDS.allotment-module_horizontal__7doS8\n      > .allotment-module_splitViewContainer__rQnVa\n      > .allotment-module_splitViewView__MGZ6O:not(:first-child)::before {\n      width: 2px;\n    }\n  }\n\n  .DocSearch-Button {\n    height: 3rem;\n    border-radius: 0.4rem;\n    color: ",";\n    border: 1px solid var(--docsearch-searchbox-background);\n  }\n\n  .DocSearch-Button:hover {\n    background: ",";\n    box-shadow: none;\n  }\n\n  .DocSearch-Button-Placeholder {\n    font-size: 100%;\n  }\n\n  .DocSearch-Button .DocSearch-Search-Icon {\n    color: ",";\n    width: 1.4rem;\n    height: 1.4rem;\n  }\n\n  .DocSearch-Button:hover .DocSearch-Search-Icon {\n    color: ",";\n  }\n\n  .DocSearch-Button-Key {\n    top: 0;\n    padding: 0 4px;\n    background: ",";\n    border-radius: 2px;\n    box-shadow: none;\n    color: ",";\n    font-size: 1.2rem;\n    font-style: inherit;\n    font-family: inherit;\n    font-weight: 600;\n  }\n\n  .DocSearch-Hit-title {\n    font-size: 100%;\n    overflow: hidden;\n  }\n\n  .DocSearch-Logo .cls-1,\n  .DocSearch-Logo .cls-2 {\n    fill: "," !important;\n  }\n"],(({theme:e})=>e.color.pink),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.pink),(({theme:e})=>e.color.background),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.background),(({theme:e})=>e.color.purple),(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.comment),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.gray2),(({theme:e})=>e.color.black),(({theme:e})=>e.color.foreground)),g=(0,u.vJ)(["\n  ","\n\n  body {\n    color: ",";\n  }\n"],m,(({theme:e})=>e.color.foreground)),f=(0,u.F4)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]),p=(0,u.iv)(["\n  animation: "," 1.5s cubic-bezier(0.62, 0.28, 0.23, 0.99) infinite;\n"],f),h=e=>408===e.status||e.status>=500;let b=function(e){return e.MSG_ACTIVE_SIDEBAR="active.panel",e.MSG_EDITOR_FOCUS="editor.focus",e.MSG_EDITOR_SET="editor.set",e.MSG_EDITOR_INSERT_COLUMN="editor.insert.column",e.MSG_EDITOR_INSERT_QUERY="editor.insert.query",e.GRID_FOCUS="grid.focus",e.MSG_QUERY_CANCEL="query.in.cancel",e.MSG_QUERY_DATASET="query.out.dataset",e.MSG_QUERY_ERROR="query.out.error",e.MSG_QUERY_EXEC="query.in.exec",e.MSG_QUERY_EXPORT="query.in.export",e.MSG_QUERY_FIND_N_EXEC="query.build.execute",e.MSG_QUERY_OK="query.out.ok",e.MSG_QUERY_RUNNING="query.out.running",e.MSG_QUERY_SCHEMA="query.out.schema",e.MSG_CONNECTION_OK="query.connection.ok",e.MSG_CONNECTION_ERROR="query.connection.error",e.REACT_READY="react.ready",e}({}),E=function(e){return e.MAIN="telemetry",e.CONFIG="telemetry_config",e.WAL="sys.telemetry_wal",e}({});const y="https://fara.questdb.io",w="26px";var v=n(33828),C=n(50380),_=n(76549),x=n(32987),S=n(30133);const k=(e,t={},n=!0)=>{const r="/"===e[0]?"":"/",o=n?`${window.location.origin}${r}${e}`:e;return(0,C.U)(o,t).pipe((0,_.w)((e=>e.ok?e.headers.get("content-type")?.startsWith("application/json")?e.json():Promise.resolve({}):(0,v.of)({error:!0,message:e.statusText}))),(0,x.K)((e=>(console.error(e),(0,v.of)({error:!0,message:e.message})))),(0,S.U)((e=>e.error?e:{data:e,error:!1})))};let N=function(e){return e.DDL="ddl",e.DQL="dql",e.ERROR="error",e}({}),T=function(e){return e.EXISTS="Exists",e.DOES_NOT_EXIST="Does not exist",e.RESERVED_NAME="Reserved name",e}({});class O{_controllers=[];constructor(e){this._host=e||window.location.origin}static encodeParams=e=>Object.keys(e).filter((t=>void 0!==e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&");abort=()=>{this._controllers.forEach((e=>{e.abort()})),this._controllers=[]};async query(e,t){const n=await this.queryRaw(e,t);if(n.type===N.DQL){const{columns:e,count:t,dataset:r,timings:o}=n,a=r.map((t=>t.reduce(((t,n,r)=>({...t,[e[r].name]:n})),{})));return{columns:e,count:t,data:a,timings:o,type:N.DQL,...n.explain?{explain:n.explain}:{}}}return n}async queryRaw(e,t){const n=new AbortController,r={...t,count:!0,src:"con",query:e,timings:!0};let o;this._controllers.push(n);const a=new Date;try{o=await fetch(`${this._host}/exec?${O.encodeParams(r)}`,{signal:n.signal})}catch(t){const n={position:-1,query:e,type:N.ERROR},r={...n,error:"An error occured, please try again"};return t instanceof DOMException?await Promise.reject({...n,error:20===t.code?"Cancelled by user":JSON.stringify(t).toString()}):(bus.trigger(b.MSG_CONNECTION_ERROR,r),await Promise.reject(r))}finally{const e=this._controllers.indexOf(n);e>=0&&this._controllers.splice(e,1)}if(o.ok||400===o.status){const t=1e6*((new Date).getTime()-a.getTime()),n=await o.json();return bus.trigger(b.MSG_CONNECTION_OK),n.ddl?{query:e,type:N.DDL}:n.error?await Promise.reject({...n,type:N.ERROR}):{...n,timings:{...n.timings,fetch:t},type:N.DQL}}const i={status:o.status,error:o.statusText};return h(o)&&(i.error=`QuestDB is not reachable [${o.status}]`,i.position=-1,i.query=e,i.type=N.ERROR,bus.trigger(b.MSG_CONNECTION_ERROR,i)),await Promise.reject(i)}async showTables(){const e=await this.query("tables();");return e.type===N.DQL?{...e,data:e.data.slice().sort(((e,t)=>{const n=e.table_name??e.name,r=t.table_name??t.name;return n>r?1:n<r?-1:0})).map((e=>({...e,table_name:e.table_name??e.name})))}:e}async showColumns(e){return await this.query(`SHOW COLUMNS FROM '${e}';`)}async checkCSVFile(e){try{const t=await fetch(`${this._host}/chk?${O.encodeParams({f:"json",j:e})}`);return await t.json()}catch(e){throw e}}async uploadCSVFile({file:e,name:t,settings:n,schema:r,partitionBy:o,timestamp:a,onProgress:i}){const l=new FormData;r&&l.append("schema",JSON.stringify(r)),l.append("data",e);const s={fmt:"json",name:t,...o?{partitionBy:o}:{},...a?{timestamp:a}:{},...n?Object.keys(n).reduce(((e,t)=>({...e,[t]:n[t].toString()})),{}):{}};return new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("POST",`${this._host}/imp?${new URLSearchParams(s)}`),n.upload.addEventListener("progress",(e=>{let t=e.loaded/e.total*100;i(t)})),n.onload=r=>{200===n.status?e(JSON.parse(n.response)):t({status:n.status,statusText:n.statusText})},n.onerror=()=>{t({status:n.status,statusText:n.statusText})},n.send(l)}))}async getLatestRelease(){try{const e=await fetch("https://api.github.com/repos/questdb/questdb/releases/latest");return await e.json()}catch(e){throw e}}async sendFeedback({email:e,message:t,telemetryConfig:n}){try{const r=await fetch("https://cloud.questdb.com/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,message:t,telemetryConfig:n,category:"web-console"})});return await r.json()}catch(e){throw e}}async getNews({category:e,telemetryConfig:t}){try{const n=await fetch(`https://cloud.questdb.com/api/news?category=${e}&telemetryUserId=${t?.id}`);return await n.json()}catch(e){throw e}}}const R=(e,t,n="...")=>{if(e.length<=t)return e;const r=Math.floor(e.length/2),o=e.length-t+n.length;return e.slice(0,r-Math.floor(o/2))+n+e.slice(r+Math.ceil(o/2))},I=e=>t=>t?t.theme.color[e]:void 0;var P=n(61627);const L=(e,t)=>(0,P.WU)(e,{language:"postgresql",...t}),A={isMacintosh:!1,isWindows:!1,isIOS:!1,isLinux:!1};function B(e,t){return t.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{})}"object"==typeof navigator&&(A.isMacintosh=-1!==navigator.userAgent.indexOf("Macintosh"),A.isWindows=navigator.userAgent.indexOf("Windows")>=0,A.isIOS=(navigator.userAgent.indexOf("Macintosh")>=0||navigator.userAgent.indexOf("iPad")>=0||navigator.userAgent.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const D=()=>navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;var M=n(92031),F=n(34700),q=n(45508),z=n(52121),Z=n(59301),j=n(25158),U=n(42409),G=n(49977);const H=e=>({"en-GB":M.Z,"en-US":F.Z,"fr-FR":q.Z,"es-ES":z.Z,"de-DE":Z.Z,"ja-JP":j.Z,"ko-KR":U.Z,"zh-CN":G.Z}[e]||F.Z);let V=function(e){return e[e.SLOW=1500]="SLOW",e[e.REG=200]="REG",e[e.FAST=70]="FAST",e}({});const W=(e,t)=>(0,u.vJ)(["\n  .","-enter {\n    opacity: 0;\n  }\n\n  .","-enter-active {\n    opacity: 1;\n    transition: all ","ms;\n  }\n\n  .","-exit {\n    opacity: 1;\n  }\n\n  .","-exit-active {\n    opacity: 0;\n    transition: all ","ms;\n  }\n"],e,e,t,e,e,t),Q=(0,u.iv)(["\n  .collapse-enter {\n    max-height: 0;\n  }\n\n  .collapse-enter-active {\n    max-height: ","px;\n    transition: all ","ms;\n  }\n\n  .collapse-exit {\n    max-height: ","px;\n  }\n\n  .collapse-exit-active {\n    max-height: 0;\n    transition: all ","ms;\n  }\n"],(({_height:e})=>e),(({duration:e})=>e||V.REG),(({_height:e})=>e),(({duration:e})=>e||V.REG)),$=(V.FAST,V.FAST,(0,u.iv)(["\n  transition: all ","ms cubic-bezier(0, 0, 0.38, 0.9);\n"],V.FAST));function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}const K={fontSize:"md",size:"md",type:"button"},X=({size:e})=>{switch(e){case"sm":return"2rem";case"md":default:return"3rem";case"lg":return"5rem"}},J=(0,u.iv)(["\n  display: flex;\n  height: ",";\n  padding: 0 1rem;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n  border-radius: 4px;\n  border: 1px solid transparent;\n  outline: 0;\n  font-size: ",";\n  font-weight: 400;\n  line-height: 1.15;\n  cursor: pointer;\n  ",";\n\n  svg + span {\n    margin-left: 0.5rem;\n  }\n"],X,(({fontSize:e,theme:t})=>t.fontSize[e]),$),ee=(e,t,n)=>(0,u.iv)(["\n    background: ",";\n    color: ",";\n    border-color: ",";\n\n    &:focus {\n      box-shadow: inset 0 0 0 1px ",";\n    }\n\n    &:hover:not([disabled]) {\n      background: ",";\n      color: ",";\n      border-color: ",";\n    }\n\n    &:active:not([disabled]) {\n      background: ",";\n      filter: brightness(90%);\n    }\n\n    &:disabled {\n      cursor: not-allowed;\n      background: ",";\n      color: ",";\n      border-color: ",";\n    }\n  "],I(e.background),I(e.color),I(e.border),I("foreground"),I(t.background),I(t.color),I(t.border),I(t.background),I(n.background),I(n.color),I(n.border)),te=u.ZP.button.withConfig({displayName:"Button__PrimaryButtonStyled"})(["\n  ",";\n  ",";\n"],J,ee({background:"selection",border:"selection",color:"foreground"},{background:"comment",border:"selection",color:"foreground"},{background:"selection",border:"gray1",color:"gray1"})),ne=(e,t)=>i.createElement(te,Y({},K,e,{ref:t}));(0,i.forwardRef)(ne).defaultProps=K;const re=u.ZP.button.withConfig({displayName:"Button__SecondaryButtonStyled"})(["\n  ",";\n  ",";\n"],J,ee({background:"backgroundLighter",border:"backgroundLighter",color:"foreground"},{background:"comment",border:"comment",color:"foreground"},{background:"gray1",border:"gray1",color:"background"})),oe=(e,t)=>i.createElement(re,Y({},K,e,{ref:t})),ae=(0,i.forwardRef)(oe);ae.defaultProps=K;const ie=u.ZP.button.withConfig({displayName:"Button__SuccessButtonStyled"})(["\n  ",";\n  ",";\n"],J,ee({background:"selection",border:"selection",color:"green"},{background:"comment",border:"selection",color:"green"},{background:"selection",border:"gray1",color:"gray1"})),le=(e,t)=>i.createElement(ie,Y({},K,e,{ref:t})),se=(0,i.forwardRef)(le);se.defaultProps=K;const ce=u.ZP.button.withConfig({displayName:"Button__ErrorButtonStyled"})(["\n  ",";\n  ",";\n"],J,ee({background:"selection",border:"selection",color:"red"},{background:"comment",border:"selection",color:"red"},{background:"selection",border:"gray1",color:"gray1"})),de=(e,t)=>i.createElement(ce,Y({},K,e,{ref:t})),ue=(0,i.forwardRef)(de);ue.defaultProps=K;const me=u.ZP.button.withConfig({displayName:"Button__TransparentButtonStyled"})(["\n  ",";\n  ",";\n"],J,ee({background:"transparent",border:"transparent",color:"foreground"},{background:"comment",border:"transparent",color:"foreground"},{background:"selection",border:"gray1",color:"gray1"})),ge=(e,t)=>i.createElement(me,Y({},K,e,{ref:t})),fe=(0,i.forwardRef)(ge);fe.defaultProps=K;var pe=n(83828),he=n(92941),be=n(44947),Ee=n(50367);const ye=u.ZP.div.withConfig({displayName:"group-header__GroupHeader"})(["\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  padding: 2rem 0;\n  border-bottom: 0.1rem "," solid;\n"],(({theme:e})=>e.color.selection)),we=u.ZP.div.withConfig({displayName:"group-item__GroupItem"})(["\n  display: flex;\n  ",";\n  padding: 2rem;\n\n  &:not(:last-child) {\n    border-bottom: 0.1rem "," solid;\n  }\n\n  &:last-child {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n\n  ","\n"],(({direction:e})=>"column"===e?"\n    flex-direction: column;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    width: 100%;\n  ":"\n    justify-content: space-between;\n    flex-wrap: initial;\n  "),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e,withLink:t})=>t&&`\n    &:hover {\n      cursor: pointer;\n      background-color: ${e.color.black};\n    }\n  `)),ve=u.ZP.div.attrs((e=>({flexDirection:e.flexDirection||"row",gap:e.gap||"1rem",margin:e.margin||"0",align:e.align||"center",justifyContent:e.justifyContent||"flex-start"}))).withConfig({displayName:"Box"})(["\n  display: flex;\n  flex-direction: ",";\n  gap: ",";\n  margin: ",";\n  align-items: ",";\n  justify-content: ",";\n"],(({flexDirection:e})=>e),(({gap:e})=>e),(({margin:e})=>e),(({align:e})=>e),(({justifyContent:e})=>e)),Ce=(0,u.ZP)(ve).attrs({gap:"1rem",justifyContent:"flex-end",align:"center"}).withConfig({displayName:"actions__Actions"})(["\n  width: 100%;\n  padding-left: 2rem;\n  padding-right: 2rem;\n  height: 7rem;\n"]),_e=(0,u.ZP)(ve).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"content-wrapper__ContentWrapper"})(["\n  width: 100%;\n  /*\n    4.5rem = top bar\n    4.5rem = drawer title\n    4rem = footer\n  */\n  height: ",";\n  form {\n    width: 100%;\n    height: 100%;\n  }\n"],(({mode:e})=>"side"===e?"calc(100vh - 4.5rem - 4.5rem - 4rem)":"calc(100vh - 4.5rem)")),xe=u.ZP.div.withConfig({displayName:"PaneMenu"})(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  height: 4.5rem;\n  padding: 0 1rem;\n  align-items: center;\n  background: ",";\n  border-top: 1px solid transparent;\n"],I("backgroundLighter"));function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}const ke=(0,u.iv)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]),Ne=(0,u.iv)(["\n  color: ",";\n  font-family: ",";\n  font-size: ",";\n  font-style: ",";\n  font-weight: ",";\n  text-transform: ",";\n  ",";\n  ",";\n"],(e=>e.color?I(e.color):"inherit"),(({code:e,theme:t})=>e&&t.fontMonospace),(({size:e,theme:t})=>e?t.fontSize[e]:"inherit"),(({_style:e})=>e??"inherit"),(({weight:e})=>e),(({transform:e})=>e),(({align:e})=>e?`text-align: ${e}`:""),(({ellipsis:e})=>e&&ke)),Te=u.ZP.label.withConfig({displayName:"Text__TextStyled"})(["\n  ",";\n"],Ne),Oe=({type:e,...t})=>i.createElement(Te,Se({as:e},t,{type:e}));Oe.defaultProps={color:"black",type:"span"};const Re=u.ZP.div.withConfig({displayName:"header__Root"})(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  height: 4.5rem;\n  padding: 0 1rem;\n  align-items: center;\n  background: ",";\n  border-top: 1px solid transparent;\n  z-index: 5;\n\n  ","\n"],I("backgroundLighter"),(({shadow:e})=>e&&"\n      box-shadow: 0 2px 10px 0 rgba(23, 23, 23, 0.65)\n  ")),Ie=(0,u.ZP)(Oe).withConfig({displayName:"header__Title"})(["\n  display: flex;\n  align-items: center;\n  padding-left: 1rem;\n  font-size: 1.8rem;\n  font-weight: 600;\n"]),Pe=({children:e})=>e;function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(this,arguments)}Pe.Header=({title:e,afterTitle:t,shadow:n})=>i.createElement(Re,{shadow:n},i.createElement(Ie,{color:"foreground"},e),t);const Ae=(0,u.iv)(["\n  @keyframes animateShow {\n    from {\n      transform: translateX(100%);\n    }\n    to {\n      transform: translateX(0);\n    }\n  }\n"]),Be=(0,u.iv)(["\n  @keyframes animateHide {\n    from {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(100%);\n    }\n  }\n"]),De=(0,u.ZP)(pe.VY).attrs({forceMount:!0}).withConfig({displayName:"Drawer__DrawerContent"})(["\n  background-color: ",";\n  border-left: 0.2rem "," solid;\n  position: ",";\n  top: 0;\n  right: 0;\n  width: ",";\n  max-width: 100%;\n  height: 100%;\n  overflow: auto;\n  z-index: 101;\n\n  ","\n  ","\n\n  ",";\n"],(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.background),(({mode:e})=>"modal"===e?"fixed":"inherit"),(({width:e})=>e??"50rem"),Ae,Be,(({mode:e})=>"modal"===e&&'\n  &[data-state="open"] {\n    animation: animateShow 0.5s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  &[data-state="closed"] {\n    animation: animateHide 0.5s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  &:focus {\n    outline: none;\n  }\n  ')),Me=(0,u.ZP)(pe.x8).attrs({"aria-label":"Close",asChild:!0}).withConfig({displayName:"Drawer__StyledClose"})(["\n  appearance: initial;\n  margin-left: auto;\n  cursor: pointer;\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Fe=({mode:e="modal",children:t,trigger:n,title:r,afterTitle:o,width:a,open:l,onOpenChange:s,onDismiss:c,withCloseButton:d,closeOnOverlayClick:u=!0,closeOnEscape:m=!0})=>i.createElement(pe.fC,{onOpenChange:s,open:l,modal:"modal"===e},i.createElement(pe.xz,{asChild:!0},i.createElement(he.A,null,n)),i.createElement(pe.h_,"side"===e&&{container:document.getElementById("side-panel-right")},"modal"===e&&i.createElement(he.A,null,i.createElement(be.a,{primitive:pe.aV})),i.createElement(De,Le({mode:e,width:a},c&&{onEscapeKeyDown:m?c:void 0,onInteractOutside:u?c:void 0},"side"===e&&{onInteractOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),onPointerDownOutside:e=>e.preventDefault()}),(r||d)&&i.createElement(Pe.Header,Le({title:r,afterTitle:o},d&&{afterTitle:i.createElement(Me,c?{onClick:c}:{},i.createElement(Ee.x,{size:"18px"}))})),t)));Fe.GroupHeader=ye,Fe.GroupItem=we,Fe.Actions=Ce,Fe.ContentWrapper=_e;const qe=(e,t)=>{const[n,r]=(0,i.useState)(!1),o=n=>{n.key===e&&(t?.preventDefault&&n.preventDefault(),r(!0))},a=n=>{n.key===e&&(t?.preventDefault&&n.preventDefault(),r(!1))};return(0,i.useEffect)((()=>(window.addEventListener("keydown",o),window.addEventListener("keyup",a),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",a)}))),n},ze=(e,t)=>{(0,i.useEffect)((()=>{const n=Object.entries(t).reduce(((e,[t,n])=>`${e} ${t}: ${n};`),"z-index: 1000;");e.setAttribute("style",n)}),[e,t])};var Ze=n(84463),je=function(e){return e[e.SM=767]="SM",e}(je||{});const Ue=(0,i.createContext)({sm:window.innerWidth<=je.SM}),Ge=({children:e})=>{const[t,n]=(0,i.useState)({sm:window.innerWidth<=je.SM}),[r,o]=(0,i.useState)();return(0,i.useEffect)((()=>{const e=(0,Ze.P)(16,(()=>{o({sm:window.innerWidth<=je.SM})}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,i.useEffect)((()=>{r&&!(0,s.wU)(r,t)&&n(r)}),[t,r]),i.createElement(Ue.Provider,{value:t},e)},He=()=>(0,i.useContext)(Ue),Ve=(e,t,n,r)=>{(0,i.useEffect)((()=>{if(clearTimeout(n.current),t&&!document.body.contains(e))return document.body.appendChild(e),void(null!=r&&r());t||(n.current=window.setTimeout((()=>{document.body.contains(e)&&document.body.removeChild(e)}),V.REG))}),[t,e,n,r])},We=({icon:e,tooltip:t,placement:n})=>i.createElement(at,{placement:n,trigger:e},i.createElement(Ct,null,t));function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}const $e={size:"md",type:"text"},Ye=u.ZP.input.withConfig({displayName:"Input__InputStyled"})(["\n  height: ",";\n  border: none;\n  padding: 0 1rem;\n  line-height: 1.5;\n  outline: none;\n  background: ",";\n  border-radius: 4px;\n  color: ",";\n\n  &:focus {\n    box-shadow: inset 0 0 0 1px ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"],X,I("selection"),I("foreground"),I("foreground"),I("gray2")),Ke=(e,t)=>i.createElement(Ye,Qe({},$e,e,{ref:t}));(0,i.forwardRef)(Ke).defaultProps=$e;const Xe=Oe.defaultProps,Je=u.ZP.a.withConfig({displayName:"Link__Wrapper"})(["\n  ",";\n  text-decoration: none;\n  line-height: 1;\n\n  &:hover:not([disabled]),\n  &:focus:not([disabled]) {\n    color: ",";\n  }\n"],Ne,(e=>e.hoverColor?I(e.hoverColor):"inherit")),et=e=>i.createElement(Je,e);et.defaultProps=Xe;const tt=u.ZP.div.withConfig({displayName:"PaneContent"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ",";\n  overflow: auto;\n"],I("backgroundLighter")),nt=u.ZP.div.withConfig({displayName:"PaneWrapper"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);var rt=n(81053),ot=n(34276);const at=({children:e,delay:t,modifiers:n,placement:r,trigger:o})=>{const[a]=(0,i.useState)(document.createElement("div")),s=(0,i.useRef)(),c=(0,i.useRef)(),[d,u]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),[f,p]=(0,i.useState)(null),{attributes:h,styles:b,forceUpdate:E}=(0,rt.D)(m,a,{modifiers:[{name:"arrow",options:{element:f}},{name:"offset",options:{offset:[0,6]}},{name:"eventListeners",enabled:d},...n],placement:r}),y=(0,i.useCallback)((()=>{t?s.current=window.setTimeout((()=>{u(!0)}),t):u(!0)}),[t]),w=(0,i.useCallback)((()=>{clearTimeout(s.current),u(!1)}),[]);return(0,i.useEffect)((()=>()=>{clearTimeout(c.current),clearTimeout(s.current),document.body.contains(a)&&document.body.removeChild(a)}),[a]),ze(a,b.popper),Ve(a,d,c,E),i.createElement(i.Fragment,null,i.isValidElement(o)&&i.cloneElement(o,{onMouseEnter:y,onMouseLeave:w,ref:g}),l.createPortal(i.createElement(ot.Z,{classNames:"fade-reg",in:d,timeout:V.REG,unmountOnExit:!0},i.isValidElement(e)&&i.cloneElement(e,{...h.popper,arrow:{setArrowElement:p,styles:b.arrow}})),a))};at.defaultProps={modifiers:[],placement:"auto"};const it=({active:e,children:t,modifiers:n,onToggle:r,placement:o,trigger:a})=>{const[s]=(0,i.useState)(document.createElement("div")),c=(0,i.useRef)(),[d,u]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),{attributes:f,styles:p}=(0,rt.D)(m,s,{modifiers:[...n,{name:"eventListeners",enabled:d}],placement:o}),h=(0,i.useCallback)((()=>{const e=!d;u(e),r&&r(e)}),[d,r]),b=(0,i.useCallback)((e=>{const t=e.target;s.contains(t)||m?.contains(t)||(u(!1),r&&r(!1))}),[s,r,m]);return ze(s,p.popper),Ve(s,d,c),(0,i.useEffect)((()=>{u(void 0===e?d||!1:e)}),[e,d]),(0,i.useEffect)((()=>(document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),()=>{clearTimeout(c.current),document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b),document.body.contains(s)&&document.body.removeChild(s)})),[s,b]),i.createElement(i.Fragment,null,i.isValidElement(a)&&i.cloneElement(a,{onClick:h,ref:g}),i.isValidElement(t)&&i.createElement(ot.Z,{classNames:"fade-reg",in:d,timeout:V.REG,unmountOnExit:!0},i.createElement(i.Fragment,null,l.createPortal(i.cloneElement(t,{...f.popper}),s))))};it.defaultProps={modifiers:[],placement:"auto"};var lt=n(66506);n(28010);let st=function(e){return e.SUCCESS="success",e.INFO="info",e.WARNING="warning",e.ERROR="error",e}({});const ct={baseFontSize:"10px",color:{black:"#191a21",black70:"rgba(25, 26, 33, 0.7)",black40:"rgba(25, 26, 33, 0.4)",black20:"rgba(25, 26, 33, 0.2)",gray1:"#585858",gray2:"#bbbbbb",backgroundDarker:"#21222c",backgroundLighter:"#282a36",background:"#21222c",foreground:"#f8f8f2",selection:"#44475a",selectionDarker:"#333544",comment:"#6272a4",red:"#ff5555",orange:"#ffb86c",yellow:"#f1fa8c",green:"#50fa7b",purple:"#bd93f9",cyan:"#8be9fd",pink:"#d14671",pink50:"rgba(209, 70, 113, 0.25)",pinkDarker:"#be2f5b",pinkLighter:"#ff79c6",transparent:"transparent",white:"#fafafa",inherit:"inherit",tooltipBackground:"#6272a4",graphLegend:"#6e7078",offWhite:"#bdbdbd"},font:'"Open Sans", -apple-system, BlinkMacSystemFont, Helvetica, Roboto, sans-serif',fontEmoji:'"apple color emoji", "segoe ui emoji", "android emoji", "emojisymbols", "emojione mozilla", "twemoji mozilla", "segoe ui symbol", "noto color emoji"',fontMonospace:'SFMono-Regular, Menlo, Monaco, Consolas,"Liberation Mono", "Courier New", monospace',fontSize:{ms:"1rem",xs:"1.2rem",sm:"1.3rem",md:"1.4rem",lg:"1.5rem",xl:"1.7rem",hg:"3rem"},borderRadius:"0.8rem"};n(6685);const dt=lt.Am,ut=e=>{const t={autoClose:3e3,draggable:!1,position:"top-right",theme:"dark",transition:lt.Mi,...e};return i.createElement(lt.Ix,t)};function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const gt={direction:"bottom",fontSize:"md",selected:!1,size:"md",type:"button",readOnly:!1},ft=(0,u.iv)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  border: none;\n  outline: 0;\n  font-size: ",";\n  font-weight: 400;\n  line-height: 1.15;\n  width: 3.5rem;\n  height: 3.5rem;\n  border-radius: 0.4rem;\n  cursor: pointer;\n  ",";\n  ",";\n  color: ",";\n\n  svg + span {\n    margin-left: 1rem;\n  }\n"],(({selected:e,theme:t})=>e?"#2d303e":"transparent"),(({fontSize:e,theme:t})=>t.fontSize[e]),$,(({disabled:e})=>e&&"cursor: default; pointer-events: none;"),(({selected:e,theme:t})=>t.color[e?"foreground":"offWhite"])),pt=u.ZP.button.withConfig({displayName:"ToggleButton__PrimaryToggleButtonStyled"})(["\n  ",";\n  ",";\n"],ft,(ht={background:"comment"},(0,u.iv)(["\n    &:hover:not([disabled]) {\n      background: ",";\n      opacity: 1;\n    }\n\n    &:active:not([disabled]) {\n      filter: brightness(90%);\n    }\n\n    ","\n  "],I(ht.background),(({readOnly:e})=>e&&"\n      filter: brightness(0.5);\n      cursor: default;\n    "))));var ht;const bt=(e,t)=>i.createElement(pt,mt({},gt,e,{ref:t})),Et=(0,i.forwardRef)(bt);Et.defaultProps=gt;const yt=(0,u.iv)(["\n  position: absolute;\n  width: 7px;\n  height: 7px;\n"]),wt=u.ZP.div.withConfig({displayName:"Tooltip__TooltipArrow"})(["\n  ",";\n\n  &::before {\n    ",';\n    top: 0;\n    left: 0;\n    content: "";\n    transform: rotate(45deg);\n    background: ',";\n    border: 1px solid ",";\n    border-radius: 1px;\n  }\n"],yt,yt,I("backgroundDarker"),I("gray1")),vt=u.ZP.div.withConfig({displayName:"Tooltip__Wrapper"})(["\n  position: relative;\n  max-width: 260px;\n  padding: 1rem;\n  background: ",";\n  border: 1px solid ",';\n  border-radius: 1px;\n\n  &[data-popper-placement^="right"] ',' {\n    left: -4px;\n\n    &::before {\n      border-right: none;\n      border-top: none;\n    }\n  }\n\n  &[data-popper-placement^="left"] ',' {\n    right: -4px;\n\n    &::before {\n      border-left: none;\n      border-bottom: none;\n    }\n  }\n\n  &[data-popper-placement^="top"] ',' {\n    bottom: -4px;\n\n    &::before {\n      border-left: none;\n      border-top: none;\n    }\n  }\n\n  &[data-popper-placement^="bottom"] '," {\n    top: -4px;\n\n    &::before {\n      border-right: none;\n      border-bottom: none;\n    }\n  }\n"],I("backgroundDarker"),I("gray1"),wt,wt,wt,wt),Ct=({arrow:e,children:t,...n})=>i.createElement(vt,n,i.createElement(Oe,{color:"foreground"},t),e&&i.createElement(wt,{ref:e.setArrowElement,style:e.styles}));var _t=n(87703);function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(this,arguments)}const St=({height:e,...t})=>i.createElement(_t.OO,xt({style:e?{height:e}:{}},t));var kt=n(11502),Nt=n(82599),Tt=n(96839),Ot=n(86304),Rt=n(81594),It=n(30243),Pt=n(84239),Lt=n(53117),At=n(40286);const Bt=new O,Dt={quest:Bt},Mt=(0,i.createContext)(Dt),Ft=({children:e})=>i.createElement(Mt.Provider,{value:{quest:Bt}},e),qt="questdb-sql",zt=e=>{const t=e.getModel(),n=e.getSelection();return t&&n?t.getValueInRange(n):void 0},Zt=e=>{const t=e.getValue({preserveBOM:!1,lineEnding:"\n"}).replace(/"[^"]*"|'[^']*'|`[^`]*`|(--\s?.*$)/gm,((e,t)=>t?"":e)),n=e.getPosition();let r=0,o=0;const a=[];let i=0,l=0,s=-1,c=null,d=!1;if(n){for(let e=0;e<t.length&&null===c;e++)switch(t[e]){case";":if(d){o++;continue}r<n.lineNumber-1||r===n.lineNumber-1&&o<n.column-1?(a.push({row:i,col:l,position:s,limit:e}),i=r,l=o,s=e+1,o++):c=t.substring(-1===s?0:s,e);break;case" ":s===e&&(i=r,l=o,s=e+1),o++;break;case"\n":r++,o=0,s===e&&(i=r,l=o,s=e+1,o++);break;case"'":d=!d,o++;break;default:o++}if(null===c&&(c=-1===s?t:t.substring(s)),0===c.length){const e=a.pop();return e?{column:e.col,query:t.substring(e.position,e.limit),row:e.row}:void 0}return{column:l,query:c,row:i}}},jt=(e,t,n={appendAt:"cursor"})=>{const r=e.getModel();if(r){const o=e.getPosition();if(o){const a=t.split("\n"),{prefix:i,suffix:l,lineStartOffset:s,selectStartOffset:c}=(({appendAt:e,model:t,position:n})=>{const r=1===n.lineNumber,o=n.lineNumber===t?.getValue().split("\n").length,a=t?.getLineContent(n.lineNumber),i=o?void 0:t?.getLineContent(n.lineNumber+1),l=!r&&!o,s={prefix:1,suffix:2,lineStartOffset:1,selectStartOffset:0},c=({end:[{when:()=>r,then:()=>({prefix:1,suffix:0})},{when:()=>!0,then:()=>({prefix:2,suffix:0,selectStartOffset:1})}],cursor:[{when:()=>""===t?.getValue(),then:()=>({prefix:0,suffix:1,lineStartOffset:0})},{when:()=>r&&""===a,then:()=>({prefix:0,lineStartOffset:0,suffix:""===i?0:1})},{when:()=>r&&""!==a,then:()=>({prefix:""===i?1:2,suffix:1,selectStartOffset:1})},{when:()=>l&&""===a,then:()=>({prefix:0,suffix:""===i?1:2})},{when:()=>l&&""!==a&&""!==i,then:()=>({prefix:1,suffix:2})},{when:()=>l&&""!==a&&""===i,then:()=>({prefix:1,suffix:1,selectStartOffset:1})},{when:()=>o,then:()=>({prefix:""===a?1:2,suffix:1,lineStartOffset:1,selectStartOffset:""===a?0:1})}]}[e].find((({when:e})=>e()))??{then:()=>s}).then();return{...s,...c}})({appendAt:n.appendAt,model:r,position:o}),d=(({model:e,position:t,lineStartOffset:n,newQueryLines:r,appendAt:o})=>{if("cursor"===o)return{lineStart:t.lineNumber+n,lineEnd:t.lineNumber+r.length,columnStart:0,columnEnd:r[r.length-1].length+1};const a=(e?.getValue().split("\n").length??0)+n;return{lineStart:a,lineEnd:a+r.length,columnStart:0,columnEnd:r[r.length-1].length+1}})({model:r,position:o,lineStartOffset:s,appendAt:n.appendAt,newQueryLines:a}),u={lineStart:d.lineStart+c,lineEnd:d.lineStart+c+(a.length-1),columnStart:0,columnEnd:d.columnEnd};(({editor:e,lineNumber:t,column:n,text:r})=>{e.executeEdits("",[{range:{startLineNumber:t,startColumn:n,endLineNumber:t,endColumn:n},text:r}])})({editor:e,lineNumber:d.lineStart,column:d.columnStart,text:`${"\n".repeat(i)}${t}${"\n".repeat(l)}`}),e.setSelection({startLineNumber:u.lineStart,endLineNumber:u.lineEnd,startColumn:u.columnStart,endColumn:u.columnEnd})}e.focus(),"end"===n.appendAt&&e.revealLine(r.getLineCount())}},Ut=(e,t)=>e.findMatches(t,!0,!1,!0,null,!0)??null;var Gt=n(71753);let Ht=function(e){return e.AUTH_PAYLOAD="AUTH_PAYLOAD",e.QUERY_TEXT="query.text",e.EDITOR_LINE="editor.line",e.EDITOR_COL="editor.col",e.EXAMPLE_QUERIES_VISITED="editor.exampleQueriesVisited",e.EDITOR_SPLITTER_BASIS="splitter.editor.basis",e.RESULTS_SPLITTER_BASIS="splitter.results.basis",e}({});const Vt=e=>localStorage.getItem(e)??"",Wt=(e,t)=>localStorage.setItem(e,t);class Qt extends Gt.default{constructor(){super("web-console"),this.version(1).stores({buffers:"++id, label",editor_settings:"++id, key"}),this.version(2).stores({read_notifications:"++id, newsId"}),this.on("populate",(()=>{const e=Vt(Ht.QUERY_TEXT);void 0!==e&&localStorage.removeItem(Ht.QUERY_TEXT),this.buffers.add(Kt({label:"SQL",value:e??""})),this.editor_settings.add({key:"activeBufferId",value:Xt.id}),this.editor_settings.add({key:"returnTo",value:""}),this.editor_settings.add({key:"returnToLabel",value:""})})),this.on("ready",(async()=>{0===await this.buffers.count()&&this.buffers.add(Kt({label:"SQL",value:""}));const e=new URL(window.location.href);await Promise.all(["returnTo","returnToLabel"].map((async t=>{if(e.searchParams.has(t)){const n=e.searchParams.get(t)??"";0!==await this.editor_settings.where("key").equals(t).count()?this.editor_settings.where("key").equals(t).modify({value:n}):this.editor_settings.add({key:t,value:n}),e.searchParams.delete(t)}}))),window.history.replaceState({},"",e)}))}}const $t=new Qt,Yt={cursorState:[{inSelectionMode:!1,selectionStart:{lineNumber:1,column:1},position:{lineNumber:1,column:1}}],contributionsState:[{"editor.contrib.wordHighlighter":!1,"editor.contrib.folding":{lineCount:1,provider:"indent",foldedImports:!1}}],viewState:{scrollLeft:0,firstPosition:{lineNumber:1,column:1},firstPositionDeltaTop:0}},Kt=({label:e,value:t,editorViewState:n=Yt})=>({label:e,value:t??"",editorViewState:n}),Xt={id:1,...Kt({label:"SQL"})},Jt=()=>$t.buffers.toArray(),en=()=>$t.editor_settings.where("key").equals("activeBufferId").first();var tn=n(62336);const nn={editorRef:{current:null},monacoRef:{current:null},insertTextAtCursor:()=>{},appendQuery:(e,t)=>{},buffers:[],activeBuffer:Xt,setActiveBuffer:()=>Promise.resolve(),addBuffer:()=>Promise.resolve(Xt),deleteBuffer:()=>Promise.resolve(),updateBuffer:()=>Promise.resolve(),editorReadyTrigger:()=>{},inFocus:!1},rn=(0,i.createContext)(nn),on=({children:e})=>{const t=(0,i.useRef)(null),n=(0,i.useRef)(null),r=(0,tn.useLiveQuery)(Jt,[]),o=(0,tn.useLiveQuery)((()=>en()),[])?.value,[a,l]=(0,i.useState)(Xt),[s,c]=(0,i.useState)(!1),d=(0,i.useRef)(!1);if((0,i.useEffect)((()=>{if(!d.current&&r&&o){const e=r?.find((e=>e.id===o))??r[0];l(e),d.current=!0}}),[r,o]),!r||!o||a===Xt)return null;const u=async e=>{const r=(await en())?.value;if(r){if(e.id===r)return void t.current?.focus();await m(a.id)}if(await(o=e.id,$t.editor_settings.where("key").equals("activeBufferId").modify({value:o})),l(e),t.current&&n.current){const r=n.current.editor.createModel(e.value,qt);t.current.setModel(r),t.current.focus()}var o;e.editorViewState&&t.current?.restoreViewState(e.editorViewState)},m=async(e,n)=>{const r=t.current?.saveViewState();await((e,t)=>$t.buffers.update(e,t))(e,{...n,...r?{editorViewState:r}:{}})};return i.createElement(rn.Provider,{value:{editorRef:t,monacoRef:n,insertTextAtCursor:e=>{t?.current&&((e,t)=>{e.trigger("keyboard","type",{text:t}),e.focus()})(t.current,e)},appendQuery:(e,n)=>{t?.current&&jt(t.current,e,n)},buffers:r,activeBuffer:a,setActiveBuffer:u,addBuffer:async(e,{shouldSelectAll:r=!1}={})=>{const o=(await $t.buffers.filter((e=>e.label.startsWith(Xt.label))).toArray()).map((e=>e.label.slice(Xt.label.length+1))).filter(Boolean).map((e=>parseInt(e,10))).sort(),a=Kt({...e,label:e?.label??`${Xt.label} ${(()=>{for(let e=0;e<=o.length;e++){const t=e+1;if(!o.includes(t))return t}})()}`}),i=await $t.buffers.add(a);if(await u(a),t.current&&n.current&&"string"==typeof a.value){const e=n.current?.editor.createModel(a.value,qt);t.current.setModel(e),r&&t.current?.setSelection(e.getFullModelRange())}return{id:i,...a}},deleteBuffer:async e=>{await(e=>$t.buffers.delete(e))(e);const n=(await en())?.value;if(void 0!==n&&n===e){const e=await $t.buffers.toCollection().last();await u(e??Xt)}else t.current?.focus()},updateBuffer:m,editorReadyTrigger:e=>{e.focus(),c(!0),e.onDidFocusEditorWidget((()=>c(!0))),e.onDidBlurEditorWidget((()=>c(!1))),a.editorViewState&&e.restoreViewState(a.editorViewState)},inFocus:s}},e)},an=()=>(0,i.useContext)(rn),ln=(0,u.ZP)(Oe).withConfig({displayName:"Row__Type"})(["\n  margin-right: 1rem;\n  flex: 0;\n  transition: opacity ","ms;\n"],V.REG),sn=(0,u.ZP)(Oe).withConfig({displayName:"Row__Title"})(["\n  cursor: ",";\n"],(({kind:e})=>["folder","table"].includes(e)?"pointer":"initial")),cn=(0,u.ZP)(ae).withConfig({displayName:"Row__PlusButton"})(["\n  position: absolute;\n  right: ",";\n  margin-left: 1rem;\n  opacity: 0;\n"],(({tooltip:e})=>e?"3rem":"1rem")),dn=u.ZP.div.withConfig({displayName:"Row__Wrapper"})(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 0.5rem 0;\n  padding-left: 1rem;\n  transition: background ","ms;\n\n  &:hover\n    ",",\n    &:active\n    "," {\n    opacity: 1;\n  }\n\n  &:hover,\n  &:active {\n    background: ",";\n  }\n\n  &:hover "," {\n    opacity: 0;\n  }\n"],V.REG,cn,cn,I("selection"),ln),un=u.ZP.div.withConfig({displayName:"Row__FlexRow"})(["\n  display: flex;\n  align-items: center;\n"]),mn=u.ZP.span.withConfig({displayName:"Row__Spacer"})(["\n  flex: 1;\n"]),gn=(0,u.ZP)(It.d).withConfig({displayName:"Row__InfoIcon"})(["\n  color: ",";\n"],I("purple")),fn=(0,u.ZP)(kt.w).withConfig({displayName:"Row__RocketIcon"})(["\n  color: ",";\n  margin-right: 1rem;\n"],I("orange")),pn=(0,u.ZP)(Nt.l).withConfig({displayName:"Row__SortDownIcon"})(["\n  color: ",";\n  margin-right: 0.8rem;\n"],I("green")),hn=(0,u.ZP)(Tt.U).withConfig({displayName:"Row__RightArrowIcon"})(["\n  color: ",";\n  margin-right: 0.8rem;\n  cursor: pointer;\n"],I("gray2")),bn=(0,u.ZP)(hn).withConfig({displayName:"Row__DownArrowIcon"})(["\n  transform: rotateZ(90deg);\n"]),En=(0,u.ZP)(Ot.B).withConfig({displayName:"Row__DotIcon"})(["\n  color: ",";\n  margin-right: 1rem;\n"],I("gray2")),yn=(0,u.ZP)(Pt.i).withConfig({displayName:"Row__TitleIcon"})(["\n  min-height: 18px;\n  min-width: 18px;\n  margin-right: 1rem;\n  color: ",";\n"],I("cyan")),wn=u.ZP.div.withConfig({displayName:"Row__InfoIconWrapper"})(["\n  display: flex;\n  padding: 0 1rem;\n  align-items: center;\n  justify-content: center;\n"]),vn=u.ZP.div.withConfig({displayName:"Row__PartitionByWrapper"})(["\n  margin-right: 1rem;\n  display: flex;\n  align-items: center;\n"]),Cn=(0,u.ZP)(Lt.u).withConfig({displayName:"Row__PieChartIcon"})(["\n  color: ",";\n  margin-right: 0.5rem;\n"],I("gray2")),_n=(0,u.ZP)(At.m).withConfig({displayName:"Row__FileListIcon"})(["\n  color: ",";\n  margin-right: 0.5rem;\n"],I("yellow")),xn=({className:e,designatedTimestamp:t,description:n,expanded:r,kind:o,indexed:a,name:l,partitionBy:s,walEnabled:c,onClick:d,suffix:u,tooltip:m,type:g})=>{const{insertTextAtCursor:f}=an(),p=(0,i.useCallback)((e=>{e.stopPropagation(),f("table"!==o||/^[a-z0-9_]+$/i.test(l)?l:`"${l}"`)}),[l,o]);return i.createElement(dn,{className:e,expanded:r,onClick:d},i.createElement(un,null,"table"===o&&i.createElement(yn,{size:"18px"}),"column"===o&&a&&i.createElement(We,{icon:i.createElement(fn,{size:"13px"}),placement:"top",tooltip:"Indexed"}),"folder"===o&&r&&i.createElement(bn,{size:"14px"}),"folder"===o&&!r&&i.createElement(hn,{size:"14px"}),"column"===o&&!a&&l===t&&i.createElement(We,{icon:i.createElement(pn,{size:"14px"}),placement:"top",tooltip:"Designated timestamp"}),"column"===o&&!a&&"TIMESTAMP"!==g&&i.createElement(En,{size:"12px"}),i.createElement(sn,{color:"foreground",ellipsis:!0,kind:o},l),u,i.createElement(mn,null),g&&i.createElement(ln,{_style:"italic",color:"pinkLighter",transform:"lowercase"},g),"table"===o&&"NONE"!==s&&i.createElement(vn,null,i.createElement(Cn,{size:"14px"}),i.createElement(Oe,{color:"gray2"},s)),"table"===o&&c&&i.createElement(vn,null,i.createElement(_n,{size:"14px"}),i.createElement(Oe,{color:"yellow"},"WAL")),["column","table"].includes(o)&&i.createElement(cn,{onClick:p,size:"sm",tooltip:m},i.createElement(Rt.a,{size:"16px"}),i.createElement("span",null,"Add")),m&&n&&i.createElement(We,{icon:i.createElement(wn,null,i.createElement(gn,{size:"10px"})),placement:"right",tooltip:n})),!m&&i.createElement(Oe,{color:"comment"},n))};function Sn(){return Sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sn.apply(this,arguments)}const kn=u.ZP.ul.withConfig({displayName:"Tree__Ul"})(["\n  padding: 0;\n  margin: 0;\n"]),Nn=u.ZP.li.withConfig({displayName:"Tree__Li"})(["\n  list-style: none;\n  padding: 0 1rem;\n"]),Tn=e=>{const{name:t,kind:n,initiallyOpen:r,onOpen:o,render:a,children:l=[],wrapper:s}=e,[c,d]=(0,i.useState)(r??!1),[u,m]=(0,i.useState)(!1),[g,f]=(0,i.useState)(l),p=(0,i.useRef)(!0),h=(0,i.useCallback)((async()=>{const e={setChildren:e=>{p.current&&f(e)}};"function"==typeof o&&(m(!0),await o(e),p.current&&m(!1))}),[o]),b=(0,i.useCallback)((async()=>{u||c||await h(),d(!c)}),[c,u,h]);return(0,i.useEffect)((()=>(c&&"function"==typeof o&&0===g.length&&!u&&(async()=>{p.current&&await h()})(),()=>{p.current=!1})),[]),(0,i.useEffect)((()=>{d(r??!1)}),[r]),i.createElement(Nn,null,"function"==typeof a?a({toggleOpen:b,isOpen:c,isLoading:u}):i.createElement(xn,{kind:n??"folder",name:t,onClick:()=>d(!c)}),c&&i.createElement(Rn,{condition:Boolean(s),wrapper:e=>i.createElement(s??i.Fragment,{},e)},i.createElement(On,{root:g})))},On=({root:e})=>i.createElement(kn,null,e.map((e=>i.createElement(Tn,Sn({key:e.name},e))))),Rn=({condition:e,wrapper:t,children:n})=>e?t(n):n;let In=function(e){return e.BOOTSTRAP="CONSOLE/BOOTSTRAP",e.REFRESH_AUTH_TOKEN="CONSOLE/REFRESH_AUTH_TOKEN",e.SET_CONFIG="CONSOLE/SET_CONFIG",e.TOGGLE_SIDE_MENU="CONSOLE/TOGGLE_SIDE_MENU",e.SET_ACTIVE_TOP_PANEL="CONSOLE/SET_ACTIVE_TOP_PANEL",e.SET_ACTIVE_SIDEBAR="CONSOLE/SET_ACTIVE_SIDEBAR",e.SET_ACTIVE_BOTTOM_PANEL="CONSOLE/SET_ACTIVE_BOTTOM_PANEL",e}({});const Pn={bootstrap:()=>({type:In.BOOTSTRAP}),refreshAuthToken:e=>({payload:e,type:In.REFRESH_AUTH_TOKEN}),setConfig:e=>({payload:e,type:In.SET_CONFIG}),toggleSideMenu:()=>({type:In.TOGGLE_SIDE_MENU}),setActiveTopPanel:e=>({payload:e,type:In.SET_ACTIVE_TOP_PANEL}),setActiveSidebar:e=>({payload:e,type:In.SET_ACTIVE_SIDEBAR}),setActiveBottomPanel:e=>({payload:e,type:In.SET_ACTIVE_BOTTOM_PANEL})};let Ln=function(e){return e.ERROR="error",e.INFO="info",e.SUCCESS="success",e}({}),An=function(e){return e.ADD_NOTIFICATION="QUERY/ADD_NOTIFICATION",e.CLEANUP_NOTIFICATIONS="QUERY/CLEANUP_NOTIFICATIONS",e.REMOVE_NOTIFICATION="QUERY/REMOVE_NOTIFICATION",e.SET_RESULT="QUERY/SET_RESULT",e.STOP_RUNNING="QUERY/STOP_RUNNING",e.TOGGLE_RUNNING="QUERY/TOGGLE_RUNNING",e.SET_TABLES="QUERY/SET_TABLES",e}({}),Bn=function(e){return e.SET_CONFIG="TELEMETRY/SET_CONFIG",e.SET_REMOTE_CONFIG="TELEMETRY/SET_REMOTE_CONFIG",e}({});const Dn=Pn,Mn=e=>({payload:{createdAt:new Date,type:Ln.SUCCESS,...e},type:An.ADD_NOTIFICATION}),Fn=()=>({type:An.CLEANUP_NOTIFICATIONS}),qn=e=>({payload:e,type:An.SET_RESULT}),zn=()=>({type:An.STOP_RUNNING}),Zn=(e=!1)=>({type:An.TOGGLE_RUNNING,payload:{isRefresh:e}}),jn=e=>({payload:{tables:e},type:An.SET_TABLES}),Un=e=>({payload:e,type:Bn.SET_CONFIG}),Gn=e=>({payload:e,type:Bn.SET_REMOTE_CONFIG});var Hn=n(54184),Vn=n(36610),Wn=n(47532),Qn=n(69475),$n=n(81557),Yn=n(425),Kn=n(69863);const Xn=[e=>e.pipe((0,Vn.l)(In.BOOTSTRAP),(0,_.w)((()=>k("assets/console-configuration.json").pipe((0,S.U)((e=>{if(!e.error)return Dn.setConfig(e.data)})),(0,Wn.h)((e=>!!e)))))),e=>e.pipe((0,Vn.l)(In.BOOTSTRAP),(0,_.w)((()=>null!=Vt(Ht.AUTH_PAYLOAD)?(0,v.of)(Dn.refreshAuthToken(!0)):Yn.C))),e=>e.pipe((0,Vn.l)(In.REFRESH_AUTH_TOKEN),(0,_.w)((e=>{const t=Vt(Ht.AUTH_PAYLOAD);if(null!=t)try{const{expiry:n,refreshRoute:r}=JSON.parse(t);if(null==r)return Yn.C;const o=k(r).pipe((0,Qn.b)((e=>{e.error||Wt(Ht.AUTH_PAYLOAD,JSON.stringify(e.data))})),(0,_.w)((()=>(0,v.of)(Dn.refreshAuthToken(!1))))),a=3e4,i=1e3*(n??0)-a-Date.now();return i>-a?(0,Kn.H)(Math.max(0,i)).pipe((0,$n.c)(o)):e.payload?o:Yn.C}catch(e){return Yn.C}return Yn.C})))];var Jn=n(26342),er=n(67021),tr=n(57131);const nr=new O,rr=[e=>e.pipe((0,Vn.l)(In.BOOTSTRAP),(0,_.w)((()=>(0,tr.D)(nr.query(`${E.CONFIG} limit -1`)))),(0,_.w)((e=>e.type===N.DQL?(0,v.of)(Un(e.data[0])):Yn.C))),(e,t)=>e.pipe((0,Vn.l)(Bn.SET_CONFIG),(0,Jn.M)(t),(0,_.w)((([e,t])=>{const n=ur.telemetry.getConfig(t);return n?.enabled?k(`${y}/config`,{method:"POST",body:JSON.stringify(n)},!1):Yn.C})),(0,_.w)((e=>e.error?Yn.C:(0,v.of)(Gn(e.data))))),(e,t)=>e.pipe((0,Vn.l)(Bn.SET_REMOTE_CONFIG),(0,Jn.M)(t),(0,_.w)((([e,t])=>{const n=ur.telemetry.getRemoteConfig(t);if(n?.lastUpdated){const e=new Date(n.lastUpdated).toISOString();return(0,tr.D)(nr.queryRaw(`with tel as (\n              SELECT cast(created as long), event, origin\n              FROM ${E.MAIN}\n              WHERE created > '${e}'\n              LIMIT -10000 \n            )            \n            SELECT cast(created as long), cast(1000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(ceil(sum(rowCount) / 1000.0) as short) sm\n              FROM ${E.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n            )\n            UNION ALL \n            SELECT cast(created as long), cast(2000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(count() as short) sm\n              FROM ${E.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n            )\n            UNION ALL \n            SELECT cast(created as long), cast(3000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(max(latency) / 1000.0 as short) sm\n              FROM ${E.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n             )\n             UNION ALL\n             SELECT * FROM tel\n             `.replace(/\s+/g," ").trim()))}return Yn.C})),(0,Jn.M)(t),(0,_.w)((([e,t])=>{const n=ur.telemetry.getRemoteConfig(t),r=ur.telemetry.getConfig(t);return null!=r?.id&&e.type===N.DQL&&e.count>0?k(`${y}/add`,{method:"POST",body:JSON.stringify({columns:e.columns,dataset:e.dataset,id:r.id,version:r.version,os:r.os,package:r.package})},!1).pipe((0,S.U)((t=>{if(!t.error){const t=e.dataset[e.count-1][0];return Gn({...n,lastUpdated:t})}})),(0,er.g)(36e5),(0,Wn.h)((e=>!!e))):Yn.C})))],or=(0,Hn.l)(...Xn,...rr),ar={sideMenuOpened:!1,activeTopPanel:"tables",activeSidebar:void 0,activeBottomPanel:"zeroState"},ir={githubBanner:!1,readOnly:!1,savedQueries:[]},lr={notifications:[],tables:[],running:{value:!1,isRefresh:!1},maxNotifications:20},sr={},cr=(0,c.UY)({console:(e=ar,t)=>{switch(t.type){case In.SET_CONFIG:return{...e,config:{...ir,...t.payload}};case In.TOGGLE_SIDE_MENU:return{...e,sideMenuOpened:!e.sideMenuOpened};case In.SET_ACTIVE_TOP_PANEL:return{...e,activeTopPanel:t.payload};case In.SET_ACTIVE_SIDEBAR:return{...e,activeSidebar:t.payload};case In.SET_ACTIVE_BOTTOM_PANEL:return{...e,activeBottomPanel:t.payload};default:return e}},query:(e=lr,t)=>{switch(t.type){case An.ADD_NOTIFICATION:{const n=[...e.notifications,t.payload];for(;n.length===e.maxNotifications;)n.shift();return{...e,notifications:n}}case An.CLEANUP_NOTIFICATIONS:return{...e,notifications:[]};case An.REMOVE_NOTIFICATION:return{...e,notifications:e.notifications.filter((({createdAt:e})=>e!==t.payload))};case An.SET_RESULT:return{...e,result:t.payload};case An.STOP_RUNNING:return{...e,running:{value:!1,isRefresh:!1}};case An.TOGGLE_RUNNING:return{...e,running:{value:!e.running.value,isRefresh:t.payload.isRefresh}};case An.SET_TABLES:return{...e,tables:t.payload.tables};default:return e}},telemetry:(e=sr,t)=>{switch(t.type){case Bn.SET_CONFIG:return{...e,config:t.payload};case Bn.SET_REMOTE_CONFIG:return{...e,remoteConfig:{cta:!1,lastUpdated:new Date((new Date).getTime()-321408e5).toISOString(),...t.payload}};default:return e}}}),dr={getConfig:e=>e.console.config??ir,getSideMenuOpened:e=>e.console.sideMenuOpened,getActiveTopPanel:e=>e.console.activeTopPanel,getActiveSidebar:e=>e.console.activeSidebar,getActiveBottomPanel:e=>e.console.activeBottomPanel},ur={console:dr,query:{getNotifications:e=>e.query.notifications,getResult:e=>e.query.result,getRunning:e=>e.query.running,getTables:e=>e.query.tables},telemetry:{getConfig:e=>e.telemetry.config,getRemoteConfig:e=>e.telemetry.remoteConfig}};var mr=n(16927),gr=n(28436);const fr=u.ZP.div.withConfig({displayName:"GithubBanner__Wrapper"})(["\n  position: fixed;\n  display: flex;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  overflow: hidden;\n"],I("pink")),pr=u.ZP.span.withConfig({displayName:"GithubBanner__GithubLink"})(["\n  text-decoration: underline;\n"]),hr=(0,u.ZP)(Ee.x).withConfig({displayName:"GithubBanner__CloseIcon"})(["\n  position: absolute;\n  right: 1rem;\n  color: ",";\n\n  &:hover {\n    cursor: pointer;\n  }\n"],I("black")),br=(0,u.ZP)(gr.U).withConfig({displayName:"GithubBanner__StarIcon"})(["\n  color: ",";\n"],I("yellow")),Er=({onClick:e})=>i.createElement(fr,null,i.createElement(et,{hoverColor:"black",href:"https://github.com/questdb/questdb",weight:800},"If you like QuestDB, give us a ",i.createElement(br,{size:"14px"}),"on",i.createElement(pr,null,"Github")),i.createElement(hr,{onClick:e,size:"20px"}));var yr=n(75542);const wr=/Build Information: QuestDB ([\w- ]+ )?([0-9A-Za-z.-]*),/,vr=/Commit Hash ([0-9A-Za-z]*)/;var Cr=n(82053),_r=n(64917),xr=n(42127),Sr=n(57936),kr=n(53341);const Nr=u.ZP.div.withConfig({displayName:"BuildVersion__Wrapper"})(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n\n  & > :not(:last-child) {\n    margin-right: 1rem;\n  }\n"]),Tr=(0,u.ZP)(ae).withConfig({displayName:"BuildVersion__ReleaseNotesButton"})(["\n  position: relative;\n  ","\n  gap: 0.5rem;\n"],(({enterprise:e})=>e?"background: #322733;":"")),Or=u.ZP.a.withConfig({displayName:"BuildVersion__ReleaseLink"})(["\n  text-decoration: none;\n"]),Rr=(0,u.ZP)(Cr.k).withConfig({displayName:"BuildVersion__UpgradeIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.green)),Ir=u.ZP.span.withConfig({displayName:"BuildVersion__NewestRelease"})(["\n  color: ",";\n  font-size: ",";\n"],(({theme:e})=>e.color.green),(({theme:e})=>e.fontSize.xs)),Pr={dev:{label:"QuestDB Dev"},"open-source":{label:"QuestDB"},enterprise:{icon:i.createElement(xr.S,{size:"18px"}),label:"QuestDB Enterprise"},"enterprise pro":{icon:i.createElement(Sr.H,{size:"18px"}),label:"QuestDB Enterprise Pro"},"enterprise ultimate":{icon:i.createElement(kr.$,{size:"18px"}),label:"QuestDB Enterprise Ultimate"}},Lr=()=>{const{quest:e}=(0,i.useContext)(Mt),[t,n]=(0,i.useState)({kind:"open-source",version:""}),[r,o]=(0,i.useState)(""),[a,l]=(0,i.useState)(null);if((0,i.useEffect)((()=>{e.queryRaw("select build",{limit:"0,1000"}).then((e=>{e.type===N.DQL&&1===e.count&&(n((e=>{const t=wr.exec(e.toString());return t?{kind:t[1]?t[1].trim().toLowerCase():"open-source",version:t[2]}:{kind:"dev"}})(e.dataset[0][0])),o((e=>{const t=vr.exec(e.toString());return t?t[1]:""})(e.dataset[0][0])))}))}),[]),(0,i.useEffect)((()=>{t.version&&t.kind.includes("open-source")&&e.getLatestRelease().then((e=>{e.name&&l(e)}))}),[t]),""===t.version&&!r.length)return null;const s=t.kind.includes("enterprise"),c=((e,t)=>{if(void 0===t)return!1;const n=e.kind.includes("enterprise");try{if(e.version){const r=(0,yr.qu)(e.version,t,"<");return!n&&r}return!1}catch(e){return!1}})(t,a?.name),d=c?a?.html_url:"https://github.com/questdb/questdb"+(t?`/releases/tag/${t.version}`:`/commit/${r}`),{label:u,icon:m}=Pr[t.kind]??Pr.dev;return i.createElement(Nr,null,i.createElement(Or,{href:s?"https://questdb.io/enterprise":d,rel:"noopener noreferrer",target:"_blank"},i.createElement(Tr,{enterprise:s,title:["dev","open-source"].includes(t.kind)?"Show "+(t?"release notes":"commit details"):""},m,u,t.version?` ${t.version}`:"",!s&&i.createElement(_r.d,{size:"16px"}),c&&i.createElement(i.Fragment,null,i.createElement(Rr,{size:"18px"}),i.createElement(Ir,null,a?.name)))))},Ar=u.ZP.div.withConfig({displayName:"ConnectionStatus__Wrapper"})(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n"]),Br=u.ZP.div.withConfig({displayName:"ConnectionStatus__StatusIcon"})(["\n  display: block;\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 50%;\n  background-color: ",";\n  margin-right: 0.6rem;\n"],(e=>e.isConnected?I("green"):I("red"))),Dr=()=>{const[e,t]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{window.bus.on(b.MSG_CONNECTION_OK,(()=>{t(!0)})),window.bus.on(b.MSG_CONNECTION_ERROR,(()=>{t(!1)}))}),[e]),i.createElement(Ar,null,i.createElement(Br,{isConnected:e}),e?i.createElement(Oe,{color:"white"},"Connected"):i.createElement(Oe,{color:"white"},"Error connecting to QuestDB"))},Mr=u.ZP.div.withConfig({displayName:"Footer__Wrapper"})(["\n  position: absolute;\n  display: flex;\n  height: 4rem;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding-left: 45px;\n"]),Fr=u.ZP.div.withConfig({displayName:"Footer__LeftContainer"})(["\n  display: flex;\n  padding-left: 1rem;\n  align-items: center;\n  flex: 1;\n"]),qr=u.ZP.div.withConfig({displayName:"Footer__RightContainer"})(["\n  display: flex;\n  padding-right: 1rem;\n  align-items: center;\n\n  & > *:not(:last-child) {\n    margin-right: 1rem;\n  }\n"]),zr=(0,u.vJ)(["\n  .github-banner-enter {\n    max-height: 0;\n  }\n\n  .github-banner-enter-active {\n    max-height: 4rem;\n    transition: all ","ms;\n  }\n\n  .github-banner-exit,\n  .github-banner-enter-done {\n    max-height: 4rem;\n  }\n\n  .github-banner-exit-active {\n    max-height: 0;\n    transition: all ","ms;\n  }\n"],V.REG,V.REG),Zr=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(!0),o=(0,i.useCallback)((()=>{t(!1)}),[]),{githubBanner:a}=(0,s.v9)(ur.console.getConfig);return(0,i.useEffect)((()=>{setTimeout((()=>{t(!0)}),2e3),window.bus.on(b.MSG_CONNECTION_ERROR,(()=>{r(!1)})),window.bus.on(b.MSG_CONNECTION_OK,(()=>{r(!0)}))}),[]),i.createElement(Mr,{id:"footer"},i.createElement(Fr,null,i.createElement(Oe,{color:"foreground"},"Copyright  ",(new Date).getFullYear()," QuestDB")),i.createElement(qr,null,i.createElement(Dr,null),n&&i.createElement(Lr,null),i.createElement(et,{color:"foreground",hoverColor:"cyan",href:"https://github.com/questdb/questdb",rel:"noreferrer",target:"_blank"},i.createElement(mr.E,{size:"18px"}))),i.createElement(zr,null),i.createElement(ot.Z,{classNames:"github-banner",in:e&&a,timeout:V.REG,unmountOnExit:!0},i.createElement(Er,{onClick:o})))};var jr=n(92043);const Ur="#2c2e3d",Gr={base:"vs-dark",inherit:!0,rules:[{background:Ur,token:""},{foreground:"6272a4",token:"comment"},{foreground:"f1fa8c",token:"string"},{foreground:"50fa7b",token:"number"},{foreground:"f1fa8c",token:"string.sql"},{foreground:"ff79c6",token:"operator.sql"},{foreground:"8be9fd",fontStyle:"italic",token:"dataType"},{foreground:"8be9fd",token:"predefined.sql"},{foreground:"8be9fd",token:"function"},{foreground:"bd93f9",token:"constant.numeric"},{foreground:"bd93f9",token:"constant.language"},{foreground:"bd93f9",token:"constant.character"},{foreground:"bd93f9",token:"constant.other"},{foreground:"ffb86c",token:"variable.other.readwrite.instance"},{foreground:"ff79c6",token:"constant.character.escaped"},{foreground:"ff79c6",token:"constant.character.escape"},{foreground:"ff79c6",token:"string source"},{foreground:"ff79c6",token:"string source.ruby"},{foreground:"ff79c6",token:"keyword"},{foreground:"ff79c6",token:"storage"},{foreground:"8be9fd",fontStyle:"italic",token:"storage.type"},{foreground:"50fa7b",fontStyle:"underline",token:"entity.name.class"},{foreground:"50fa7b",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"50fa7b",token:"entity.name.function"},{foreground:"ffb86c",fontStyle:"italic",token:"variable.parameter"},{foreground:"ff79c6",token:"entity.name.tag"},{foreground:"50fa7b",token:"entity.other.attribute-name"},{foreground:"8be9fd",token:"support.function"},{foreground:"6be5fd",token:"support.constant"},{foreground:"66d9ef",fontStyle:" italic",token:"support.type"},{foreground:"66d9ef",fontStyle:" italic",token:"support.class"},{foreground:"f8f8f0",background:"ff79c6",token:"invalid"},{foreground:"f8f8f0",background:"bd93f9",token:"invalid.deprecated"},{foreground:"cfcfc2",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"6272a4",token:"meta.diff"},{foreground:"6272a4",token:"meta.diff.header"},{foreground:"ff79c6",token:"markup.deleted"},{foreground:"50fa7b",token:"markup.inserted"},{foreground:"e6db74",token:"markup.changed"},{foreground:"bd93f9",token:"constant.numeric.line-number.find-in-files - match"},{foreground:"e6db74",token:"entity.name.filename"},{foreground:"f83333",token:"message.error"},{foreground:"eeeeee",token:"punctuation.definition.string.begin.json - meta.structure.dictionary.value.json"},{foreground:"eeeeee",token:"punctuation.definition.string.end.json - meta.structure.dictionary.value.json"},{foreground:"8be9fd",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"f1fa8c",token:"meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"50fa7b",token:"meta meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ff79c6",token:"meta meta meta meta meta.structure.dictionary.value string"},{foreground:"bd93f9",token:"meta meta meta meta.structure.dictionary.value string"},{foreground:"50fa7b",token:"meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta.structure.dictionary.value string"}],colors:{"activityBar.activeBackground":"#bd93f910","activityBar.activeBorder":"#ff79c680","activityBar.background":"#343746","activityBar.foreground":"#f8f8f2","activityBar.inactiveForeground":"#6272a4","activityBarBadge.background":"#ff79c6","activityBarBadge.foreground":"#f8f8f2","badge.background":"#44475a","badge.foreground":"#f8f8f2","breadcrumb.activeSelectionForeground":"#f8f8f2","breadcrumb.background":Ur,"breadcrumb.focusForeground":"#f8f8f2","breadcrumb.foreground":"#6272a4","breadcrumbPicker.background":"#191a21","button.background":"#44475a","button.foreground":"#f8f8f2","button.secondaryBackground":Ur,"button.secondaryForeground":"#f8f8f2","button.secondaryHoverBackground":"#343746","debugToolBar.background":"#21222c","diffEditor.insertedTextBackground":"#50fa7b20","diffEditor.removedTextBackground":"#ff555550","dropdown.background":"#343746","dropdown.border":"#191a21","dropdown.foreground":"#f8f8f2","editor.background":Ur,"editor.findMatchBackground":"#ffb86c80","editor.findMatchHighlightBackground":"#ffffff40","editor.findRangeHighlightBackground":"#44475a75","editor.foldBackground":"#21222c","editor.foreground":"#f8f8f2","editor.hoverHighlightBackground":"#8be9fd50","editor.lineHighlightBorder":"#383b4b","editor.lineHighlightBackground":"#383b4b","editor.rangeHighlightBackground":"#bd93f915","editor.selectionBackground":"#44475a","editor.selectionHighlightBackground":"#424450","editor.snippetFinalTabstopHighlightBackground":Ur,"editor.snippetFinalTabstopHighlightBorder":"#50fa7b","editor.snippetTabstopHighlightBackground":Ur,"editor.snippetTabstopHighlightBorder":"#6272a4","editor.wordHighlightBackground":"#8be9fd50","editor.wordHighlightStrongBackground":"#50fa7b50","editorBracketHighlight.foreground1":"#f8f8f2","editorBracketHighlight.foreground2":"#ff79c6","editorBracketHighlight.foreground3":"#8be9fd","editorBracketHighlight.foreground4":"#50fa7b","editorBracketHighlight.foreground5":"#bd93f9","editorBracketHighlight.foreground6":"#ffb86c","editorBracketHighlight.unexpectedBracket.foreground":"#ff5555","editorCodeLens.foreground":"#6272a4","editorError.foreground":"#ff5555","editorGroup.border":"#bd93f9","editorGroup.dropBackground":"#44475a70","editorGroupHeader.tabsBackground":"#191a21","editorGutter.addedBackground":"#50fa7b80","editorGutter.deletedBackground":"#ff555580","editorGutter.modifiedBackground":"#8be9fd80","editorHoverWidget.background":Ur,"editorHoverWidget.border":"#6272a4","editorIndentGuide.activeBackground":"#ffffff45","editorIndentGuide.background":"#ffffff1a","editorLineNumber.foreground":"#6272a4","editorLink.activeForeground":"#8be9fd","editorMarkerNavigation.background":"#21222c","editorOverviewRuler.addedForeground":"#50fa7b80","editorOverviewRuler.border":"#191a21","editorOverviewRuler.currentContentForeground":"#50fa7b","editorOverviewRuler.deletedForeground":"#ff555580","editorOverviewRuler.errorForeground":"#ff555580","editorOverviewRuler.incomingContentForeground":"#bd93f9","editorOverviewRuler.infoForeground":"#8be9fd80","editorOverviewRuler.modifiedForeground":"#8be9fd80","editorOverviewRuler.selectionHighlightForeground":"#ffb86c","editorOverviewRuler.warningForeground":"#ffb86c80","editorOverviewRuler.wordHighlightForeground":"#8be9fd","editorOverviewRuler.wordHighlightStrongForeground":"#50fa7b","editorRuler.foreground":"#ffffff1a","editorSuggestWidget.background":"#21222c","editorSuggestWidget.foreground":"#f8f8f2","editorSuggestWidget.selectedBackground":"#44475a","editorWarning.foreground":"#8be9fd","editorWhitespace.foreground":"#ffffff1a","editorWidget.background":"#21222c",errorForeground:"#ff5555","extensionButton.prominentBackground":"#50fa7b90","extensionButton.prominentForeground":"#f8f8f2","extensionButton.prominentHoverBackground":"#50fa7b60",focusBorder:"#6272a4",foreground:"#f8f8f2","gitDecoration.conflictingResourceForeground":"#ffb86c","gitDecoration.deletedResourceForeground":"#ff5555","gitDecoration.ignoredResourceForeground":"#6272a4","gitDecoration.modifiedResourceForeground":"#8be9fd","gitDecoration.untrackedResourceForeground":"#50fa7b","input.background":Ur,"input.border":"#191a21","input.foreground":"#f8f8f2","input.placeholderForeground":"#6272a4","inputOption.activeBorder":"#bd93f9","inputValidation.errorBorder":"#ff5555","inputValidation.infoBorder":"#ff79c6","inputValidation.warningBorder":"#ffb86c","list.activeSelectionBackground":"#44475a","list.activeSelectionForeground":"#f8f8f2","list.dropBackground":"#44475a","list.errorForeground":"#ff5555","list.focusBackground":"#44475a75","list.highlightForeground":"#8be9fd","list.hoverBackground":"#44475a75","list.inactiveSelectionBackground":"#44475a75","list.warningForeground":"#ffb86c","listFilterWidget.background":"#343746","listFilterWidget.noMatchesOutline":"#ff5555","listFilterWidget.outline":"#424450","merge.currentHeaderBackground":"#50fa7b90","merge.incomingHeaderBackground":"#bd93f990","panel.background":Ur,"panel.border":"#bd93f9","panelTitle.activeBorder":"#ff79c6","panelTitle.activeForeground":"#f8f8f2","panelTitle.inactiveForeground":"#6272a4","peekView.border":"#44475a","peekViewEditor.background":Ur,"peekViewEditor.matchHighlightBackground":"#f1fa8c80","peekViewResult.background":"#21222c","peekViewResult.fileForeground":"#f8f8f2","peekViewResult.lineForeground":"#f8f8f2","peekViewResult.matchHighlightBackground":"#f1fa8c80","peekViewResult.selectionBackground":"#44475a","peekViewResult.selectionForeground":"#f8f8f2","peekViewTitle.background":"#191a21","peekViewTitleDescription.foreground":"#6272a4","peekViewTitleLabel.foreground":"#f8f8f2","pickerGroup.border":"#bd93f9","pickerGroup.foreground":"#8be9fd","progressBar.background":"#ff79c6","selection.background":"#bd93f9","settings.checkboxBackground":"#21222c","settings.checkboxBorder":"#191a21","settings.checkboxForeground":"#f8f8f2","settings.dropdownBackground":"#21222c","settings.dropdownBorder":"#191a21","settings.dropdownForeground":"#f8f8f2","settings.headerForeground":"#f8f8f2","settings.modifiedItemIndicator":"#ffb86c","settings.numberInputBackground":"#21222c","settings.numberInputBorder":"#191a21","settings.numberInputForeground":"#f8f8f2","settings.textInputBackground":"#21222c","settings.textInputBorder":"#191a21","settings.textInputForeground":"#f8f8f2","sideBar.background":"#21222c","sideBarSectionHeader.background":Ur,"sideBarSectionHeader.border":"#191a21","sideBarTitle.foreground":"#f8f8f2","statusBar.background":"#191a21","statusBar.debuggingBackground":"#ff5555","statusBar.debuggingForeground":"#191a21","statusBar.foreground":"#f8f8f2","statusBar.noFolderBackground":"#191a21","statusBar.noFolderForeground":"#f8f8f2","statusBarItem.prominentBackground":"#ff5555","statusBarItem.prominentHoverBackground":"#ffb86c","statusBarItem.remoteBackground":"#bd93f9","statusBarItem.remoteForeground":Ur,"tab.activeBackground":Ur,"tab.activeBorderTop":"#ff79c680","tab.activeForeground":"#f8f8f2","tab.border":"#191a21","tab.inactiveBackground":"#21222c","tab.inactiveForeground":"#6272a4","terminal.ansiBlack":"#21222c","terminal.ansiBlue":"#bd93f9","terminal.ansiBrightBlack":"#6272a4","terminal.ansiBrightBlue":"#d6acff","terminal.ansiBrightCyan":"#a4ffff","terminal.ansiBrightGreen":"#69ff94","terminal.ansiBrightMagenta":"#ff92df","terminal.ansiBrightRed":"#ff6e6e","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightYellow":"#ffffa5","terminal.ansiCyan":"#8be9fd","terminal.ansiGreen":"#50fa7b","terminal.ansiMagenta":"#ff79c6","terminal.ansiRed":"#ff5555","terminal.ansiWhite":"#f8f8f2","terminal.ansiYellow":"#f1fa8c","terminal.background":Ur,"terminal.foreground":"#f8f8f2","titleBar.activeBackground":"#21222c","titleBar.activeForeground":"#f8f8f2","titleBar.inactiveBackground":"#191a21","titleBar.inactiveForeground":"#6272a4","walkThrough.embeddedEditorBackground":"#21222c"}},Hr={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\$\%\^\&\*\-\=\+\[\{\]\}\\\|\;\:\"\,\<\>\/\?\s]+)/g,comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},Vr=["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME","EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED","EXPLAIN"];var Wr=n(69601);const Qr={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],dataTypes:Wr.DJ,keywords:Wr.Hw,operators:Vr,builtinFunctions:Wr.wk,builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@operators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@dataTypes":"dataType","@default":"identifier"}}],[/[<>=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}};let $r=function(e){return e[e.Function=1]="Function",e[e.Class=5]="Class",e[e.Operator=11]="Operator",e[e.Keyword=17]="Keyword",e}({});const Yr=(e=[])=>({triggerCharacters:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz "'.split(""),provideCompletionItems(t,n){const r=t.getWordUntilPosition(n),o=t.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber,endColumn:r.startColumn}),a={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:r.startColumn,endColumn:r.endColumn},i=t.getValueInRange({startLineNumber:n.lineNumber,startColumn:r.endColumn,endLineNumber:n.lineNumber,endColumn:r.endColumn+1});if(r.word||/(FROM|INTO|TABLE) $/gim.test(o)||/'$/gim.test(o)&&!o.endsWith("= '")){const t='"'===o.substr(-1),n='"'==i;return{suggestions:e.map((e=>({label:e.table_name,kind:$r.Class,insertText:t?e.table_name+(n?"":'"'):/^[a-z0-9_]+$/i.test(e.table_name)?e.table_name:`"${e.table_name}"`,range:a})))}}}}),Kr={provideDocumentFormattingEdits(e,t){const n=L(e.getValue(),{indent:" ".repeat(t.tabSize)});return[{range:e.getFullModelRange(),text:n}]}},Xr={provideDocumentRangeFormattingEdits:(e,t,n)=>[{range:t,text:L(e.getValueInRange(t),{indent:" ".repeat(n.tabSize)})}]};var Jr=function(e){return e.EXECUTE="execute",e.FOCUS_GRID="focus_grid",e.ADD_NEW_TAB="add_new_tab",e.CLOSE_ACTIVE_TAB="close_active_tab",e.SEARCH_DOCS="search_docs",e}(Jr||{});const eo=u.ZP.div.withConfig({displayName:"QueryResult__Wrapper"})(["\n  display: flex;\n  align-items: center;\n  margin-top: 0.2rem;\n  overflow: hidden;\n  ",";\n\n  svg {\n    margin-right: 0.2rem;\n    color: ",";\n  }\n"],Q,I("foreground")),to=u.ZP.div.withConfig({displayName:"QueryResult__Details"})(["\n  display: flex;\n"]),no=u.ZP.div.withConfig({displayName:"QueryResult__DetailsColumn"})(["\n  margin-left: 1rem;\n"]),ro=(0,u.ZP)(Oe).withConfig({displayName:"QueryResult__DetailsText"})(["\n  margin-right: 0.5rem;\n"]),oo=e=>Math.round(100*(e+Number.EPSILON))/100,ao=e=>"0"===e?i.createElement(Oe,{color:"gray2"},"0"):i.createElement(Oe,{color:"orange"},e),io=e=>0===e?"0":e>1e9?`${oo(e/1e9)}s`:e>1e6?`${oo(e/1e6)}ms`:e>1e3?`${oo(e/1e3)}s`:`${e}ns`,lo=({compiler:e,count:t,execute:n,fetch:r,rowCount:o})=>i.createElement(eo,{_height:95,duration:V.FAST},i.createElement("div",null,i.createElement(Oe,{color:"gray2"},o.toLocaleString()," row",o>1?"s":""," in",io(r))),i.createElement(to,null,i.createElement(no,null,i.createElement(ro,{color:"foreground"},"Execute: ",ao(io(n))),i.createElement(ro,{color:"foreground"},"Network:",ao(io(r-n))),i.createElement(ro,{color:"foreground"},"Total:",ao(io(r)))),i.createElement(no,null,i.createElement(ro,{align:"right",color:"gray2",size:"sm"},"Count: ",io(t)),i.createElement(ro,{align:"right",color:"gray2",size:"sm"},"Compile: ",io(e))))),so=(0,u.F4)(["\n  0% {\n    background-position: left bottom;\n  }\n\n  100% {\n    background-position: right bottom;\n  }\n"]),co=u.ZP.div.withConfig({displayName:"Loader__Wrapper"})(["\n  position: fixed;\n  height: 0.4rem;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 15;\n  background: linear-gradient(\n      to left,\n      "," 30%,\n      "," 80%,\n      "," 100%\n    )\n    repeat;\n  background-size: 50% 100%;\n  animation-name: ",";\n  animation-duration: 1s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n"],I("selection"),I("foreground"),I("selection"),so),uo=({show:e})=>{const[t,n]=(0,i.useState)(!1),r=(0,i.useRef)();return(0,i.useEffect)((()=>()=>{clearTimeout(r.current)}),[]),(0,i.useEffect)((()=>{clearTimeout(r.current),e?r.current=window.setTimeout((()=>{n(!0)}),500):n(!1)}),[e]),i.createElement(i.Fragment,null,i.createElement(ot.Z,{classNames:"fade-slow",in:t&&e,timeout:V.SLOW,unmountOnExit:!0},i.createElement(co,null)))};function mo(){return mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mo.apply(this,arguments)}jr._m.config({paths:{vs:"assets/vs"}});const go=(0,u.ZP)(tt).withConfig({displayName:"Monaco__Content"})(["\n  position: relative;\n  overflow: hidden;\n\n  .monaco-scrollable-element > .scrollbar > .slider {\n    background: ",";\n  }\n\n  .cursorQueryDecoration {\n    width: 0.2rem !important;\n    background: ",";\n    margin-left: 1.2rem;\n\n    &.hasError {\n      background: ",';\n    }\n  }\n\n  .cursorQueryGlyph {\n    margin-left: 2rem;\n    z-index: 1;\n    cursor: pointer;\n\n    &:after {\n      content: "";\n      font-size: 2.5rem;\n      transform: rotate(180deg) scaleX(0.8) translateY(-2px);\n      color: ',";\n    }\n  }\n\n  .errorGlyph {\n    margin-left: 2.5rem;\n    margin-top: 0.5rem;\n    z-index: 1;\n    width: 0.75rem !important;\n    height: 0.75rem !important;\n    border-radius: 50%;\n    background: ",";\n  }\n"],I("selection"),I("green"),I("red"),I("green"),I("red")),fo=()=>{const e=an(),{editorRef:t,monacoRef:n,insertTextAtCursor:r,activeBuffer:o,updateBuffer:a,editorReadyTrigger:l,addBuffer:c}=e,{quest:d}=(0,i.useContext)(Mt),[u,m]=(0,i.useState)(),[g,f]=(0,i.useState)(!1),[p,h]=(0,i.useState)(""),E=(0,s.I0)(),y=(0,s.v9)(ur.query.getRunning),w=(0,s.v9)(ur.query.getTables),[v,C]=(0,i.useState)(),_=(0,i.useRef)([]),x=(0,i.useRef)(),S=(0,i.useRef)(),k=(e=!1)=>{E(Zn(e))},T=(e,t)=>{const n=Zt(t),r=t.getModel();if(n&&null!==r){const o=Ut(r,n.query);if(o.length>0){const r=x.current?.query===n.query,a=o.find((e=>e.range.startLineNumber===n.row+1));a&&(_.current=t.deltaDecorations(_.current,[{range:new e.Range(a.range.startLineNumber,1,a.range.endLineNumber,1),options:{isWholeLine:!0,linesDecorationsClassName:"cursorQueryDecoration "+(r?"hasError":"")}},{range:new e.Range(a.range.startLineNumber,1,a.range.startLineNumber,1),options:{isWholeLine:!1,glyphMarginClassName:"cursorQueryGlyph"}},...S.current&&a.range.startLineNumber!==S.current.startLineNumber?[{range:new e.Range(S.current.startLineNumber,0,S.current.startLineNumber,0),options:{isWholeLine:!1,glyphMarginClassName:"errorGlyph"}}]:[]]))}}};return(0,i.useEffect)((()=>{!y.value&&u&&(d.abort(),E(zn()),m(void 0))}),[u,d,E,y]),(0,i.useEffect)((()=>{if(y.value&&t?.current){n?.current&&((e,t)=>{const n=t.getModel();n&&e.editor.setModelMarkers(n,qt,[])})(n.current,t.current);const r=y.isRefresh?{query:p,row:0,column:0}:(e=t.current,zt(e)?(e=>{const t=e.getSelection(),n=zt(e);if(t&&n){let e=n.length,r=n.charAt(e);for(;e>0&&(" "===r||"\n"===r||";"===r);)e--,r=n.charAt(e);if(e>0)return{query:n.substr(0,e+1),row:t.startLineNumber-1,column:t.startColumn}}})(e):Zt(e));r?.query?(d.queryRaw(r.query,{limit:"0,1000",explain:!0}).then((e=>{m(void 0),x.current=void 0,S.current=void 0,E(zn()),E(qn(e)),n?.current&&t?.current&&T(n.current,t?.current),e.type===N.DDL&&(E(Mn({content:i.createElement(Oe,{color:"foreground",ellipsis:!0,title:e.query},e.query)})),bus.trigger(b.MSG_QUERY_SCHEMA)),e.type===N.DQL&&(h(r.query),E(Mn({jitCompiled:e.explain?.jitCompiled??!1,content:i.createElement(lo,mo({},e.timings,{rowCount:e.count})),sideContent:i.createElement(Oe,{color:"foreground",ellipsis:!0,title:e.query},e.query)})),bus.trigger(b.MSG_QUERY_DATASET,e))})).catch((e=>{if(x.current=e,m(void 0),E(zn()),E(Mn({content:i.createElement(Oe,{color:"red"},e.error),sideContent:i.createElement(Oe,{color:"foreground",ellipsis:!0,title:r.query},r.query),type:Ln.ERROR})),t?.current&&n?.current){const o=((e,t,n)=>{const r=((e,t)=>{const n=Math.min(t,e.query.length);let r=0,o=0;for(let t=0;t<n;t++)"\n"===e.query.charAt(t)?(r++,o=0):o++;return{lineNumber:r+1+e.row,column:(0===r?o+e.column:o)+1}})(t,n),o=e.getModel();if(o){const t=e.getSelection(),n=zt(e);let a;if(a=t&&n?o.getWordAtPosition({column:t.startColumn+r.column,lineNumber:r.lineNumber}):o.getWordAtPosition(r),a)return{startColumn:a.startColumn,endColumn:a.endColumn,startLineNumber:r.lineNumber,endLineNumber:r.lineNumber}}return null})(t.current,r,e.position);S.current=o??void 0,o&&(((e,t,n,r)=>{const o=t.getModel();o&&e.editor.setModelMarkers(o,qt,[{message:r,severity:e.MarkerSeverity.Error,startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}])})(n?.current,t.current,o,e.error),T(n?.current,t?.current))}})),m(r)):E(zn())}var e}),[d,E,y]),(0,i.useEffect)((()=>{g&&n?.current&&(v?.dispose(),C(n.current.languages.registerCompletionItemProvider(qt,Yr(w))))}),[w,n,g]),i.createElement(go,{onClick:e=>{e.target.classList.contains("cursorQueryGlyph")&&(t?.current?.focus(),k())}},i.createElement(jr.ZP,{beforeMount:e=>{(e=>{e.languages.register({id:qt}),e.languages.setMonarchTokensProvider(qt,Qr),e.languages.setLanguageConfiguration(qt,Hr),e.languages.registerCompletionItemProvider(qt,{provideCompletionItems(e,t){const n=e.getWordUntilPosition(t),r={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn};return{suggestions:[...Wr.wk.map((e=>({label:e,kind:$r.Function,insertText:e,range:r}))),...Wr.DJ.map((e=>({label:e,kind:$r.Keyword,insertText:e,range:r}))),...Wr.Hw.map((e=>{const t=e.toUpperCase();return{label:t,kind:$r.Keyword,insertText:t,range:r}})),...Vr.map((e=>{const t=e.toUpperCase();return{label:t,kind:$r.Operator,insertText:t.toUpperCase(),range:r}}))]}}}),e.languages.registerDocumentFormattingEditProvider(qt,Kr),e.languages.registerDocumentRangeFormattingEditProvider(qt,Xr)})(e),C(e.languages.registerCompletionItemProvider(qt,Yr(w))),e.editor.defineTheme("dracula",Gr)},defaultLanguage:qt,onMount:(a,i)=>{n.current=i,t.current=a,i.editor.setTheme("dracula"),a.setModel(i.editor.createModel(o.value,qt)),f(!0),l(a),(({editor:e,insertTextAtCursor:t,toggleRunning:n})=>{window.bus.on(b.MSG_EDITOR_INSERT_COLUMN,((e,n)=>{t(n)})),window.bus.on(b.MSG_QUERY_FIND_N_EXEC,((t,{query:r,options:o})=>{jt(e,`${r};`,o),n()})),window.bus.on(b.MSG_QUERY_EXEC,(()=>{n(!0)})),window.bus.on(b.MSG_QUERY_EXPORT,((e,t)=>{t&&(window.location.href=`/exp?query=${encodeURIComponent(t.q)}`)})),window.bus.on(b.MSG_EDITOR_FOCUS,(()=>{const t=e.getPosition();t&&e.setPosition({lineNumber:t.lineNumber+1,column:t?.column}),e.focus()}))})({editor:a,insertTextAtCursor:r,toggleRunning:k}),(({editor:e,monaco:t,toggleRunning:n,dispatch:r,editorContext:o})=>{e.addAction({id:Jr.FOCUS_GRID,label:"Focus Grid",keybindings:[t.KeyCode.F2],run:()=>{window.bus.trigger(b.GRID_FOCUS)}}),e.addAction({id:Jr.EXECUTE,label:"Execute command",keybindings:[t.KeyCode.F9,t.KeyMod.CtrlCmd|t.KeyCode.Enter],run:()=>{n()}}),e.addAction({id:Jr.ADD_NEW_TAB,label:"Add new tab",keybindings:[t.KeyMod.Alt|t.KeyCode.KeyT],run:()=>{o.addBuffer()}}),e.addAction({id:Jr.CLOSE_ACTIVE_TAB,label:"Close current tab",keybindings:[t.KeyMod.Alt|t.KeyCode.KeyW],run:async()=>{const e=await Jt(),t=await en();e.length>1&&t?.value&&"number"==typeof t?.value&&o.deleteBuffer(t.value)}}),e.addAction({id:Jr.SEARCH_DOCS,label:"Search QuestDB Docs",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KeyK],run:()=>{const e=document.querySelector(".DocSearch-Button");e&&e.click()}})})({editor:a,monaco:i,toggleRunning:k,dispatch:E,editorContext:e}),a.onDidChangeCursorPosition((()=>{T(i,a)}));const s=new URLSearchParams(window.location.search),c=s.get("query"),d=a.getModel();if(c&&d){const e=Ut(d,c);e&&e.length>0?a.setSelection(e[0].range):jt(a,c,{appendAt:"end"})}s.get("executeQuery")&&k()},saveViewState:!1,onChange:e=>{a(o.id,{value:e})},options:{model:null,fixedOverflowWidgets:!0,fontSize:14,fontFamily:ct.fontMonospace,glyphMargin:!0,renderLineHighlight:"gutter",minimap:{enabled:!1},selectOnLineNumbers:!1,scrollBeyondLastLine:!1,tabSize:2},theme:"vs-dark"}),i.createElement(uo,{show:!!u||!w}))};var po=n(33298),ho=n(55449),bo=n(25345),Eo=n(88849),yo=n(65742);const wo=u.ZP.div.withConfig({displayName:"styles__Wrapper"})(["\n  display: flex;\n  align-items: center;\n  border-right: none;\n  width: 100%;\n  height: ",";\n  ","\n  \n  padding: 0 1rem;\n\n  ",";\n"],(({isMinimized:e})=>e?"auto":"4.5rem"),(({isMinimized:e})=>!e&&`\n    border-bottom: 1px ${I("backgroundDarker")} solid;\n  `),$),vo=u.ZP.div.withConfig({displayName:"styles__Content"})(["\n  display: flex;\n  margin-left: 0.5rem;\n  white-space: nowrap;\n"]),Co=u.ZP.div.withConfig({displayName:"styles__SideContent"})(["\n  margin-left: auto;\n  padding-left: 1rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);var _o=n(38463),xo=n(35030),So=n(59913);const ko=(0,u.ZP)(Oe).withConfig({displayName:"Timestamp__TimestampText"})(["\n  display: flex;\n  margin-right: 0.5rem;\n  white-space: nowrap;\n"]),No=({createdAt:e})=>{const t=(0,i.useMemo)(D,[]);return i.createElement(ko,{color:"gray2"},"[",(0,So.Z)(e,"pppp",{locale:H(t)}),"]")},To=(0,u.ZP)(_o.W).withConfig({displayName:"SuccessNotification__CheckmarkOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],I("green")),Oo=(0,u.ZP)(xo.i).withConfig({displayName:"SuccessNotification__ZapIcon"})(["\n  color: ",";\n"],I("yellow")),Ro=e=>{const{createdAt:t,content:n,sideContent:r,jitCompiled:o,isMinimized:a}=e;return i.createElement(wo,{isMinimized:a},i.createElement(No,{createdAt:t}),o?i.createElement(We,{icon:i.createElement(Oo,{size:"16px"}),placement:"top",tooltip:"JIT Compiled"}):i.createElement(To,{size:"18px"}),i.createElement(vo,null,n),i.createElement(Co,null,r))};var Io=n(32184);const Po=(0,u.ZP)(Io.e).withConfig({displayName:"ErrorNotification__CloseOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],I("red")),Lo=e=>{const{createdAt:t,content:n,sideContent:r,isMinimized:o}=e;return i.createElement(wo,{isMinimized:o},i.createElement(No,{createdAt:t}),i.createElement(Po,{size:"18px"}),i.createElement(vo,null,n),i.createElement(Co,null,r))},Ao=e=>{const{createdAt:t,content:n,sideContent:r,isMinimized:o}=e;return i.createElement(wo,{isMinimized:o},i.createElement(No,{createdAt:t}),i.createElement(vo,null,n),i.createElement(Co,null,r))},Bo=e=>{const{type:t}=e;return t===Ln.SUCCESS?i.createElement(Ro,e):t===Ln.ERROR?i.createElement(Lo,e):i.createElement(Ao,e)};function Do(){return Do=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Do.apply(this,arguments)}const Mo=(0,u.ZP)(nt).withConfig({displayName:"Notifications__Wrapper"})(["\n  flex: ",";\n  overflow: auto;\n  max-height: 35rem;\n  ","\n  background: ",";\n"],(e=>e.minimized?"initial":"1"),(({theme:e})=>`border-top: 2px ${e.color.backgroundDarker} solid;`),(({theme:e})=>e.color.backgroundLighter)),Fo=(0,u.ZP)(xe).withConfig({displayName:"Notifications__Menu"})(["\n  justify-content: space-between;\n"]),qo=(0,u.ZP)(tt).withConfig({displayName:"Notifications__Content"})(["\n  overflow: ",";\n  padding: ",";\n  flex: initial;\n  height: ",";\n"],(e=>e.minimized?"hidden":"auto"),(e=>e.minimized?"0":"0 0 1rem"),(e=>e.minimized?"4rem":"100%")),zo=(0,u.ZP)(Oe).withConfig({displayName:"Notifications__Header"})(["\n  display: flex;\n  align-items: center;\n"]),Zo=u.ZP.div.withConfig({displayName:"Notifications__LatestNotification"})(["\n  margin-left: 1rem;\n  flex: 1;\n"]),jo=(0,u.ZP)(ho.T).withConfig({displayName:"Notifications__TerminalBoxIcon"})(["\n  margin-right: 1rem;\n"]),Uo=u.ZP.div.withConfig({displayName:"Notifications__ClearAllNotifications"})(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  margin-top: auto;\n"]),Go=()=>{const e=(0,s.v9)(ur.query.getNotifications),{sm:t}=He(),[n,r]=(0,i.useState)(!0),o=(0,i.useRef)(null),a=(0,s.I0)(),l=()=>{o.current?.scrollTo({top:o.current?.scrollHeight})},c=(0,i.useCallback)((()=>{r(!n)}),[n]),d=(0,i.useCallback)((()=>{a(Fn())}),[a]);(0,i.useLayoutEffect)((()=>{e.length>0&&l()}),[e]),(0,i.useLayoutEffect)((()=>{l()}),[n]),(0,i.useEffect)((()=>{t&&r(!0)}),[t]);const u=e[e.length-1];return i.createElement(Mo,{minimized:n,"data-hook":"notifications-wrapper"},i.createElement(Fo,null,i.createElement(zo,{color:"foreground"},i.createElement(jo,{size:"18px"}),"Log"),i.createElement(Zo,{"data-hook":"notifications-collapsed"},n&&u&&i.createElement(Bo,Do({isMinimized:!0},u))),i.createElement(yo.z,{skin:"transparent",onClick:c},n?i.createElement(bo.f,{size:"18px"}):i.createElement(Eo.I,{size:"18px"}))),!n&&i.createElement(qo,{minimized:n,ref:o},i.createElement(po.Z,{"data-hook":"notifications-expanded"},e.map((e=>i.createElement(Bo,Do({isMinimized:!1,key:e.createdAt?e.createdAt.getTime():0},e))))),!n&&i.createElement(Uo,null,i.createElement(yo.z,{skin:"secondary",disabled:0===e.length,onClick:d},"Clear all"))))};function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ho.apply(this,arguments)}const Vo=(0,u.ZP)(nt).withConfig({displayName:"Editor__EditorPaneWrapper"})(["\n  height: 100%;\n  overflow: hidden;\n"]),Wo=({innerRef:e,...t})=>i.createElement(Vo,Ho({ref:e},t),i.createElement(fo,null),i.createElement(Go,null)),Qo=(e,t)=>i.createElement(Wo,Ho({},e,{innerRef:t})),$o=(0,i.forwardRef)(Qo);var Yo=n(99925),Ko=n(83676),Xo=n(2345),Jo=n(95195),ea=n(22100);function ta(e,t,n){const r={gridID:"qdb-grid",minColumnWidth:60,rowHeight:30,divCacheSize:64,viewportHeight:400,yMaxThreshold:1e7,maxRowsToAnalyze:100,minVpHeight:120,minDivHeight:160,scrollerGirth:10,dragHandleWidth:20,dataPageSize:1e3,layoutStoreTimeout:1e3},o="qg-c-active",a=0,i=3,l=4,s=(n||r.gridID)+".columnLayout",c=e,d=t;let u,m,g,f,p,h,b,E,y,w,v,C,_,x,S,k,N,T,O,R,I,P=0,L=[],A=[],B=[],D=0,M=-1,F=-1,q=[],z=-1,Z=!1;const j=r.divCacheSize,U=j-1,G=r.dataPageSize,H=Math.floor(G/3),V=2*H;let W,Q,$,Y,K=[],X=0,J=10,ee=0,te=0,ne=0,re=r.viewportHeight;const oe=r.rowHeight;let ae,ie,le,se,ce,de,ue,me,ge,fe,pe=[],he=-1,be=-1;const Ee={colLo:0,colHi:0,nextVisColumnLo:0,render:!1},ye=r.scrollerGirth;let we,ve,Ce,_e,xe,Se,ke,Ne,Te,Oe,Re,Ie=0,Pe=!0,Le=!1,Ae={};function Be(e){return A[B[e]]}function De(){const e=be;let t=0;P>0&&(t=P,P<=e&&(P=0,E.innerHTML="",an()));const n=Ve(e);for(let t=e;t>0;t--)R[t]=R[t-1]+n;R[0]=0;const r=e+1;for(let t=e;t>=0;t--){const e=g.childNodes[t].querySelector(".qg-col-resize-hysteresis");e&&(e.columnIndex=(e.columnIndex+1)%r)}-1!==M&&M<r&&(M=(M+1)%r),g.childNodes[0].before(g.childNodes[e]);const o=B[e];for(let t=e;t>0;t--)B[t]=B[t-1];B[0]=o,t>0&&(t<=e?sn(t+1):(E.childNodes[0].before(E.childNodes[e]),Ct(L,0,Math.min(P,D),X))),ee=0,Ct(pe,0,J,0),u.scrollLeft>0?u.scrollLeft=0:Bt(),xt(e),function(e){const t=rt();t.columnPositions=B,t.timestampIndex=M;for(let n=0;n<e;n++)t.deviants[Be(n).name]=Ve(n);nt()}(r)}function Me(e,t,n,r){if(e.rowIndex!==t){const o=q[Math.floor(t/G)];if(o){const a=o[t%G];if(a){e.style.display="flex";for(let t=n;t<r;t++)yt(e.childNodes[t%J],a[B[t]]);e.rowIndex=t}else e.style.display="none",e.rowIndex=-1}else{for(let t=n;t<r;t++)e.childNodes[t%J].innerHTML="";e.rowIndex=-1}e.style.top=t*oe-ue+"px"}}function Fe(e){u.scrollTop=e,h.scrollTop=e}function qe(){const e=Math.max(X,P),t=Math.min(e+J,D);Ct(pe,e,t,X)}function ze(e){return null===q[e]||void 0===q[e]||0===q[e].length}function Ze(e,t){e.style.minWidth=t+"px",e.style.maxWidth=t+"px"}function je(e,t){Y&&clearTimeout(Y),Y=setTimeout((function(){!function(e,t){let n,r,o;if(function(){for(let e=0,t=q.length;e<t;e++)(e<W||e>Q)&&q[e]&&delete q[e]}(),e!==t&&ze(e)&&ze(t))n=e*G,r=n+G*(t-e+1),o=function(n){q[e]=n.dataset.splice(0,G),q[t]=n.dataset,qe()};else if(!ze(e)||ze(t)&&e!==t){if(ze(e)&&e!==t||!ze(t))return void qe();n=t*G,r=n+G,o=function(e){q[t]=e.dataset,qe()}}else n=e*G,r=n+G,o=function(t){q[e]=t.dataset,qe()};d&&d($,n+1,r,o)}(e,t)}),75)}function Ue(){return{t:Math.max(0,Math.floor(le/oe)),b:Math.min(ie/oe,Math.ceil((le+re)/oe))}}function Ge(e){const t=Ue();let n=t.t,r=t.b;0!==e&&function(e,t,n){if(t!=t||n!=n)return;let r,o,a,i;if(r=Math.floor(t/G),a=Math.floor(n/G),e>0){if(i=n%G,r>=W&&a<Q)return;if(a===Q)return void(i>V&&(Q=a+1,W=a,je(a,a+1)));r<a?(je(r,a),W=r,Q=a):i>V?(je(a,a+1),W=a,Q=a+1):(Q=r,W=r,je(r,r))}else{if(o=t%G,r>W&&a<=Q)return;if(r===W)return void(o<H&&W>0&&(W=Math.max(0,r-1),Q=r,je(r-1,r)));r<a?(je(r,a),W=r,Q=a):o<H&&r>0?(je(r-1,r),W=Math.max(0,r-1),Q=r):(W=r,Q=r,je(r,r))}}(e,n,r),0===n?r=j:r>ae-2&&(n=Math.max(0,r-j));for(let e=n;e<r;e++){const t=pe[e&U];t&&(Me(t,e,Math.min(D,Math.max(X,P)),J),Me(L[e&U],e,0,Math.min(P,D)))}}function He(e){return R[e]}function Ve(e){return R[e+1]-R[e]}function We(e){const t=Be(e);if(t)switch(t.type){case"STRING":case"SYMBOL":return!0;default:return!1}}function Qe(e){_e||cn("header.click",{columnName:e.currentTarget.getAttribute("data-column-name")})}function $e(){ke&&(clearTimeout(ke),ke=void 0)}function Ye(e,t){return ve+e-(t<P?0:u.scrollLeft)+"px"}function Ke(e){if(0===e.target.childNodes.length){e.preventDefault();const t=document.createElement("div");t.baguette=!0,pt(t,"qg-col-resize-hysteresis-enter"),e.target.append(t)}}function Xe(e){e.preventDefault(),e.target.childNodes.length>0&&e.target.childNodes[0].remove()}function Je(e){e.preventDefault(),$e();const t=e.target.baguette?e.target.parentElement:e.target;e.target.childNodes.length>0&&e.target.childNodes[0].remove(),_e=t.columnIndex,xe=He(_e),Se=Ve(_e);const n=t.parentElement;ve=n.offsetLeft+n.getBoundingClientRect().width,Ce=e.clientX,document.onmousemove=et,document.onmouseup=ot,O.style.top=0,O.style.left=Ye(0,_e),O.style.height=c.getBoundingClientRect().height-(Nt()?ye:0)+"px",O.style.visibility="visible",Ie=Se}function et(e){e.preventDefault();const t=e.clientX-Ce,n=Se+t;n>r.minColumnWidth&&(O.style.left=Ye(t,_e),Ie=n)}function tt(){window.localStorage.setItem(s,JSON.stringify(Ae))}function nt(){Oe&&clearTimeout(Oe),Oe=setTimeout(tt,r.layoutStoreTimeout)}function rt(){let e=Ae[Te];return void 0===e&&(e={key:Ne,deviants:{}},Ae[Te]=e),e}function ot(e){var t,n;e.preventDefault(),document.onmousemove=null,document.onmouseup=null,function(e,t){!function(e,t){let n=R[e]+t;for(let t=e+1;t<=D;t++){const e=Ve(t);R[t]=n,n+=e}z=R[D]}(e,t),e<P&&(Ze(E.childNodes[e],t),Ct(L,0,Math.min(P,D),X),Ft(),nn()),Ze(g.childNodes[e],t),Mt(),Ct(pe,X,X+J,X),Bt()}(_e,Ie),O.style.visibility="hidden",O.style.left=0,ke=setTimeout((()=>{_e=void 0}),500),t=Be(_e).name,n=Ie,rt().deviants[t]=n,nt()}function at(e){return Math.max(r.minColumnWidth,Math.ceil(8*e*1.2))}function it(e){S||(e.preventDefault(),C.style.left=p+"px",C.style.display="block",C.style.height=re-(Nt()?ye:0)+"px",_.style.height=C.style.height,N=e.offsetY-x.getBoundingClientRect().height/2,S=e.pageY,x.style.top=N+"px")}function lt(e){const t=e.relatedTarget;t===x||t===C||t===v||k||(e.preventDefault(),C.style.display="none",S=void 0)}function st(e){const t=e.pageX-k,n=p+t;C.style.left=n+"px",w=P;let r=n;for(let e=0;e<D;e++){const t=Ve(e);if(r-=t,r<0){w=-r/t<.5?e+1:e;break}}w>P&&u.scrollLeft>0&&(w=P),_.style.left=He(w)+"px",_.style.display="block",ut(e)}function ct(){document.onmousemove=void 0,document.onmouseup=void 0,C.style.display="none",_.style.display="none",S=void 0,k=void 0,c.style.cursor=null,x.style.cursor=null,T.style.cursor=null,sn(w)}function dt(e){e.preventDefault(),k=e.pageX,document.onmousemove=st,document.onmouseup=ct,c.style.cursor="grabbing",x.style.cursor="grabbing",T.style.cursor="grabbing"}function ut(e){if(S){e.preventDefault();const t=e.pageY-S;x.style.top=Math.min(re-x.getBoundingClientRect().height-(Nt()?ye:0),Math.max(0,N+t))+"px"}}function mt(e,t,n,r){for(let r=t,o=t+n;r<o;r++){const t=Be(r),n=document.createElement("div");pt(n,"qg-header"),Ze(n,Ve(r)),n.setAttribute("data-column-name",t.name),We(r)&&pt(n,"qg-header-l");const o=document.createElement("span");pt(o,"qg-header-type"),o.innerHTML=t.type.toLowerCase();const a=document.createElement("span");pt(a,"qg-header-name"),a.innerHTML=t.name;const i=document.createElement("div");pt(i,"qg-col-resize-hysteresis"),i.columnIndex=r,i.onmousedown=Je,i.onmouseenter=Ke,i.onmouseleave=Xe;const l=document.createElement("span");pt(l,"qg-header-border"),n.append(i,l),n.append(a,o),n.onclick=Qe,e.append(n)}if(r){const t=document.createElement("div");return t.className="qg-header qg-stub",t.style.width=ye+"px",e.append(t),t}return null}function gt(){R=[],z=0;for(let e=0;e<D;e++){const t=Be(e),n=at(t.name.length+t.type.length);R.push(z),z+=n}R.push(z)}function ft(e,t){e.classList.remove(t)}function pt(e,t){e&&e.classList.add(t)}function ht(e){ft(e,o)}function bt(){pt(ge,o)}function Et(e){!e||ge===e&&e.classList.contains(o)||(ge&&ht(ge),ge=e,be=e.columnIndex,bt())}function yt(e,t){null!==t?(e.innerHTML=(e=>{const t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[<>"']/g,(e=>t[e]))})(t.toString()),e.classList.remove("qg-null")):(e.innerHTML="null",e.classList.add("qg-null"))}function wt(e,t,n){const r=e.childNodes[n%J];$t(r,n),yt(r,t[B[n]])}function vt(e){return Math.max(P,e)}function Ct(e,t,n,r){if(e.length>0&&D>0&&t<n){Ee.colLo=t,Ee.colHi=n,Ee.nextVisColumnLo=r,Ee.render=!1;const o=Ue();let a=o.t,i=o.b;a-=a&U,i=i-(i&U)+j;for(let r=a;r<i;r++){const o=e[r&U];o.style.width=z+"px";const a=Math.floor(r/G),i=r%G;let l,s;if(a<q.length&&(l=q[a])&&i<l.length&&(s=l[i]))for(let e=t;e<n;e++)wt(o,s,e);else Ee.render=!0}X=Math.max(0,Math.min(r,D-J)),Kt()}}function _t(e){const t=u.scrollLeft;u.scrollLeft=e,g.scrollLeft=e,t===u.scrollLeft&&bt()}function xt(e){if(-1!==e){be=e;const t=be<P?y.childNodes[be]:me.childNodes[be%J];t.columnIndex=be,Et(t)}}function St(e){e===i&&X>0&&D>J?Ct(pe,P,J,0):e===l&&X+J<D&&Ct(pe,vt(D-J),D,D-J);const t=He(be),n=Ve(be);if(e!==a&&(be>=P||e===i)){const e=Math.max(0,t-p);if(e<u.scrollLeft)_t(e);else if(e>u.scrollLeft){const e=t+n;e>u.scrollLeft+u.clientWidth&&_t(e-u.clientWidth)}}xt(be)}function kt(e){if(he>0){he=Math.max(0,he-e),Rt(),At(),Ot(),St(a);const t=he*oe-ue-5;t<u.scrollTop&&Fe(Math.max(0,t))}}function Nt(){return u.scrollWidth>ne}function Tt(e){const t=e[he&U];return t.className="qg-r qg-r-active",t}function Ot(){me=Tt(pe),y=Tt(L)}function Rt(){me&&(me.className="qg-r"),y&&(y.className="qg-r")}function It(e){if(he>-1&&he<ae-1){he=Math.min(ae-1,he+e),Rt(),At(),Ot(),St(a);const t=Math.min(he*oe+oe-ue,u.scrollHeight)-re,n=Nt()?ye:0;t>u.scrollTop&&Fe(t+n)}}function Pt(){const e=ee+te,t=ee,n=u.scrollLeft,r=u.getBoundingClientRect().width;if(R)if(n+r>e){let t=-1,r=ee;for(let e=X,o=J+X;e<o;e++)if(r+=Ve(e),r>n){t=e;break}if(t>X)Ct(pe,vt(J+X),Math.min(J+t,D),t);else if(-1===t){let t=e,r=J+X;for(;t<n;)t+=Ve(++r);Ct(pe,vt(r),Math.min(J+r,D),r)}}else if(t>n){let e=X,t=ee;for(;t>n&&e>0;)t-=Ve(--e);const r=Math.min(J,X-e);Ct(pe,vt(e),Math.min(r+e,D),e)}}function Lt(){Pe||(pt(c,"qg-hover"),Pe=!0)}function At(){Pe&&(ft(c,"qg-hover"),Pe=!1)}function Bt(e){const t=u.scrollLeft,n=u.scrollTop;if(g.scrollLeft!==t&&(g.scrollLeft=t),P>0&&(t>0?pt(f,"qg-panel-scrolled-left"):ft(f,"qg-panel-scrolled-left")),n>0?(pt(g,"qg-panel-scrolled-top"),pt(E,"qg-panel-scrolled-top")):(ft(g,"qg-panel-scrolled-top"),ft(E,"qg-panel-scrolled-top")),Pt(),n!==ce||!e){const e=le;n>=se-re?(le=Math.max(0,ie-re),ce=n,ue=Math.max(0,le-ce),It(ae-he)):(0===n&&ce>0?(le=0,ue=0,kt(he)):le+=n-ce,ce=n),Ge(le-e)}qt(),bt()}function Dt(){const e=u.getBoundingClientRect().width;if(Z=0===e,!Z)if(z<e)J=D,X=0,Kt();else{let t=0,n=0,r=0,o=0;for(;n<D;){const a=Ve(n);r+a>e?(o<n-t+1&&(o=n-t+1),r-=Ve(t),t++):(r+=a,n++)}o=Math.max(o,n-t+1),J=Math.min(o,D);const a=X+J-D;a>0&&X>=a&&(X-=a,Kt())}}function Mt(){we&&(Nt()&&Math.abs(u.scrollHeight-u.getBoundingClientRect().height)>.8?ft(we,"qg-stub-transparent"):pt(we,"qg-stub-transparent"));const e=J;Dt(),e<J?function(e){for(let t=0,n=pe.length;t<n;t++){const n=pe[t];for(let t=0;t<e;t++){const e=document.createElement("div");e.className="qg-c",n.append(e)}for(let e=0;e<J;e++)$t(n.childNodes[e],X+e)}Ct(pe,vt(X),X+J,X)}(J-e):e>J&&function(e){for(let t=0,n=pe.length;t<n;t++){const n=pe[t];for(let t=J;t<e;t++)n.childNodes[J].remove()}Ct(pe,vt(X),X+J,X)}(e)}function Ft(){let e=0;const t=Math.min(P,D);for(let n=0;n<t;n++)e+=Ve(n);p=e}function qt(){const e=u.clientHeight+g.clientHeight;f.style.height=e+"px",h.style.height=u.clientHeight+"px",h.scrollTop=u.scrollTop}function zt(){u.scrollTop=h.scrollTop}function Zt(){if(0===q.length||0===q[W].length)return Pt(),void Ge(0);if(Le&&(Le=!1,function(){Xt();for(let e=0;e<P;e++)Ze(E.childNodes[e],Ve(e));for(let e=0,t=D-P;e<t;e++)Ze(g.childNodes[e],Ve(e+P))}()),Z&&(tn(),rn()),qt(),"none"!==c.style.display){re=Math.max(u.getBoundingClientRect().height,r.minVpHeight),fe=Math.floor(re/oe);const e=u.getBoundingClientRect().width;ne!==e&&(ne=e,Mt()),Bt()}}function jt(){Rt(),this.focus(),he=this.parentElement.rowIndex,Ot(),Et(this)}function Ut(e){e.preventDefault();const t=e.target;if(t&&!k){const e=t.parentElement.rowIndex&U;pt(pe[e],"qg-r-hover"),pt(L[e],"qg-r-hover")}}function Gt(e){e.preventDefault();const t=e.target;if(t&&!k){const e=t.parentElement.rowIndex&U;ft(pe[e],"qg-r-hover"),ft(L[e],"qg-r-hover")}}function Ht(e){delete K["which"in e?e.which:e.keyCode]}function Vt(){Ae[Te]=void 0,nt(),ln(0),E.innerHTML="",an(),en(),M=F,g.innerHTML="",gt(),Xt(),p=0,we=mt(g,0,D,!0),Mt(),Ft(),nn(),Ct(pe,vt(X),X+J,X),Ct(L,0,P,X),u.scrollLeft=0,Jt()}function Wt(){return K[17]||K[91]}function Qt(e){const t="which"in e?e.which:e.keyCode;let n=!0;switch(t){case 33:kt(fe);break;case 38:K[91]?kt(he):kt(1);break;case 40:K[91]?It(ae-he):It(1);break;case 34:It(fe);break;case 39:be>-1&&be<D-1&&(At(),be++,St(2));break;case 37:be>0&&(At(),be--,St(1));break;case 35:K[17]?It(ae-he):be>-1&&be!==D-1&&(At(),be=D-1,St(l));break;case 36:K[17]?kt(he):(be>0||u.scrollLeft>0)&&(At(),be=0,St(i));break;case 113:ge&&ht(ge),cn("yield.focus");break;case 67:case 45:Wt()&&ge&&(Re&&clearTimeout(Re),pt(ge,"qg-c-active-pulse"),navigator.clipboard.writeText(ge.innerHTML).then(void 0),Re=setTimeout((()=>{ft(ge,"qg-c-active-pulse")}),1e3));break;case 66:Wt()&&Vt();break;case 191:De();break;default:K[t]=!0,n=!1}n&&e.preventDefault()}function $t(e,t){const n=He(t);e.style.left=n+"px",e.style.width=He(t+1)-n+"px",e.style.height=r.rowHeight+"px",e.style.textAlign=We(t)?"left":"right",e.onclick=jt,e.onmouseenter=Ut,e.onmouseleave=Gt,e.classList.contains("qg-timestamp")&&ft(e,"qg-timestamp"),e.columnIndex===D-1&&ft(e,"qg-last-col"),e.columnIndex=t,t===M&&pt(e,"qg-timestamp"),e.columnIndex===D-1&&pt(e,"qg-last-col")}function Yt(e,t,n,r){for(let o=0;o<j;o++){const a=document.createElement("div");a.className="qg-r",a.tabIndex=o+o;for(let e=0;e<n;e++){const t=document.createElement("div");t.className="qg-c",$t(t,e),a.append(t),0===o&&0===e&&Et(t)}a.style.top="-100",a.style.height=oe.toString()+"px",a.style.width=r+"px",t.push(a),e.append(a)}}function Kt(){if(Z)return;let e=0;for(let t=0;t<X;t++)e+=Ve(t);let t=0;for(let e=X,n=X+J;e<n;e++)t+=Ve(e);ee=e,te=t}function Xt(){const e=.8*u.getBoundingClientRect().width;if(Le=e<.1,!Le&&q&&q.length>0){const t=Ae[Te],n=void 0!==t?t.deviants:void 0,r=q[0],o=r.length;ln(void 0!==t?t.freezeLeft:0);let a=0;for(let t=0;t<D;t++){let i;if(n&&(i=n[Be(t).name]),void 0===i){i=Ve(t);for(let n=0;n<o;n++){R[t]=a;const o=r[n][t],l=null!==o?o.toString():"null";i=Math.min(e,Math.max(i,at(l.length)))}}else R[t]=a;a+=i}R[D]=a,z=a}}function Jt(){xt(0),me.focus()}function en(){B=[];for(let e=0;e<D;e++)B.push(e)}function tn(){Dt(),Kt()}function nn(){f.style.width=p+"px"}function rn(){if(Z)return;const e=Ae[Te];e&&e.columnPositions&&(B=e.columnPositions,M=e.timestampIndex),Xt(),Ft(),we=mt(g,0,D,!0),P>0?(mt(E,0,Math.min(P,D),!1),on()):an(),nn(),Yt(m,pe,J,z),Yt(b,L,Math.min(P,D),p),function(){ae=I,ie=ae*oe,se=ie<r.yMaxThreshold?ie:r.yMaxThreshold,de=ie/se;const e=(0===se?1:se)+"px";m.style.height=e,b.style.height=e}(),Fe(0),Zt(),he=0,me=pe[he],y=L[he],Jt()}function on(){f.style.display="block",T.style.display="none",h.scrollTop=u.scrollTop}function an(){f.style.display="none",T.style.display="block";for(let e=0,t=L.length;e<t;e++)L[e].innerHTML=""}function ln(e){P=void 0!==e?e:0,cn("freeze.state",{freezeLeft:P})}function sn(e){if(void 0!==e&&e!==P){if(e<P){for(let t=0,n=L.length;t<n;t++){const n=L[t];for(let t=e;t<P;t++)n.childNodes[e].remove()}for(let t=e;t<P;t++)E.childNodes[e].remove();0===e&&an()}else{for(let t=0,n=L.length;t<n;t++){const n=L[t];for(let t=P;t<e;t++){const e=document.createElement("div");e.className="qg-c",$t(e,t),n.append(e)}}mt(E,P,e-P,!1),on()}ln(e),rt().freezeLeft=P,nt(),Ct(L,0,Math.min(P,D),X),Ft(),nn(),Ct(pe,vt(X),X+J,X)}}function cn(e,t){c.dispatchEvent(new CustomEvent(e,{detail:t}))}return function(){g=document.createElement("div"),pt(g,"qg-header-row"),u=document.createElement("div"),u.onscroll=Bt,pt(u,"qg-viewport"),m=document.createElement("div"),m.className="qg-canvas",m.onkeydown=Qt,m.onkeyup=Ht,O=document.createElement("div"),O.className="qg-col-resize-ghost",u.append(m,O),f=document.createElement("div"),pt(f,"qg-panel-left"),E=document.createElement("div"),pt(E,"qg-header-left-row"),h=document.createElement("div"),h.onscroll=zt,pt(h,"qg-viewport-left"),b=document.createElement("div"),b.className="qg-canvas",b.onkeydown=Qt,b.onkeyup=Ht,h.append(b),v=document.createElement("div"),pt(v,"qg-panel-left-hysteresis"),v.onmouseenter=it,v.onmouseleave=lt,v.onmousemove=ut,v.onmousedown=dt,C=document.createElement("div"),pt(C,"qg-panel-left-ghost"),C.onmousemove=ut,C.onmouseleave=lt,x=document.createElement("div"),pt(x,"qg-panel-left-ghost-handle"),x.onmouseleave=lt,x.onmousedown=dt,C.append(x),f.append(E,h,v),_=document.createElement("div"),pt(_,"qg-panel-left-snap-ghost"),T=document.createElement("div"),pt(T,"qg-panel-left-initial-hysteresis"),T.onmouseenter=it,T.onmouseleave=lt,T.onmousemove=ut,T.onmousedown=dt,c.append(g,u,f,C,_,T),c.onmousemove=Lt,c.style.position="relative";const e=window.localStorage.getItem(s);e&&(Ae=JSON.parse(e)),new ResizeObserver((function(){c.getBoundingClientRect().height>0&&c.getBoundingClientRect().width>0&&Zt()})).observe(c)}(),Zt(),{clearCustomLayout:function(){Vt()},shuffleFocusedColumnToFront:function(){De()},toggleFreezeLeft:function(){sn(P>0?0:1),xt(be)},show:function(){c.style.display="flex",Zt()},hide:function(){c.style.display="none"},focus:function(){ge&&me&&(Et(ge),me.focus())},setData:function(e){!function(e){setTimeout((()=>{(function(e){ce=0,le=0,ue=0,ae=0,g.innerHTML="",E.innerHTML="",m.innerHTML="",b.innerHTML="",pe=[],L=[],q=[],$=null,W=0,Q=0,K=[],D=0,I=0,me=null,y=null,ge=null,be=-1,X=0,J=10,ne=0,M=-1,F=-1,he=-1,Le=!1,_e=void 0,$e(),Ne=void 0,Te=void 0,p=0,Z=!1,ln(0),Lt(),$=e.query,q.push(e.dataset),A=e.columns,D=A.length,en(),F=e.timestamp,M=F,I=e.count,gt(),tn()})(e),function(e){const t=[];for(let e=0;e<D;e++){const n=Be(e);t.push({name:n.name,type:n.type})}Ne=JSON.stringify(t),Te=(e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return new Uint32Array([t])[0].toString(36)})(Ne),e()}(rn)}),0)}(e)},getSQL:function(){return $},render:function(){Zt()},addEventListener:function(e,t){!function(e,t,n){{const n=e=>{t.call(c,e)};c.addEventListener(e,n)}}(e,t)}}}n(88301),n(94467),n(83333),n(23715);var na=n(41236),ra=n(25128),oa=n(94119),aa=n(18012),ia=n.n(aa);const la="query.in.cancel",sa="chart.draw",ca="#eee",da=function(){return{axisLine:{lineStyle:{color:ca}},axisTick:{lineStyle:{color:ca}},axisLabel:{textStyle:{color:ca}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:ca}}}},ua=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],ma={color:ua,backgroundColor:"#282a36",tooltip:{axisPointer:{lineStyle:{color:ca},crossStyle:{color:ca}}},legend:{textStyle:{color:ca}},textStyle:{color:ca},title:{textStyle:{color:ca}},toolbox:{iconStyle:{normal:{borderColor:ca}}},dataZoom:{textStyle:{color:ca}},timeline:{lineStyle:{color:ca},itemStyle:{normal:{color:ua[1]}},label:{normal:{textStyle:{color:ca}}},controlStyle:{normal:{color:ca,borderColor:ca}}},timeAxis:da(),logAxis:da(),valueAxis:da(),categoryAxis:da(),line:{symbol:"circle"},graph:{color:ua},gauge:{title:{textStyle:{color:ca}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}},textStyle:{fontFamily:'"Open Sans", -apple-system, BlinkMacSystemFont, Helvetica, Roboto, sans-serif'}};var ga=n(33301);na.D$([ra.N,oa.N]);const fa=u.ZP.div.withConfig({displayName:"Result__Root"})(["\n  display: flex;\n  flex: 1;\n  width: 100%;\n"]),pa=(0,u.ZP)(nt).withConfig({displayName:"Result__Wrapper"})(["\n  overflow: hidden;\n"]),ha=(0,u.ZP)(tt).withConfig({displayName:"Result__Content"})(["\n  flex: 1 1 0;\n  color: ",";\n\n  *::selection {\n    background: ",";\n    color: ",";\n  }\n"],I("foreground"),I("red"),I("foreground")),ba=u.ZP.div.withConfig({displayName:"Result__Actions"})(["\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n  gap: 1rem;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 0 1rem;\n\n  width: 100%;\n  height: 4.5rem;\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),Ea=(0,u.ZP)(ea.L).withConfig({displayName:"Result__TableFreezeColumnIcon"})(["\n  transform: scaleX(-1);\n"]),ya=(0,u.ZP)(Oe).withConfig({displayName:"Result__RowCount"})(["\n  margin-right: 1rem;\n"]),wa=({viewMode:e})=>{const[t,n]=(0,i.useState)(),r=(0,s.v9)(ur.query.getResult),a=(0,s.v9)(ur.console.getActiveSidebar),l=(0,i.useRef)(),[c,d]=(0,i.useState)(0);(0,i.useEffect)((()=>{const e=ta(document.getElementById("grid"),(function(e,t,n,r){fetch("/exec?query="+encodeURIComponent(e)+"&limit="+t+","+n+"&nm=true").then((e=>e.json())).then(r)}));l.current=e,function(e,t){var n=t,r=e;const a=o()("#_qvis_frm_draw");var i,l,s,c,d,u,m;const g=new Set,f={title:{},tooltip:{},legend:{data:["Series"]},xAxis:{data:[]},yAxis:{},series:[{name:"Y-axis",type:"bar",data:[]}]};var p,h,b;const E=new(ia())({select:"#_qvis_frm_chart_type"}),y=new(ia())({select:"#_qvis_frm_axis_x"}),w=new(ia())({select:"#_qvis_frm_axis_y"});function v(){l.resize()}function C(){a.html('<i class="icon icon-play"></i><span>Draw</span>'),a.removeClass("js-chart-cancel").addClass("js-chart-draw")}function _(e){try{let t;const n=e.columns,r=e.dataset;if(n&&r){const e=new Map;for(t=0;t<n.length;t++)e.set(n[t].name,t);let o;if(null!=d){let n=e.get(d);const a=[];for(t=0;t<r.length;t++)a[t]=r[t][n];o={type:"category",name:d,data:a}}else o={};let a=[];if(u.length>0)for(t=0;t<u.length;t++){const n=e.get(u[t]);if(n){let e=[];for(let t=0;t<r.length;t++)e[t]=r[t][n];a[t]="area"===m?{type:"line",name:u[t],data:e,areaStyle:{},smooth:!0,symbol:"none"}:{name:u[t],type:m,data:e,large:!0}}}const i={tooltip:{trigger:"axis",axisPointer:{label:{show:!1}}},legend:{},xAxis:o,yAxis:{type:"value"},series:a};l.setOption(i,!0)}}finally{v(),C()}}function x(e){b=null,n.trigger("query.out.ok",{delta:(new Date).getTime()-c,count:e.count}),p=e,h=s,_(e)}function S(e){b=null,C(),n.trigger("query.out.error",{query:h,r:e.responseJSON,status:e.status,statusText:e.statusText,delta:(new Date).getTime()-c})}function k(){l.setOption(f,!0)}i=r.find(".quick-vis-canvas")[0],o()(window).resize(v),n.on("active.panel",v),l=na.S1(i,ma),n.on("query.out.dataset",(function(e,t){var n=[];const r=t.columns;for(var o=0;o<r.length;o++)n[o]={text:r[o].name,value:r[o].name};y.setData(n),w.setData(n),w.set(n.slice(1).map((e=>e.text))),s=t.query,k()})),n.on(la,(function(){b&&(b.abort(),b=null)})),n.on(sa,(function(){a.html('<i class="icon icon-stop"></i><span>Cancel</span>'),a.removeClass("js-chart-draw").addClass("js-chart-cancel"),m=E.selected();const e=y.selected(),t=w.selected();if((0,ga.arrayEquals)(e,d)&&(0,ga.arrayEquals)(t,u)&&s===h)_(p);else{g.clear(),(d=y.selected())&&g.add(d),u=w.selected(),function(e,t){for(var n=0;n<e.length;n++)t.add(e[n])}(w.selected(),g);var r="";g.forEach((function(e){""!==r&&(r+=","),r+=e}));const e={};e.query=s,e.count=!1,e.cols=r,e.src="vis",c=(new Date).getTime(),b=o().get("/exec",e),n.trigger("query.out.running"),b.done(x).fail(S)}})),a.click((function(){return b?n.trigger(la):n.trigger(sa),!1})),k(),v()}(o()("#quick-vis"),window.bus),bus.on(b.GRID_FOCUS,(function(){e.focus()})),bus.on(b.MSG_QUERY_DATASET,(function(t,n){e.setData(n)})),e.addEventListener("header.click",(function(e){bus.trigger("editor.insert.column",e.detail.columnName)})),e.addEventListener("yield.focus",(function(){bus.trigger(b.MSG_EDITOR_FOCUS)})),e.addEventListener("freeze.state",(function(e){d(e.detail.freezeLeft)}))}),[]),(0,i.useEffect)((()=>{r?.type===N.DQL&&n(r.count)}),[r]),(0,i.useEffect)((()=>{const t=document.getElementById("grid"),n=document.getElementById("quick-vis");t&&n&&("grid"===e?(n.style.display="none",l?.current?.show()):(l?.current?.hide(),n.style.display="flex"))}),[e]),(0,i.useEffect)((()=>{l?.current?.render()}),[a]);const u=[{tooltipText:"Freeze left column",trigger:i.createElement(yo.z,{skin:c>0?"success":"secondary",onClick:()=>{l?.current?.toggleFreezeLeft(),l?.current?.focus()}},i.createElement(Ea,{size:"18px"}))},{tooltipText:"Move selected column to the front",trigger:i.createElement(yo.z,{skin:"secondary",onClick:l?.current?.shuffleFocusedColumnToFront},i.createElement(Jo.W,{size:"18px"}))},{tooltipText:"Reset grid layout",trigger:i.createElement(yo.z,{skin:"secondary",onClick:l?.current?.clearCustomLayout},i.createElement(Xo.A,{size:"18px"}))},{tooltipText:"Refresh",trigger:i.createElement(yo.z,{skin:"secondary",onClick:()=>{const e=l?.current?.getSQL();e&&bus.trigger(b.MSG_QUERY_EXEC,{q:e})}},i.createElement(Yo.h,{size:"18px"}))}];return(0,i.useEffect)((()=>{r?.type===N.DQL&&n(r.count)}),[r]),i.createElement(fa,null,i.createElement(pa,null,i.createElement(ba,null,t&&i.createElement(ya,{color:"foreground"},`${t.toLocaleString()} row${t>1?"s":""}`),"grid"===e&&u.map(((e,t)=>i.createElement(at,{key:t,delay:350,placement:"bottom",trigger:e.trigger},i.createElement(Ct,null,e.tooltipText)))),i.createElement(at,{delay:350,placement:"bottom",trigger:i.createElement(yo.z,{skin:"secondary",onClick:()=>{const e=l?.current?.getSQL();e&&bus.trigger(b.MSG_QUERY_EXPORT,{q:e})}},i.createElement(Ko.Q,{size:"18px"}))},i.createElement(Ct,null,"Download result as a CSV file"))),i.createElement(ha,null,i.createElement("div",{id:"grid"}),i.createElement("div",{id:"quick-vis"},i.createElement("div",{className:"quick-vis-controls"},i.createElement("form",{className:"v-fit",role:"form"},i.createElement("div",{className:"form-group"},i.createElement("label",null,"Chart type"),i.createElement("select",{id:"_qvis_frm_chart_type"},i.createElement("option",null,"bar"),i.createElement("option",null,"line"),i.createElement("option",null,"area"))),i.createElement("div",{className:"form-group"},i.createElement("label",null,"Labels"),i.createElement("select",{id:"_qvis_frm_axis_x"})),i.createElement("div",{className:"form-group"},i.createElement("label",null,"Series"),i.createElement("select",{id:"_qvis_frm_axis_y",multiple:!0})),i.createElement("button",{className:"button-primary js-chart-draw",id:"_qvis_frm_draw"},i.createElement("i",{className:"icon icon-play"}),i.createElement("span",null,"Draw")))),i.createElement("div",{className:"quick-vis-canvas"})))))};var va=n(37344),Ca=n(88732),_a=n(47039),xa=n(52701),Sa=n(39446);const ka=(0,u.ZP)(Sa.xV).withConfig({displayName:"ContextMenu__StyledContextMenu"})(["\n  z-index: 100;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n"],I("backgroundDarker"),I("selection")),Na=({children:e,...t})=>i.createElement(ka,t,e),Ta=(0,u.ZP)(Sa.sN).withConfig({displayName:"MenuItem__StyledMenuItem"})(["\n  color: ",";\n  cursor: pointer;\n  padding: 0.5rem 1rem;\n\n  &:hover {\n    background: ",";\n  }\n"],I("foreground"),I("selection")),Oa=(0,u.ZP)(Sa.sN).withConfig({displayName:"MenuItem__StyledDivider"})(["\n  background: ",";\n  height: 1px;\n  width: 100%;\n  margin: 0.5rem 0;\n  padding: 0 1rem;\n"],I("foreground")),Ra=({children:e,divider:t,...n})=>{const r=t?Oa:Ta;return i.createElement(r,n,e)};var Ia=n(54493);const Pa=({name:e,partitionBy:t,timestamp:n,walEnabled:r,dedup:o,schemaColumns:a})=>{const i=n&&a.find((e=>e.column===n&&"TIMESTAMP"===e.type));let l=`CREATE TABLE '${e}' (`;for(let e=0;e<a.length;e++){const{column:t,type:n,indexed:r,indexBlockCapacity:o,symbolCached:i,symbolCapacity:s}=a[e];l+=`${t} ${n} `,"SYMBOL"===n&&(l+=s?`capacity ${s} `:"",i&&(l+="CACHE ")),r&&(l+="index ",o&&(l+=`capacity ${o} `)),l=(0,Ia.Z)(l),e!==a.length-1&&(l+=", ")}if(l+=")",i&&(l+=` timestamp (${n})`),"NONE"!==t&&(l+=` PARTITION BY ${t} ${r?"WAL":"BYPASS WAL"}`),r&&o&&i){const e=a.filter((e=>e.upsertKey));e.length>0&&(l+=` DEDUP UPSERT KEYS(${(e.find((e=>e.column===n))?e:[...e,{column:n}]).map((e=>e.column)).join(",")})`)}return`${L(l)};`},La=({name:e,partitionBy:t,walEnabled:n,dedup:r})=>{const{quest:o}=(0,i.useContext)(Mt),[a,l]=i.useState(),s=(0,i.useCallback)((()=>{a&&(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(a)}),[a]);return i.createElement(Na,{id:e,onShow:async()=>{const a=await o.showColumns(e);if(a.type===N.DQL&&a.data.length>0){const o=((e,t,n,r,o)=>{const a=n.find((e=>e.designated));return Pa({name:e,partitionBy:t,timestamp:a?a.column:"",walEnabled:r,dedup:o,schemaColumns:n.map((e=>B(e,["column","type","indexed","indexBlockCapacity","symbolCached","symbolCapacity","designated","upsertKey"])))})})(e,t,a.data,n,r);l(o)}}},a&&i.createElement(Ra,{onClick:s},"Copy schema to clipboard"),i.createElement(Ra,{divider:!0}),i.createElement(Ra,null,"Close"))};function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aa.apply(this,arguments)}const Ba=u.ZP.div.withConfig({displayName:"Table__Wrapper"})(["\n  position: relative;\n  display: flex;\n  margin-top: 0.5rem;\n  align-items: stretch;\n  flex-direction: column;\n  overflow: hidden;\n\n  ",";\n"],Q),Da=(0,u.ZP)(xn).withConfig({displayName:"Table__Title"})(["\n  display: flex;\n  align-items: stretch;\n  font-weight: ",";\n\n  &:hover {\n    cursor: pointer;\n  }\n"],(({expanded:e})=>e?800:400)),Ma=u.ZP.div.withConfig({displayName:"Table__Columns"})(['\n  position: relative;\n  display: flex;\n  margin-left: 2rem;\n  flex-direction: column;\n\n  &:before {\n    position: absolute;\n    height: 100%;\n    width: 2px;\n    left: -0.4rem;\n    top: 0;\n    content: "";\n    background: ',";\n  }\n"],I("gray1")),Fa=(0,u.ZP)(xa.o).withConfig({displayName:"Table__Loader"})(["\n  margin-left: 1rem;\n  color: ",";\n  ",";\n"],I("orange"),p),qa=({column:e,designatedTimestamp:t})=>({toggleOpen:n})=>i.createElement(xn,Aa({},e,{designatedTimestamp:t,kind:"column",name:e.column,onClick:()=>n()})),za=({description:e,isScrolling:t,designatedTimestamp:n,table_name:r,partitionBy:o,expanded:a=!1,walEnabled:l,onChange:c,dedup:d})=>{const[u]=(0,i.useState)(new O),[m,g]=(0,i.useState)(),f=(0,s.v9)(ur.query.getTables);(0,i.useEffect)((()=>{f&&a&&r&&(async e=>{const t=await u.showColumns(r);t&&t.type===N.DQL&&g(t.data)})()}),[f,r]);const p=[{name:r,kind:"table",initiallyOpen:a,children:[{name:"Columns",initiallyOpen:!0,wrapper:Ma,async onOpen({setChildren:e}){c(r);const t=await u.showColumns(r)??[];t&&t.type===N.DQL&&(g(t.data),e(t.data.map((e=>({name:e.column,render:qa({column:e,designatedTimestamp:n})})))))},render:({toggleOpen:e,isOpen:t,isLoading:n})=>i.createElement(xn,{expanded:t&&!n,kind:"folder",name:"Columns",onClick:()=>e(),suffix:n&&i.createElement(Fa,{size:"18px"})})}],render:({toggleOpen:t,isLoading:n})=>i.createElement(Sa.W4,{id:r},i.createElement(Da,{description:e,kind:"table",name:r,onClick:()=>{t(),c(r)},partitionBy:o,walEnabled:l,suffix:n&&i.createElement(Fa,{size:"18px"}),tooltip:!!e}))}];return i.createElement(Ba,{_height:m?30*m.length:0},!t&&i.createElement(La,{name:r,partitionBy:o,walEnabled:l,dedup:d}),i.createElement(On,{root:p}))};var Za=n(13591);const ja=u.ZP.div.withConfig({displayName:"LoadingError__Wrapper"})(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n"]),Ua=(0,u.ZP)(Za.N).withConfig({displayName:"LoadingError__CloudOffIcon"})(["\n  height: 3rem;\n"]),Ga=(0,u.ZP)(Oe).withConfig({displayName:"LoadingError__ErrorTextLine"})(["\n  margin-top: 1rem;\n"]),Ha=({error:e})=>i.createElement(ja,null,i.createElement(Ua,null),i.createElement(Ga,{color:"white"},"Cannot load tables"),e&&i.createElement(Ga,{color:"gray2",size:"sm"},e.error));function Va(){return Va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Va.apply(this,arguments)}const Wa=(0,u.iv)(["\n  display: flex;\n  justify-content: center;\n"]),Qa=(0,u.ZP)(nt).withConfig({displayName:"Schema__Wrapper"})(["\n  overflow-x: auto;\n  height: 100%;\n"]),$a=(0,u.ZP)(tt).withConfig({displayName:"Schema__Content"})(["\n  display: block;\n  font-family: ",";\n  overflow: auto;\n  ",";\n"],(({theme:e})=>e.fontMonospace),(({_loading:e})=>e&&Wa)),Ya=(0,u.ZP)(_a.G).withConfig({displayName:"Schema__Loader"})(["\n  margin-left: 1rem;\n  align-self: center;\n  color: ",";\n  ",";\n"],I("foreground"),p),Ka=u.ZP.div.withConfig({displayName:"Schema__FlexSpacer"})(["\n  flex: 1;\n"]),Xa=({innerRef:e,...t})=>{const{quest:n}=(0,i.useContext)(Mt),[r,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)(null),c=(0,i.useRef)(null),[d,u]=(0,i.useState)(),[m,g]=(0,i.useState)(),[f,p]=(0,i.useState)(!1),[E,y]=(0,i.useState)(!1),{readOnly:w}=(0,s.v9)(ur.console.getConfig),C=(0,s.I0)(),[_,x]=(0,i.useState)(!0),S=(0,i.useRef)(null),k=e=>{g(e===m?void 0:e)},T=()=>{o(!0),g(void 0),(0,va.aj)((0,tr.D)(n.showTables()).pipe((0,Ca.O)(null)),(0,v.of)(!0).pipe((0,er.g)(1e3),(0,Ca.O)(!1))).subscribe((([e])=>{e&&e.type===N.DQL?(l(null),c.current=null,u(e.data),C(jn(e.data))):o(!1)}),(e=>{h(e)&&l(e)}),(()=>{o(!1)}))};return(0,i.useEffect)((()=>{T(),window.bus.on(b.MSG_QUERY_SCHEMA,(()=>{T()})),window.bus.on(b.MSG_CONNECTION_ERROR,((e,t)=>{c.current=t,l(t)})),window.bus.on(b.MSG_CONNECTION_OK,(()=>{null!==c.current&&T()}))}),[]),i.createElement(Qa,Va({ref:e},t),i.createElement(Pe.Header,{title:"Tables",afterTitle:i.createElement("div",{style:{display:"flex"}},!1===w&&d&&i.createElement(ve,{align:"center",gap:"0"},i.createElement(at,{delay:350,placement:"bottom",trigger:i.createElement(yo.z,{onClick:T,skin:"transparent"},i.createElement(Yo.h,{size:"18px"}))},i.createElement(Ct,null,"Refresh")))),shadow:!_}),i.createElement($a,{_loading:r,ref:S,onScroll:()=>x(0===S?.current?.scrollTop)},r?i.createElement(Ya,{size:"48px"}):a?i.createElement(Ha,{error:a}):d?.map((e=>i.createElement(za,{designatedTimestamp:e.designatedTimestamp,expanded:e.table_name===m,isScrolling:f,key:e.table_name,table_name:e.table_name,onChange:k,partitionBy:e.partitionBy,walEnabled:e.walEnabled,dedup:e.dedup}))),!r&&i.createElement(Ka,null)))},Ja=(e,t)=>i.createElement(Xa,Va({},e,{innerRef:t})),ei=(0,i.forwardRef)(Ja);var ti=n(83381),ni=n(46193);const ri=u.ZP.div.withConfig({displayName:"start__Items"})(["\n  display: grid;\n  grid-auto-flow: row;\n  grid-auto-columns: max-content;\n  gap: 4rem;\n  text-align: center;\n  justify-items: center;\n"]),oi=(0,u.ZP)(ti.X).withConfig({displayName:"start__StyledHeading"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),ai=(0,u.ZP)(Oe).withConfig({displayName:"start__StyledText"})(["\n  line-height: 1.75;\n\n  a {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.gray2)),ii=u.ZP.div.withConfig({displayName:"start__Actions"})(["\n  display: grid;\n  gap: 2rem;\n  grid-template-columns: repeat(2, 1fr);\n"]),li=(0,u.ZP)(ni.x).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"start__Action"})(["\n  padding: 2rem;\n  border-radius: ",";\n  background: #2c2e3d;\n  cursor: pointer;\n\n  &,\n  &:hover {\n    ",";\n  }\n\n  > * {\n    opacity: 0.8;\n  }\n\n  &:hover {\n    background: #3f4252;\n\n    > * {\n      opacity: 1;\n    }\n  }\n"],(({theme:e})=>e.borderRadius),$),si=()=>{const e=(0,s.I0)();return i.createElement(ri,null,i.createElement(oi,{level:3},"Enter a query and press ",i.createElement(Oe,{color:"green"},"Run")," to view results."),i.createElement(ii,null,i.createElement(li,{onClick:()=>e(Dn.setActiveBottomPanel("import"))},i.createElement("img",{alt:"File upload icon",width:"60",height:"80",src:"/assets/upload.svg"}),i.createElement(ti.X,{level:5},"Import CSV")),i.createElement(li,{onClick:()=>e(Dn.setActiveSidebar("create"))},i.createElement("img",{alt:"Create table icon",width:"60",height:"80",src:"/assets/create-table.svg"}),i.createElement(ti.X,{level:5},"Create table"))),i.createElement(ai,{color:"gray2"},"Get $200 in free credits when you sign up for"," ",i.createElement("a",{href:"https://questdb.io/cloud",target:"_blank",rel:"noopener noreferrer"},"QuestDB Cloud"),".",i.createElement("br",null),"No credit card required."))},ci=(0,u.ZP)(tt).withConfig({displayName:"zero-state__StyledPaneContent"})(["\n  align-items: center;\n  justify-content: center;\n"]),di=()=>{const{quest:e}=(0,i.useContext)(Mt),[t,n]=(0,i.useState)(!0),[r,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{(async()=>{try{const t=await e.showTables();t&&t.type===N.DQL&&o(t.data)}catch(e){return}finally{n(!1)}})()}),[]),i.createElement(nt,null,i.createElement(ci,null,!t&&r.length<=2&&i.createElement(si,null)))},ui=(e,t)=>isNaN(parseInt(e))?t:parseInt(e),mi={authPayload:"",editorCol:1,editorLine:1,editorSplitterBasis:350,resultsSplitterBasis:350,updateSettings:(e,t)=>{},exampleQueriesVisited:!1},gi=(0,i.createContext)(mi),fi=({children:e})=>{const[t,n]=(0,i.useState)(Vt(Ht.AUTH_PAYLOAD)),[r,o]=(0,i.useState)(ui(Vt(Ht.EDITOR_COL),10)),[a,l]=(0,i.useState)(ui(Vt(Ht.EDITOR_LINE),10)),[s,c]=(0,i.useState)(ui(Vt(Ht.EDITOR_SPLITTER_BASIS),350)),[d,u]=(0,i.useState)(ui(Vt(Ht.RESULTS_SPLITTER_BASIS),350)),[m,g]=(0,i.useState)("true"===Vt(Ht.EXAMPLE_QUERIES_VISITED));return i.createElement(gi.Provider,{value:{authPayload:t,editorCol:r,editorLine:a,editorSplitterBasis:s,resultsSplitterBasis:d,updateSettings:(e,t)=>{Wt(e,t.toString()),(e=>{const t=Vt(e);switch(e){case Ht.AUTH_PAYLOAD:n(t);break;case Ht.EDITOR_COL:o(ui(t,10));break;case Ht.EDITOR_LINE:l(ui(t,10));break;case Ht.EXAMPLE_QUERIES_VISITED:g("true"===t);break;case Ht.EDITOR_SPLITTER_BASIS:c(ui(t,350));break;case Ht.RESULTS_SPLITTER_BASIS:u(ui(t,350))}})(e)},exampleQueriesVisited:m}},e)},pi=()=>(0,i.useContext)(gi),hi=(0,u.ZP)(ve).attrs({flexDirection:"column"}).withConfig({displayName:"Sidebar"})(["\n  width: 4.5rem;\n  height: 100%;\n  background: ",";\n  gap: 1rem;\n  flex-shrink: 0;\n  justify-content: ",";\n  align-items: center;\n"],(({theme:e})=>e.color.backgroundDarker),(({align:e})=>"top"===e?"flex-start":"flex-end")),bi=(0,u.ZP)(Et).withConfig({displayName:"navigation__Navigation"})(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n\n  & > span {\n    margin-left: 0 !important;\n  }\n\n  & > :not(:first-child) {\n    margin-top: 0.3rem;\n  }\n"]);var Ei=n(5978),yi=n(10702),wi=n(97923),vi=n(16836),Ci=n(20471);const _i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],xi=(e,t=0,n=1e3)=>e<n?`${((e,t=2)=>Math.round((e+Number.EPSILON)*10**t)/10**t)(e)} ${_i[t]}`:xi(e/n,t+1);var Si=n(36607),ki=n(23414);const Ni=(0,u.ZP)(ki.e).withConfig({displayName:"file-status__CheckboxCircleIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.green)),Ti=(0,u.ZP)(ve).withConfig({displayName:"file-status__StyledBox"})(["\n  gap: 0.5rem;\n  white-space: nowrap;\n"]),Oi=({file:e})=>{const t=(e=>{if(!e.isUploading&&e.uploaded&&e.uploadResult)return{label:`Imported ${e.uploadResult.rowsImported.toLocaleString()} row${e.uploadResult.rowsImported>1||0===e.uploadResult.rowsImported?"s":""}`,type:st.SUCCESS,icon:i.createElement(Ni,{size:"16px"})};if(e.error)return{label:"Upload error",type:st.ERROR};if(e.isUploading)return{label:`Uploading: ${e.uploadProgress.toFixed(2)}%`,type:st.WARNING};switch(e.status){case T.EXISTS:return{label:"Table already exists",type:st.WARNING};case T.RESERVED_NAME:return{label:"Reserved table name",type:st.ERROR};case T.DOES_NOT_EXIST:return{label:"Ready to upload",type:st.SUCCESS}}})(e);return t?i.createElement(ve,{gap:"1rem",align:"flex-start",flexDirection:"column"},i.createElement(Si.C,{type:t.type},i.createElement(Ti,null,t.icon," ",t.label))):i.createElement(i.Fragment,null)};var Ri=n(84685),Ii=n(87563),Pi=n(27e3),Li=n(42495),Ai=n(53374);const Bi="yyyy-MM-ddTHH:mm:ss.SSSUUUz",Di=5e5,Mi=(0,u.ZP)(Li.O).withConfig({displayName:"upload-settings-dialog__SettingsIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Fi=(0,u.ZP)(ve).attrs({justifyContent:"space-between",gap:"2rem"}).withConfig({displayName:"upload-settings-dialog__Row"})(["\n  width: 100%;\n"]),qi=(0,u.ZP)(ve).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"upload-settings-dialog__Items"})(["\n  height: 100%;\n"]),zi=(0,u.ZP)(ve).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"upload-settings-dialog__Inputs"})(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"]),Zi=(0,u.ZP)(Fe.GroupItem).withConfig({displayName:"upload-settings-dialog__Option"})(["\n  width: 100%;\n\n  &:nth-child(even) {\n    background: #242531;\n  }\n"]),ji=u.ZP.div.withConfig({displayName:"upload-settings-dialog__InputWrapper"})(["\n  flex-shrink: 0;\n  width: 30%;\n"]),Ui=({file:e,open:t,onOpenChange:n,onSubmit:r})=>{const{delimiter:o,overwrite:a,forceHeader:l,skipLev:s,atomicity:c,maxUncommitedRows:d}=e.settings,u={delimiter:o,overwrite:a,forceHeader:l,skipLev:s,atomicity:c,maxUncommitedRows:d},[m,g]=i.useState(u),f=[{type:"input",name:"maxUncommitedRows",label:"Maximum number of uncommited rows",placeholder:Di.toString(),description:i.createElement(i.Fragment,null,"Set this parameter to determine the size of the commit batch based on the RAM size of the machine to avoid running out of memory during an import."),defaultValue:m.maxUncommitedRows},{type:"input",name:"delimiter",label:"Delimiter",placeholder:"Automatic",description:i.createElement(i.Fragment,null,"Delimiter character. When not set, import will try to detect the delimiter automatically. You can define the parameter here to disable auto-detection and allow single-line file import."),defaultValue:m.delimiter},{type:"select",name:"atomicity",label:"Atomicity",description:i.createElement(i.Fragment,null,"Behavior when an error is detected in the data.",i.createElement("br",null),i.createElement("strong",null,"Abort"),": the entire file will be skipped.",i.createElement("br",null),i.createElement("strong",null,"Skip row"),": the row is skipped.",i.createElement("br",null),i.createElement("strong",null,"Skip column"),": the column is skipped."),defaultValue:m.atomicity,options:[{label:"Skip column",value:"skipCol"},{label:"Skip row",value:"skipRow"},{label:"Abort import",value:"abort"}]},{type:"switch",name:"forceHeader",label:"Force header",description:i.createElement(i.Fragment,null,"When set to ",i.createElement("strong",null,"false"),", QuestDB will try to infer if the first line of the file is the header line.",i.createElement("br",null),"When set to ",i.createElement("strong",null,"true"),", QuestDB will expect that line to be the header line."),defaultValue:m.forceHeader},{type:"switch",name:"skipLev",label:"Skip line extra values",description:i.createElement(i.Fragment,null,"When set to ",i.createElement("strong",null,"true"),", the parser will ignore extra values. When set to ",i.createElement("strong",null,"false"),", the parser will ignore the entire line. An extra value is something in addition to what is defined by the header."),defaultValue:m.skipLev}];return i.createElement(Fe,{open:t,title:i.createElement(ve,null,i.createElement(Mi,{size:"20px"}),i.createElement(Oe,{color:"foreground"},"Settings for ",e.fileObject.name)),trigger:i.createElement(yo.z,{skin:"secondary",prefixIcon:i.createElement(Li.O,{size:"18px"}),onClick:()=>n(!0)},"Settings"),onDismiss:()=>{g(u),n(!1)},afterTitle:i.createElement(ve,{gap:"1rem"},i.createElement(yo.z,{prefixIcon:i.createElement(Ai.W,{size:18}),skin:"secondary",onClick:()=>{g(u),n(!1)},type:"button"},"Dismiss"),i.createElement(yo.z,{prefixIcon:i.createElement(Li.O,{size:18}),skin:"success",onClick:()=>{r(m),n(!1)}},"Submit"))},i.createElement(Fe.ContentWrapper,null,i.createElement(qi,null,i.createElement(zi,null,f.map((e=>i.createElement(Zi,{key:e.name},i.createElement(Fi,{key:e.name},i.createElement(ve,{gap:"1rem",flexDirection:"column",align:"flex-start",justifyContent:"flex-start"},i.createElement(Oe,{color:"foreground",weight:600},e.label),e.description&&i.createElement(Oe,{color:"gray2",size:"sm"},e.description)),i.createElement(ji,null,"input"===e.type&&i.createElement(Ii.I,{name:e.name,defaultValue:e.defaultValue,placeholder:e.placeholder,onChange:t=>g({...m,[e.name]:t.target.value})}),"select"===e.type&&i.createElement(Ci.P,{name:e.name,defaultValue:e.defaultValue,onChange:t=>g({...m,[e.name]:t.target.value}),options:e.options}),"switch"===e.type&&i.createElement(Pi.r,{checked:e.defaultValue,onChange:t=>g({...m,[e.name]:t})}))))))))))},Gi=({file:e,onUpload:t,onRemove:n,onSettingsChange:r})=>{const[o,a]=(0,i.useState)(!1);return i.createElement(ve,{gap:"1rem",align:"center"},i.createElement(Ui,{open:o,onOpenChange:a,onSubmit:r,file:e}),i.createElement(yo.z,{disabled:e.isUploading,skin:"primary",prefixIcon:i.createElement(wi.C,{size:"18px"}),onClick:()=>t(e.id)},e.isUploading?"Uploading...":"Upload"),i.createElement(at,{placement:"top",trigger:i.createElement(yo.z,{disabled:e.isUploading,skin:"secondary",onClick:()=>{n(e.id)}},i.createElement(Ee.x,{size:"18px"}))},i.createElement(Ct,null,"Remove file from queue")))};var Hi=n(35146),Vi=n(36110),Wi=n(48297),Qi=n(11910);const $i=u.ZP.div.withConfig({displayName:"FormItem__Root"})(["\n  display: grid;\n  gap: 1rem;\n  white-space: normal;\n  width: 100%;\n\n  ","\n"],(({border:e,theme:t})=>e&&`\n    border-bottom: 1px ${t.color.background} solid;\n  `)),Yi=u.ZP.div.withConfig({displayName:"FormItem__Control"})(["\n  display: grid;\n  gap: 1rem;\n  ","\n"],(e=>e.disabled&&"opacity: 0.7;")),Ki=u.ZP.div.withConfig({displayName:"FormItem__LabelWrapper"})(["\n  display: flex;\n  align-self: center;\n  justify-content: space-between;\n  align-items: baseline;\n  width: 100%;\n"]),Xi=u.ZP.label.withConfig({displayName:"FormItem__Label"})(["\n  color: ",";\n"],(({theme:e})=>e.color.gray2)),Ji=u.ZP.span.withConfig({displayName:"FormItem__AfterLabel"})(["\n  color: ",";\n"],(({theme:e})=>e.color.gray2));var el=n(42522),tl=n(29072);function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nl.apply(this,arguments)}const rl=u.ZP.div.withConfig({displayName:"FormInput__Wrapper"})(["\n  display: flex;\n  width: 100%;\n  ","\n"],(e=>"off"===e.autoComplete&&"\n    // Hide the LastPass+NordPass icons\n    [data-lastpass-icon-root],\n    span[data-np-uid] {\n      display: none !important;\n    }\n  ")),ol=(0,u.ZP)(Ii.I).withConfig({displayName:"FormInput__Input"})(["\n  ","\n"],(e=>e.disabled&&"opacity: 0.7;")),al=(0,u.ZP)(yo.z).withConfig({displayName:"FormInput__ToggleButton"})(["\n  cursor: pointer;\n  border-radius: 0;\n\n  ","\n"],(e=>e.last&&"\n    border-top-right-radius: 0.4rem;\n    border-bottom-right-radius: 0.4rem;\n  "));var il=n(81213);function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sl.apply(this,arguments)}const cl=u.ZP.div.withConfig({displayName:"FormGroup__Root"})(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(",", minmax(0, 1fr));\n  gap: ",";\n"],(({columns:e})=>e),(({gap:e})=>e));function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(this,arguments)}const ul=(0,u.ZP)(Ii.I).attrs({as:"textarea"}).withConfig({displayName:"FormTextArea__TextArea"})(["\n  width: 100%;\n  height: inherit;\n"]),ml=({name:e,method:t="post",onSubmit:n,onChange:r,onDirtyChange:o,children:a,validationSchema:l,defaultValues:s,preventSubmitOnEnter:c})=>{let d={};s&&(d.defaultValues=s),l&&(d.resolver=(0,Qi.L)(l));const u=(0,Wi.cI)(d);return(0,i.useEffect)((()=>{r&&u.watch(r)}),[]),(0,i.useEffect)((()=>{o&&o(u.formState.isDirty,u.formState.dirtyFields)}),[u.formState]),Object.keys(u.formState.errors).length>0&&console.log("Schema validation errors",u.formState.errors),i.createElement(Wi.RV,u,i.createElement("form",{name:e,onSubmit:async e=>{e.stopPropagation(),await u.handleSubmit(n)(e)},method:t,onKeyDown:e=>{"Enter"===e.key&&c&&e.preventDefault()}},a))};ml.Item=({name:e,label:t,afterLabel:n,helperText:r,children:o,className:a,disabled:l,border:s,required:c})=>{const{formState:{errors:d}}=(0,Wi.Gc)();return i.createElement($i,{className:a,disabled:l,border:s},i.createElement(Yi,{disabled:l},t&&e&&i.createElement(Ki,null,i.createElement(Xi,{htmlFor:e},t,c?i.createElement(Oe,{color:"red"}," *"):""),i.createElement(Ji,null,n)),o),e&&!d[e]&&r&&("string"==typeof r?i.createElement(Oe,{color:"comment"},r):r),e&&d&&d[e]&&i.createElement(Oe,{color:"red"},d[e]?.message))},ml.Input=({name:e,placeholder:t,type:n="text",disabled:r,showPassword:o,autoFocus:a,autoComplete:l,...s})=>{const{register:c,setFocus:d}=(0,Wi.Gc)(),[u,m]=(0,i.useState)(o),g=(0,i.useCallback)((()=>{m(!u)}),[u,m]);return(0,i.useEffect)((()=>{a&&d(e)}),[]),i.createElement(rl,{autoComplete:l},i.createElement(ol,nl({},c(e,{valueAsNumber:"number"===n}),{name:e,placeholder:t,type:u?"text":n,disabled:r,showPassword:o,autoComplete:l},s)),"password"===n&&i.createElement(al,{skin:"secondary",onClick:g,title:"Toggle password visibility",type:"button",last:!0},u?i.createElement(el.b,{size:"18px"}):i.createElement(tl._,{size:"18px"})))},ml.Checkbox=({name:e,checked:t,...n})=>{const{register:r}=(0,Wi.Gc)();return i.createElement("div",{style:{width:"100%",display:"flex"}},i.createElement(il.X,ll({},n,r(e))))},ml.Select=({name:e,...t})=>{const{register:n}=(0,Wi.Gc)();return i.createElement(Ci.P,sl({},n(e),t))},ml.Group=({children:e,columns:t,gap:n="2rem"})=>i.createElement(cl,{columns:t??i.Children.count(i.Children.toArray(e)),gap:n},e),ml.Submit=({children:e,disabled:t,variant:n,prefixIcon:r})=>i.createElement(yo.z,{type:"submit",disabled:t,skin:n??"primary",prefixIcon:r,dataHook:"form-submit-button"},e),ml.Cancel=({children:e,disabled:t,variant:n,prefixIcon:r,defaultValues:o,onClick:a})=>{const{reset:l}=(0,Wi.Gc)();return i.createElement(yo.z,{type:"button",onClick:()=>{l(o),a&&a()},disabled:t,skin:n??"secondary",prefixIcon:r,dataHook:"form-cancel-button"},e)},ml.TextArea=({name:e,placeholder:t,rows:n,autoFocus:r,...o})=>{const{register:a,setFocus:l}=(0,Wi.Gc)();return(0,i.useEffect)((()=>{r&&l(e)}),[]),i.createElement(ul,dl({},a(e),{rows:n??4,placeholder:t},o))};var gl=n(40591),fl=n.n(gl);const pl=e=>{const t=e.length;if(t>127)return!1;if(["telemetry","telemetry_config"].includes(e))return!1;for(let n=0;n<t;n++)switch(e.charAt(n)){case".":if(0==n||n==t-1||"."==e.charAt(n-1))return!1;break;case"?":case",":case"'":case'"':case"\\":case"/":case":":case")":case"(":case"+":case"*":case"%":case"~":case"\0":case"":case"":case"":case"":case"":case"":case"":case"\b":case"\t":case"\v":case"\f":case"\r":case"\n":case"":case"":case"":case"0xfeff":return!1}return e.length>0&&" "!=e.charAt(0)&&" "!=e.charAt(t-1)},hl=u.ZP.ul.withConfig({displayName:"rename-table-dialog__List"})(["\n  list-style-position: inside;\n  padding-left: 0;\n\n  li {\n    margin-bottom: 1rem;\n  }\n"]),bl=(0,u.ZP)(Hi.V.Description).withConfig({displayName:"rename-table-dialog__StyledDescription"})(["\n  display: grid;\n  gap: 2rem;\n"]),El=fl().object({name:fl().string().required().custom(((e,t)=>pl(e)?e:t.error("string.validTableName"))).messages({"string.empty":"Please enter a name","string.validTableName":"Invalid table name"})}),yl=({open:e,onOpenChange:t,onNameChange:n,file:r})=>{const o=r.table_name??r.fileObject.name;return i.createElement(Hi.V.Root,{open:e},i.createElement(Hi.V.Trigger,{asChild:!0},i.createElement(he.A,null,i.createElement(yo.z,{skin:"transparent",prefixIcon:i.createElement(Vi.I,{size:"14px"}),onClick:()=>t(r)},R(o,20)))),i.createElement(Hi.V.Portal,null,i.createElement(he.A,null,i.createElement(be.a,{primitive:Hi.V.Overlay})),i.createElement(Hi.V.Content,{onEscapeKeyDown:()=>t(void 0),onInteractOutside:()=>t(void 0)},i.createElement(ml,{name:"rename-table",defaultValues:{name:o},onSubmit:e=>{n(e.name),t(void 0)},validationSchema:El},i.createElement(Hi.V.Title,null,i.createElement(ve,null,i.createElement(Vi.I,{size:20}),"Change table name")),i.createElement(bl,null,i.createElement(ml.Item,{name:"name",label:"Table name"},i.createElement(ml.Input,{name:"name"})),i.createElement(Oe,{color:"foreground"},i.createElement(hl,null,i.createElement("li",null,"Max 127 characters"),i.createElement("li",null,"Must not contain dot at the beginning"),i.createElement("li",null,"Must not contain the following characters:"," ",i.createElement("strong",null,"? , ' \" \\ / : ) ( + * & ~ \r \n")),i.createElement("li",null,"No control characters and UTF-8 BOM (Byte Order Mark)"),i.createElement("li",null,"Cannot be named ",i.createElement("strong",null,"telemetry")," or"," ",i.createElement("strong",null,"telemetry_config"))))),i.createElement(Hi.V.ActionButtons,null,i.createElement(Hi.V.Close,{asChild:!0},i.createElement(yo.z,{prefixIcon:i.createElement(Ai.W,{size:18}),skin:"secondary",onClick:()=>t(void 0)},"Dismiss")),i.createElement(Hi.V.Close,{asChild:!0},i.createElement(he.A,null,i.createElement(ml.Submit,{prefixIcon:i.createElement(Vi.I,{size:18}),variant:"success"},"Change"))))))))};var wl=n(90496);const vl="yyyy-MM-ddTHH:mm:ss.SSSUUUz",Cl=u.ZP.div.withConfig({displayName:"controls__Controls"})(["\n  display: grid;\n  grid-template-columns: var(--columns);\n  gap: 1rem;\n  width: 100%;\n  align-items: flex-end;\n  justify-items: center;\n"]),_l=({url:e,text:t,tooltipText:n="Documentation"})=>i.createElement(at,{placement:"bottom",trigger:i.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},i.createElement(yo.z,{skin:"transparent",type:"button"},i.createElement(It.d,{size:"14"}),t&&i.createElement("span",null,t)))},i.createElement(Ct,null,n));function xl(){return xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xl.apply(this,arguments)}const Sl=[{label:"AUTO",value:""},{label:"BINARY",value:"BINARY"},{label:"BOOLEAN",value:"BOOLEAN"},{label:"BYTE",value:"BYTE"},{label:"CHAR",value:"CHAR"},{label:"DATE",value:"DATE"},{label:"DOUBLE",value:"DOUBLE"},{label:"FLOAT",value:"FLOAT"},{label:"GEOHASH",value:"GEOHASH"},{label:"INT",value:"INT"},{label:"IPV4",value:"IPV4"},{label:"LONG",value:"LONG"},{label:"LONG256",value:"LONG256"},{label:"SHORT",value:"SHORT"},{label:"STRING",value:"STRING"},{label:"SYMBOL",value:"SYMBOL"},{label:"TIMESTAMP",value:"TIMESTAMP"},{label:"UUID",value:"UUID"}],kl=(0,u.ZP)(Oe).attrs({color:"foreground"}).withConfig({displayName:"column__IndexNumber"})([""]),Nl=u.ZP.div.withConfig({displayName:"column__Root"})(["\n  display: grid;\n  gap: 1rem;\n  grid-template-columns: 40px auto;\n  padding: 2rem;\n  ",";\n"],(({odd:e})=>e&&"background-color: #242531;")),Tl=(0,u.ZP)(ve).attrs({gap:"0",align:"center",justifyContent:"center"}).withConfig({displayName:"column__Index"})(["\n  width: 4rem;\n  height: 3rem;\n"]),Ol=(0,u.ZP)(Cl).withConfig({displayName:"column__TimestampControls"})(["\n  justify-items: flex-start;\n"]),Rl=({action:e,disabled:t,column:n,index:r,onSetTimestamp:o,onFocus:a,timestamp:l,lastFocusedIndex:s})=>{const[c,d]=(0,i.useState)(n.name);return n?i.createElement(Nl,{key:n.name,odd:r%2!=0,disabled:t,onFocus:()=>a(r)},i.createElement(Tl,null,i.createElement(kl,{color:"foreground"},r+1)),i.createElement(ve,{flexDirection:"column",gap:"1rem",align:"stretch"},i.createElement(Cl,null,i.createElement(ml.Item,{name:`schemaColumns.${r}.name`},i.createElement(ml.Input,xl({placeholder:"Name",disabled:t,defaultValue:n.name,onChange:e=>d(e.target.value),name:`schemaColumns.${r}.name`,autoComplete:"off",required:!0},s===r&&{autoFocus:!0}))),i.createElement(ml.Item,{name:`schemaColumns.${r}.type`},i.createElement(ml.Select,{defaultValue:"import"===e?n.type:"STRING",name:`schemaColumns.${r}.type`,options:Sl.filter((t=>""!==t.value||"add"!==e))}))),"TIMESTAMP"===n.type&&i.createElement(ve,{flexDirection:"column",gap:"1rem"},i.createElement(Ol,null,"import"===e&&i.createElement(ml.Item,{name:`schemaColumns.${r}.pattern`},i.createElement(ml.Input,{name:`schemaColumns.${r}.pattern`,placeholder:"Pattern",defaultValue:""!==n.pattern?n.pattern:vl,required:!0})),i.createElement(We,{icon:i.createElement(yo.z,{disabled:""===c,skin:""!==l&&""!==n.name&&l===n.name?"success":"secondary",onClick:()=>o(n.name),type:"button",prefixIcon:i.createElement("input",{type:"checkbox",checked:""!==l&&""!==n.name&&l===n.name,onChange:()=>{}})},"Designated"),tooltip:"Mark this column as a designated timestamp",placement:"top"})),"import"===e&&i.createElement(Oe,{color:"gray2"},"Example: ",vl)),"GEOHASH"===n.type&&i.createElement(Cl,null,i.createElement(ml.Item,{name:`schemaColumns.${r}.precision`},i.createElement(ml.Input,{name:`schemaColumns.${r}.precision`,placeholder:"Precision",required:!0})),i.createElement(_l,{url:"https://questdb.io/docs/concept/geohashes/#specifying-geohash-precision",text:"Docs",tooltipText:"GEOHASH type documentation"})))):null},Il=(0,u.ZP)(ve).attrs({align:"center",gap:"1.5rem"}).withConfig({displayName:"columns__Disclaimer"})(["\n  width: 100%;\n  padding: 2rem;\n  color: ",";\n"],(({theme:e,isEditLocked:t})=>e.color[t?"orange":"foreground"])),Pl=u.ZP.div.withConfig({displayName:"columns__SchemaRoot"})(["\n  width: 100%;\n  height: 100%;\n"]),Ll=(0,u.ZP)(Fe.GroupItem).attrs({direction:"column"}).withConfig({displayName:"columns__Error"})(["\n  align-items: center;\n"]),Al=({action:e,isEditLocked:t,onColumnFocus:n,lastFocusedIndex:r})=>{const{formState:o,getValues:a,setValue:l,watch:s}=(0,Wi.Gc)(),c=s("timestamp"),d=a().schemaColumns,u=(0,i.useCallback)((o=>{const a=s(`schemaColumns.${o}`);return i.createElement(i.Fragment,null,i.createElement(Rl,{action:e,column:a,disabled:t,index:o,lastFocusedIndex:r,onFocus:n,onSetTimestamp:e=>{l("timestamp",c===e?"":e)},timestamp:c}))}),[c,d.length,d.map((e=>e.type)).join(",")]),m=o.errors.schemaColumns;return i.createElement(i.Fragment,null,"import"===e&&!t&&i.createElement(Il,{isEditLocked:!1},i.createElement(It.d,{size:"20px"}),i.createElement(Oe,{color:"foreground"},"Column names have to match the CSV header.",i.createElement("br",null),"Order is not important.")),m&&(Array.isArray(m)?m:[m]).map(((e,t)=>i.createElement(Ll,{key:t},i.createElement(Oe,{color:"red"},e.message)))),i.createElement(Pl,null,d.length>0&&i.createElement(St,{itemContent:u,totalCount:d.length,followOutput:!0})),i.createElement(ml.Input,{name:"timestamp",hidden:!0}))};var Bl=n(30476),Dl=n(57101),Ml=n(52998);const Fl=({action:e,ctaText:t,lastFocusedIndex:n,onAdded:r,isEditLocked:o})=>{const a={name:"",type:"import"===e?"":"STRING",pattern:"",precision:""},{insert:l}=(0,Wi.Dq)({name:"schemaColumns"}),{getValues:s,setValue:c}=(0,Wi.Gc)(),d=s().schemaColumns;return i.createElement(ve,{gap:"1rem"},!o&&i.createElement(i.Fragment,null,i.createElement(at,{trigger:i.createElement(yo.z,{disabled:0===d.length||void 0===n,skin:"secondary",type:"button",onClick:()=>{c("schemaColumns",d.filter(((e,t)=>t!==n))),r(void 0)}},i.createElement(Bl.X,{size:"18px"})),placement:"bottom"},i.createElement(Ct,null,void 0!==n&&`Remove column ${n+1}`)),i.createElement(at,{trigger:i.createElement(yo.z,{disabled:0===d.length||void 0===n,skin:"secondary",type:"button",onClick:()=>{const e=void 0!==n?n:d.length;l(e,a),r(e)}},i.createElement(Dl.v,{size:"20px"})),placement:"bottom"},i.createElement(Ct,null,void 0!==n?`Insert column above ${n+1}`:"Insert column")),i.createElement(at,{trigger:i.createElement(yo.z,{skin:"secondary",type:"button",onClick:()=>{const e=void 0!==n?n+1:d.length;l(e,a),r(e)}},i.createElement(Ml.D,{size:"20px"})),placement:"bottom"},i.createElement(Ct,null,void 0!==n?`Insert column below ${n+1}`:"Insert column"))),i.createElement(ml.Submit,{prefixIcon:i.createElement(Pt.i,{size:18}),variant:"success"},t))},ql=(0,u.ZP)(Fe.ContentWrapper).withConfig({displayName:"dialog__StyledContentWrapper"})(["\n  --columns: auto 120px; /* magic numbers to fit input, type dropdown and remove button nicely */\n"]),zl=(0,u.ZP)(ve).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"dialog__Items"})(["\n  height: 100%;\n"]),Zl=(0,u.ZP)(ve).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"dialog__Inputs"})(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"]),jl=u.ZP.div.withConfig({displayName:"dialog__Controls"})(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 1rem;\n  align-items: flex-start;\n  width: 100%;\n"],(({action:e})=>"add"===e?"auto 120px 120px":"1fr")),Ul=["NONE","HOUR","DAY","MONTH","YEAR"],Gl=({action:e,name:t,schema:n,partitionBy:r,timestamp:o,open:a,isEditLocked:l,hasWalSetting:c,walEnabled:d,onOpenChange:u,onSchemaChange:m,trigger:g,tables:f,ctaText:p})=>{const h={name:t,schemaColumns:n,partitionBy:r,timestamp:o,walEnabled:c?"false":void 0},[b,E]=(0,i.useState)(h),[y,w]=(0,i.useState)(h),[v,C]=(0,i.useState)(),_=(0,s.I0)(),x=()=>{E({name:t,schemaColumns:n,partitionBy:r,timestamp:o,walEnabled:c&&void 0!==d?d.toString():void 0})},S=fl().object({name:fl().string().required().custom(((t,n)=>pl(t)?"add"===e&&f?.find((e=>e.table_name===t))?n.error("string.uniqueTableName"):t:n.error("string.validTableName"))).messages({"string.empty":"Please enter a name","string.validTableName":"Invalid table name","string.uniqueTableName":"Table name must be unique"}),partitionBy:fl().string().required().custom(((e,t)=>"NONE"!==e&&""===y.timestamp?t.error("string.timestampRequired"):e)).messages({"string.timestampRequired":"Designated timestamp is required when partitioning is set to anything other than NONE"}),walEnabled:fl().any().allow("true","false").empty(),timestamp:fl().string().allow(""),schemaColumns:fl().array().custom(((t,n)=>"add"===e&&0===t.length?n.error("array.required"):t)).unique(((e,t)=>e.name===t.name)).messages({"array.required":"Please add at least one column","array.unique":"Column names must be unique"})});(0,i.useEffect)((()=>{n&&x()}),[n]),(0,i.useEffect)((()=>{a&&C(void 0)}),[a]);const k=b.schemaColumns.length;return i.createElement(Fe,{mode:"add"===e?"side":"modal",open:a,trigger:g??i.createElement(yo.z,{skin:k>0?"transparent":"secondary",prefixIcon:k>0?i.createElement(Vi.I,{size:"18px"}):i.createElement(Pt.i,{size:"18px"}),onClick:()=>u(t)},k>0?`${k} col${k>1?"s":""}`:"Add"),onDismiss:()=>{x(),u(void 0)},onOpenChange:t=>{t&&"add"===e&&_(Dn.setActiveSidebar(t?"create":void 0))}},i.createElement(ql,{mode:"add"===e?"side":"modal"},i.createElement(ml,{name:"table-schema",defaultValues:b,onSubmit:e=>{m(e),u(void 0)},onChange:e=>w(e),validationSchema:S},i.createElement(Pe.Header,{title:""!==t?`Table schema for ${t}`:"Create table",afterTitle:i.createElement(Fl,{ctaText:p,action:e,isEditLocked:l,lastFocusedIndex:v,onAdded:C})}),i.createElement(zl,null,i.createElement(Zl,null,i.createElement(Fe.GroupItem,{direction:"column"},i.createElement(jl,{action:e},"add"===e&&i.createElement(ml.Item,{name:"name",label:"Table name"},i.createElement(ml.Input,{name:"name",autoComplete:"off"})),i.createElement(ve,{align:"flex-end"},i.createElement(ml.Item,{name:"partitionBy",label:i.createElement(at,{trigger:i.createElement(ve,{align:"center",justifyContent:"center",gap:"0.5rem"},i.createElement(wl.Z,{size:"14"}),i.createElement("span",null,"Partition by")),placement:"bottom"},i.createElement(Ct,null,"Splits data into smaller chunks by intervals of time in order to improve the performance and scalability of the database system."))},i.createElement(ml.Select,{name:"partitionBy",options:Ul.map((e=>({label:e,value:e})))}))),c&&i.createElement(ve,{align:"flex-end"},i.createElement(ml.Item,{name:"walEnabled",label:i.createElement(at,{trigger:i.createElement(ve,{align:"center",justifyContent:"center",gap:"0.5rem"},i.createElement(wl.Z,{size:"14"}),i.createElement("span",null,"WAL")),placement:"bottom"},i.createElement(Ct,null,"WAL (Write-Ahead Log) allows concurrent data ingestion and modifications via multiple interfaces as well as table schema changes.","NONE"===y.partitionBy&&i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),"To enable WAL, set `Partition by` to a value other than NONE.")))},i.createElement(ml.Select,{name:"walEnabled",disabled:"NONE"===y.partitionBy,options:[{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}]}))),"import"===e&&i.createElement(Oe,{color:"gray2"},"If you're changing the partitioning strategy, you'll need to set `Write mode` to `Overwrite` in Settings."))),i.createElement(Fe.GroupHeader,null,i.createElement(Oe,{color:"foreground"},"Columns")),i.createElement(Al,{action:e,isEditLocked:l,onColumnFocus:C,lastFocusedIndex:v}))))))};var Hl=n(94646);const Vl=(0,u.ZP)(Hl.o).withConfig({displayName:"upload-result-dialog__SearchIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Wl=(0,u.ZP)(vi.i).withConfig({displayName:"upload-result-dialog__StyledTable"})(["\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: separate;\n  border-spacing: 0 2rem;\n  padding: 0 2rem;\n\n  th {\n    padding: 0 1.5rem;\n    color: ",";\n  }\n\n  td {\n    padding: 1.5rem;\n  }\n\n  tbody td {\n    background: #242531;\n\n    &:first-child {\n      border-top-left-radius: ",";\n      border-bottom-left-radius: ",";\n    }\n\n    &:last-child {\n      border-top-right-radius: ",";\n      border-bottom-right-radius: ",";\n    }\n  }\n"],(({theme:e})=>e.color.foreground),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius)),Ql=(0,u.ZP)(ve).attrs({justifyContent:"space-between",gap:"2rem"}).withConfig({displayName:"upload-result-dialog__Stat"})(["\n  width: 100%;\n"]),$l=(0,u.ZP)(yo.z).withConfig({displayName:"upload-result-dialog__DetailsButton"})(["\n  position: relative;\n"]),Yl=u.ZP.span.withConfig({displayName:"upload-result-dialog__NotificationCircle"})(["\n  position: absolute;\n  right: -0.4rem;\n  top: -0.4rem;\n  width: 0.8rem;\n  height: 0.8rem;\n  border-radius: 50%;\n  background-color: ",";\n"],(({theme:e})=>e.color.red)),Kl=({file:e})=>{const t=e.table_name??e.fileObject.name,n=[{label:"Header forced",value:e.uploadResult?.header.toString()},{label:"Table name",value:e.uploadResult?.location},{label:"Imported rows",value:e.uploadResult?.rowsImported.toLocaleString()},{label:"Rejected rows",value:e.uploadResult?.rowsRejected.toLocaleString()}],r=e.uploadResult?.columns.reduce(((e,t)=>e+t.errors),0)??0;return i.createElement(Fe,{title:i.createElement(ve,null,i.createElement(Vl,{size:20}),i.createElement(Oe,{color:"foreground"},"Import details for ",t)),trigger:i.createElement($l,{skin:"success",prefixIcon:i.createElement(Hl.o,{size:"14px"})},r>0&&i.createElement(Yl,null),"Details"),withCloseButton:!0},i.createElement(ve,{flexDirection:"column",gap:"0"},n.map((e=>i.createElement(Fe.GroupItem,{key:e.label,direction:"column"},i.createElement(Ql,null,i.createElement(Oe,{color:"gray2"},e.label),i.createElement(Oe,{color:"foreground"},e.value))))),i.createElement(Fe.GroupHeader,null,i.createElement(Oe,{color:"foreground"},"Table schema")),i.createElement(Wl,{columns:[{header:"Name",render:({data:e})=>i.createElement(Oe,{color:"foreground"},e.name)},{header:"Type",align:"flex-end",render:({data:e})=>i.createElement(Oe,{color:"foreground"},e.type)},{header:"Size",width:"100px",align:"flex-end",render:({data:e})=>i.createElement(Oe,{color:"foreground"},e.size.toLocaleString())},{header:"Errors",width:"100px",align:"flex-end",render:({data:e})=>i.createElement(Oe,{color:e.errors>0?"red":"foreground"},e.errors.toLocaleString())}],rows:e.uploadResult?.columns??[]})))},Xl=(0,u.ZP)(ve).attrs({flexDirection:"column"}).withConfig({displayName:"dropbox__Root"})(["\n  flex: 1;\n  width: 100%;\n  padding: 4rem 0 0;\n  gap: 2rem;\n  background: ",";\n  border: 3px dashed ",";\n  box-shadow: inset 0 0 10px 0 #1b1c23;\n  transition: all 0.15s ease-in-out;\n"],(({theme:e})=>e.color.backgroundLighter),(({isDragging:e})=>e?"#7f839b":"#333543")),Jl=({files:e,onFilesDropped:t,dialogOpen:n,render:r})=>{const[o,a]=(0,i.useState)(!1),[l,s]=(0,i.useState)([]),c=(0,i.useRef)(null),d=(0,i.useRef)(e.map((e=>e.table_name))),u=e=>{e.preventDefault(),e.stopPropagation(),a("dragenter"===e.type||"dragover"===e.type)},m=e=>{const n=((e,t)=>Array.from(e).filter((e=>t.includes(e.name))))(e,d.current);s(n),t(Array.from(e).filter((e=>!n.includes(e)))),c.current?.setAttribute("value","")},g=e=>{const t=e,n=t.clipboardData?.files;n&&m(n)};return(0,i.useEffect)((()=>()=>{window.removeEventListener("paste",g)}),[]),(0,i.useEffect)((()=>{n?window.removeEventListener("paste",g):window.addEventListener("paste",g)}),[n]),(0,i.useEffect)((()=>{d.current=e.map((e=>e.table_name))}),[e]),i.createElement(Xl,{onDragEnter:u,onDragOver:u,onDragLeave:u,onDrop:e=>{e.preventDefault(),e.stopPropagation(),a(!1),m(e.dataTransfer.files)},isDragging:o,"data-hook":"import-dropbox"},r({duplicates:l,addToQueue:m}))},es=(0,u.ZP)(ve).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"files-to-upload__Root"})(["\n  padding: 2rem;\n"]),ts=(0,u.ZP)(vi.i).withConfig({displayName:"files-to-upload__StyledTable"})(["\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: separate;\n  border-spacing: 0 2rem;\n\n  th {\n    padding: 0 1.5rem;\n  }\n\n  td {\n    padding: 1.5rem;\n  }\n\n  tbody td {\n    background: #242531;\n\n    &:first-child {\n      border-top-left-radius: ",";\n      border-bottom-left-radius: ",";\n    }\n\n    &:last-child {\n      border-top-right-radius: ",";\n      border-bottom-right-radius: ",";\n    }\n  }\n"],(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius)),ns=(0,u.ZP)(ve).attrs({justifyContent:"center"}).withConfig({displayName:"files-to-upload__EmptyState"})(["\n  width: 100%;\n  background: #242531;\n  border-radius: ",";\n  padding: 1rem;\n"],(({theme:e})=>e.borderRadius)),rs=(0,u.ZP)(ve).withConfig({displayName:"files-to-upload__FileTextBox"})(["\n  padding: 0 1.1rem;\n"]),os=u.ZP.span.withConfig({displayName:"files-to-upload__BrowseTextLink"})(["\n  text-decoration: underline;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: none;\n  }\n"]),as=({files:e,onDialogToggle:t,onFileRemove:n,onFilePropertyChange:r,onFileUpload:o,onFilesDropped:a,onViewData:l,dialogOpen:s})=>{const c=(0,i.useRef)(null),[d,u]=i.useState(),[m,g]=i.useState();return(0,i.useEffect)((()=>{t(void 0!==d||void 0!==m)}),[d,m]),i.createElement(Jl,{files:e,onFilesDropped:a,dialogOpen:s,render:({duplicates:t,addToQueue:a})=>i.createElement(es,null,i.createElement(ti.X,{level:3},"Upload queue"),i.createElement("input",{type:"file",id:"file",onChange:e=>{null!==e.target.files&&a(e.target.files)},multiple:!0,ref:c,style:{display:"none"},value:""}),i.createElement(Oe,{color:"foreground"},"You can drag and drop more files or"," ",i.createElement(os,{onClick:()=>{c.current?.click()}},"browse from disk")),t.length>0&&i.createElement(Oe,{color:"red"},"File",t.length>1?"s":""," already added to queue:"," ",t.map((e=>e.name)).join(", "),". Change target table name and try again."),i.createElement(ts,{columns:[{header:"File",align:"flex-start",...e.length>0&&{width:"400px"},render:({data:e})=>{const t=i.createElement(rs,{align:"center",gap:"1rem"},i.createElement(Oe,{color:"foreground"},R(e.fileObject.name,20)),i.createElement(Oe,{color:"gray2",size:"sm"},xi(e.fileObject.size)));return i.createElement(ve,{align:"center",gap:"1rem"},i.createElement(Ri.M,{size:"46px"}),i.createElement(ve,{gap:"1rem",align:"flex-4tart",flexDirection:"column"},e.fileObject.name.length>20&&i.createElement(at,{placement:"top",trigger:t},i.createElement(Ct,null,e.fileObject.name)),e.fileObject.name.length<=20&&t,i.createElement(ve,{gap:"1rem",align:"center"},i.createElement(Oi,{file:e}),!e.isUploading&&void 0!==e.uploadResult&&i.createElement(i.Fragment,null,i.createElement(Kl,{file:e}),i.createElement(yo.z,{skin:"secondary",prefixIcon:i.createElement(Ei.r,{size:"18px"}),onClick:()=>l(e.uploadResult)},"Result"))),e.uploadResult&&e.uploadResult.rowsRejected>0||e.error&&i.createElement(rs,{flexDirection:"column",gap:"1rem",align:"flex-start"},e.uploadResult&&e.uploadResult.rowsRejected>0&&i.createElement(Oe,{color:"orange",size:"sm"},e.uploadResult.rowsRejected.toLocaleString()," ","row",e.uploadResult.rowsRejected>1?"s":""," ","rejected"),e.error&&i.createElement(Oe,{color:"red",size:"sm"},e.error))))}},{header:"Table name",align:"flex-end",width:"200px",render:({data:e})=>i.createElement(yl,{open:d===e.id,onOpenChange:e=>u(e?.id),onNameChange:t=>{r(e.id,{table_name:t})},file:e})},{header:i.createElement(at,{placement:"top",trigger:i.createElement(ve,{align:"center",gap:"0.5rem"},"Schema",i.createElement(It.d,{size:"16px"}))},i.createElement(Ct,null,"Optional. By default, QuestDB will infer schema from the CSV file structure")),align:"center",width:"150px",render:({data:e})=>{const t=e.table_name??e.fileObject.name;return i.createElement(Gl,{action:"import",open:m===e.id,onOpenChange:t=>g(t?e.id:void 0),onSchemaChange:t=>{r(e.id,{schema:t.schemaColumns,partitionBy:t.partitionBy,timestamp:t.timestamp})},name:t,schema:e.schema,partitionBy:e.partitionBy,timestamp:e.timestamp,isEditLocked:e.exists&&e.table_name===e.fileObject.name,hasWalSetting:!1,ctaText:"Save"})}},{header:i.createElement(at,{placement:"top",trigger:i.createElement(ve,{align:"center",gap:"0.5rem"},"Write mode",i.createElement(It.d,{size:"16px"}))},i.createElement(Ct,null,i.createElement("strong",null,"Append"),": data will be appended to the set.",i.createElement("br",null),i.createElement("strong",null,"Overwrite"),": any existing data or structure will be overwritten. Required for partitioning and timestamp related changes.")),align:"center",width:"150px",render:({data:e})=>i.createElement(Ci.P,{name:"overwrite",defaultValue:e.settings.overwrite?"true":"false",onChange:t=>r(e.id,{settings:{...e.settings,overwrite:"true"===t.target.value}}),options:[{label:"Append",value:"false"},{label:"Overwrite",value:"true"}]})},{align:"flex-end",width:"300px",render:({data:e})=>i.createElement(Gi,{file:e,onUpload:o,onRemove:n,onSettingsChange:t=>{r(e.fileObject.name,{settings:t})}})}],rows:e}),0===e.length&&i.createElement(ns,null,i.createElement(Oe,{color:"gray2",align:"center"},"No files in queue")))})},is=e=>e.startsWith("GEOHASH"),ls=e=>{const t=/\(([^)]+)\)/g.exec(e);return t&&t.length>1?t[1]:""},ss=e=>is(e)?"GEOHASH":e.toUpperCase(),cs=e=>"GEOHASH"===e.type?{...e,type:`GEOHASH(${e.precision})`}:e,ds=()=>("00000000000000000"+(0x10000000000000000*Math.random()).toString(16)).slice(-16),us=()=>{const e=ds(),t=ds();return e.slice(0,8)+"-"+e.slice(8,12)+"-4"+e.slice(13)+"-a"+t.slice(1,4)+"-"+t.slice(4)};var ms=n(56216),gs=n(17093);const fs=(0,u.ZP)(ve).attrs({flexDirection:"column"}).withConfig({displayName:"upload__Actions"})(["\n  margin: auto;\n"]),ps=u.ZP.div.withConfig({displayName:"upload__Caution"})(["\n  margin-top: auto;\n  padding: 2rem;\n  width: 100%;\n  background: ",";\n  text-align: center;\n"],(({theme:e})=>e.color.backgroundDarker)),hs=(0,u.ZP)(gs.x).withConfig({displayName:"upload__CautionText"})(["\n  color: #8b8fa7;\n\n  a {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.foreground)),bs=({files:e,onFilesDropped:t,dialogOpen:n})=>{const r=(0,i.useRef)(null);return i.createElement(Jl,{files:e,onFilesDropped:t,dialogOpen:n,render:({duplicates:e,addToQueue:t})=>i.createElement(i.Fragment,null,i.createElement(fs,null,i.createElement("img",{alt:"File upload icon",width:"60",height:"80",src:"/assets/upload.svg"}),i.createElement(ti.X,{level:3},"Drag CSV files here or paste from clipboard"),i.createElement("input",{type:"file",id:"file",onChange:e=>{null!==e.target.files&&t(e.target.files)},multiple:!0,ref:r,style:{display:"none"},value:""}),i.createElement(yo.z,{onClick:()=>{r.current?.click()},prefixIcon:i.createElement(ms.L,{size:"18px"}),skin:"secondary"},"Browse from disk"),e.length>0&&i.createElement(gs.x,{color:"red"},"File",e.length>1?"s":""," already added to queue:"," ",e.map((e=>e.name)).join(", "),". Change target table name and try again.")),i.createElement(ps,null,i.createElement(hs,null,"Suitable for small batches of CSV file upload. For database migrations, we recommend the"," ",i.createElement("a",{href:"https://questdb.io/docs/guides/importing-data",target:"_blank",rel:"noopener noreferrer"},"COPY SQL")," ","command.")))})},Es=(0,u.ZP)(ve).attrs({gap:"4rem",flexDirection:"column"}).withConfig({displayName:"ImportCSVFiles__Root"})(["\n  flex: 1;\n"]),ys=({onViewData:e,onUpload:t})=>{const{quest:n}=(0,i.useContext)(Mt),[r,o]=(0,i.useState)([]),[a,l]=(0,i.useState)(!1),c=(0,s.v9)(ur.query.getTables),d=(0,i.useRef)(null),u=(e=>{const[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const t=new IntersectionObserver((([e])=>n(e.isIntersecting)));return e.current&&t.observe(e.current),()=>{t.disconnect()}}),[e]),t})(d),[m,g]=(0,i.useState)("upload"),f=(e,t)=>{o((n=>n.map((n=>n.id===e?{...n,...t}:n))))},p=(e,t)=>{f(e.id,{isUploading:t})},h=async e=>{const t=await(async e=>await Promise.all(e.map((async e=>{const t=await n.checkCSVFile(e.name),r=t.status===T.EXISTS?await(async()=>{const t=await n.showColumns(e.name);return t&&t.type===N.DQL?t.data.map((e=>({name:e.column,type:ss(e.type),pattern:Bi,precision:is(e.type)?ls(e.type):""}))):[]})():[],o=t.status===T.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.partitionBy??"NONE"})():"NONE",a=t.status===T.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.designatedTimestamp??""})():"";return{id:us(),fileObject:e,table_name:e.name,status:t.status,exists:t.status===T.EXISTS,schema:r,partitionBy:o,timestamp:a,settings:{forceHeader:!1,overwrite:!1,skipLev:!1,delimiter:"",atomicity:"skipCol",maxUncommitedRows:Di},isUploading:!1,uploaded:!1,uploadResult:void 0,uploadProgress:0}}))))(e);o((e=>[...e,...t])),g("list")};return(0,i.useEffect)((()=>{u&&(async()=>{const e=await Promise.all(r.map((async e=>{const t=await n.checkCSVFile(e.table_name);return{...e,status:t.status}})));o(e)})()}),[u]),i.createElement(Es,{ref:d},"upload"===m&&i.createElement(bs,{files:r,onFilesDropped:h,dialogOpen:a}),"list"===m&&i.createElement(as,{dialogOpen:a,files:r,onViewData:e,onFilesDropped:h,onDialogToggle:l,onFileUpload:async e=>{const o=r.find((t=>t.id===e));if(!o.isUploading){p(o,!0);try{const e=await n.uploadCSVFile({file:o.fileObject,name:o.table_name,settings:o.settings,schema:o.schema.map(cs),partitionBy:o.partitionBy,timestamp:o.timestamp,onProgress:e=>{f(o.id,{uploadProgress:e})}});f(o.id,{uploaded:"OK"===e.status,uploadResult:"OK"===e.status?e:void 0,schema:"OK"===e.status?e.columns.map((e=>{const t=o.schema.find((t=>t.name===e.name));return{...B(e,["name"]),type:ss(e.type),pattern:"TIMESTAMP"===e.type?t?.pattern?t?.pattern:Bi:"",precision:is(e.type)?ls(e.type):void 0}})):o.schema,error:"OK"===e.status?void 0:e.status}),p(o,!1),t(e)}catch(e){p(o,!1),f(o.id,{uploaded:!1,uploadResult:void 0,uploadProgress:0,error:"Upload error"})}}},onFileRemove:e=>{const t=r.find((t=>t.id===e));o(r.filter((e=>e.fileObject.name!==t.fileObject.name)))},onFilePropertyChange:async(e,t)=>{const a=await Promise.all(r.map((async r=>{if(r.id===e){const e=t.table_name?await n.checkCSVFile(t.table_name):await Promise.resolve({status:r.status});return{...r,...t,status:e.status,error:t.table_name?void 0:r.error}}return r})));o(a)}}))},ws=()=>i.createElement(nt,null,i.createElement(tt,null,i.createElement(ys,{onUpload:e=>{bus.trigger(b.MSG_QUERY_SCHEMA)},onViewData:e=>{"OK"===e.status&&(bus.trigger(b.MSG_QUERY_SCHEMA),bus.trigger(b.MSG_QUERY_FIND_N_EXEC,{query:`"${e.location}"`,options:{appendAt:"end"}}))}})));var vs=n(55863);function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cs.apply(this,arguments)}const _s=u.ZP.div.withConfig({displayName:"Console__Root"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  max-height: 100%;\n"]),xs=u.ZP.div.withConfig({displayName:"Console__Top"})(["\n  display: flex;\n  height: 100%;\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n"]),Ss=u.ZP.div.withConfig({displayName:"Console__Bottom"})(["\n  display: flex;\n  height: 100%;\n  flex: 1;\n  min-height: 0px;\n"]),ks=u.ZP.div.withConfig({displayName:"Console__Tab"})(["\n  display: flex;\n  width: calc(100% - 4.5rem);\n  height: 100%;\n  overflow: auto;\n"]),Ns=[{icon:i.createElement(Ei.r,{size:w}),mode:"grid",tooltipText:"Grid"},{icon:i.createElement(Lt.u,{size:w}),mode:"chart",tooltipText:"Chart"}],Ts=()=>{const e=(0,s.I0)(),{sm:t}=He(),{editorSplitterBasis:n,resultsSplitterBasis:r,updateSettings:o}=pi(),[a,l]=(0,i.useState)(0!==r?r:300),c=(0,s.v9)(ur.query.getResult),d=(0,s.v9)(ur.console.getActiveBottomPanel),{readOnly:u}=(0,s.v9)(ur.console.getConfig),[m,g]=(0,i.useState)("grid"),f=i.useRef(null),p=i.useRef(null),h=i.useRef(null),b=i.useRef(null);return(0,i.useEffect)((()=>{f.current&&c?e(Dn.setActiveBottomPanel("result")):p.current&&e(Dn.setActiveBottomPanel("zeroState"))}),[c]),(0,i.useEffect)((()=>{var e;e=d,f.current&&(f.current.style.display="result"===e?"flex":"none"),p.current&&(p.current.style.display="zeroState"===e?"flex":"none"),h.current&&(h.current.style.display="import"===e?"flex":"none")}),[d]),i.createElement(_s,null,i.createElement(vs.oL,{vertical:!0,onDragEnd:e=>{o(Ht.EDITOR_SPLITTER_BASIS,e[0])}},i.createElement(vs.oL.Pane,{minSize:100,preferredSize:n},i.createElement(xs,null,i.createElement(hi,{align:"top"},!t&&i.createElement(at,{placement:"bottom",trigger:i.createElement(bi,{"data-hook":"tables-panel-button",direction:"left",onClick:()=>{e(Dn.setActiveTopPanel(0===r?"tables":void 0)),o(Ht.RESULTS_SPLITTER_BASIS,0===r?a:0)},selected:0!==r},i.createElement(yi.L,{size:w}))},i.createElement(Ct,null,0===r?"Show":"Hide"," tables"))),i.createElement(vs.oL,{ref:b,onDragEnd:e=>{0!==e[0]&&l(e[0]),o(Ht.RESULTS_SPLITTER_BASIS,e[0])},snap:!0},i.createElement(vs.oL.Pane,{preferredSize:r,visible:0!==r&&!t},i.createElement(ei,null)),i.createElement(vs.oL.Pane,null,i.createElement($o,null))))),i.createElement(vs.oL.Pane,{minSize:100},i.createElement(Ss,null,i.createElement(hi,{align:"bottom"},c&&Ns.map((({icon:t,mode:n,tooltipText:r})=>i.createElement(at,{key:n,placement:"right",trigger:i.createElement(bi,{"data-hook":`${n}-panel-button`,direction:"left",onClick:()=>{e(Dn.setActiveBottomPanel("result")),g(n)},selected:"result"===d&&m===n},t)},i.createElement(Ct,null,r)))),i.createElement(at,{placement:"right",trigger:i.createElement(Et,Cs({readOnly:u},!u&&{onClick:()=>{e(Dn.setActiveBottomPanel("import"))}},{selected:"import"===d,"data-hook":"import-panel-button"}),i.createElement(wi.C,{size:w}))},i.createElement(Ct,null,u?"To use this feature, turn off read-only mode in the configuration file":"Import files from CSV"))),i.createElement(ks,{ref:f},c&&i.createElement(wa,{viewMode:m})),i.createElement(ks,{ref:p},i.createElement(di,null)),i.createElement(ks,{ref:h},i.createElement(ws,null))))))},Os=u.ZP.div.withConfig({displayName:"SideMenu__Backdrop"})(["\n  position: fixed;\n  top: 4rem;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.3);\n  z-index: 24;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]),Rs=u.ZP.div.withConfig({displayName:"SideMenu__Wrapper"})(["\n  position: fixed;\n  top: 4rem;\n  right: 0;\n  bottom: 0;\n  width: ","px;\n  background: ",";\n  border-left: 1px solid ",";\n  z-index: 25;\n\n  &.side-menu-slide-enter {\n    width: 0;\n  }\n\n  &.side-menu-slide-enter-active {\n    width: ","px;\n    transition: width ","ms;\n  }\n\n  &.side-menu-slide-exit {\n    width: ","px;\n  }\n\n  &.side-menu-slide-exit-active {\n    width: 0;\n    transition: width ","ms;\n  }\n"],280,I("backgroundDarker"),I("black"),280,V.REG,280,V.REG),Is=()=>{const e=(0,s.v9)(ur.console.getSideMenuOpened),t=(0,s.I0)(),n=(0,i.useCallback)((()=>{t(Dn.toggleSideMenu())}),[t]);return i.createElement(i.Fragment,null,i.createElement(ot.Z,{classNames:"fade-reg",in:e,timeout:V.REG,unmountOnExit:!0},i.createElement(Os,{onClick:n})),i.createElement(ot.Z,{classNames:"side-menu-slide",in:e,timeout:V.REG,unmountOnExit:!0},i.createElement(Rs,null,i.createElement(ei,null))))};var Ps=n(7786),Ls=n(57783),As=n(94332),Bs=n(30901),Ds=n(38716),Ms=n(68122),Fs=n(25568);const qs=(0,u.iv)(["\n  background: ",";\n"],I("selection")),zs=u.ZP.div.withConfig({displayName:"Row__Wrapper"})(["\n  display: flex;\n  height: 2.4rem;\n  padding: 0 0.6rem;\n  line-height: 2.4rem;\n  align-items: center;\n  transition: background ","ms;\n  cursor: pointer;\n  user-select: none;\n\n  ",";\n\n  > span:not(:last-child) {\n    margin-right: 0.6rem;\n  }\n"],V.FAST,(({active:e})=>e&&qs)),Zs=(0,u.ZP)(Oe).withConfig({displayName:"Row__Value"})(["\n  flex: 1 1 auto;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  opacity: 0.7;\n"]),js=(0,u.ZP)(Fs.E).withConfig({displayName:"Row__FileIcon"})(["\n  height: 2.2rem;\n  flex: 0 0 12px;\n  margin: 0 0.6rem;\n  color: ",";\n"],I("orange")),Us=(0,u.ZP)(Oe).withConfig({displayName:"Row__Name"})(["\n  flex: 0 0 auto;\n"]),Gs=({active:e,onMouseEnter:t,onMouseLeave:n,onClick:r,query:o})=>i.createElement(zs,{active:e,onClick:r,onMouseEnter:t,onMouseLeave:n},i.createElement(js,{size:"12px"}),o.name&&i.createElement(Us,{color:"foreground",size:"sm"},o.name),i.createElement(Zs,{color:"foreground",size:"sm"},o.value));function Hs(){return Hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hs.apply(this,arguments)}const Vs=u.ZP.div.withConfig({displayName:"QueryPicker__Wrapper"})(["\n  display: flex;\n  max-height: 650px;\n  width: 600px;\n  max-width: 100vw;\n  padding: 0.6rem 0;\n  flex-direction: column;\n  background: ",";\n  box-shadow: "," 0px 5px 8px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  overflow: auto;\n"],I("backgroundDarker"),I("black"),I("black")),Ws=(0,u.ZP)(Oe).withConfig({displayName:"QueryPicker__Helper"})(["\n  padding: 1rem;\n  text-align: center;\n  opacity: 0.5;\n"]),Qs=(0,u.ZP)(Oe).withConfig({displayName:"QueryPicker__Esc"})(["\n  padding: 0 2px;\n  background: ",";\n  border-radius: 2px;\n"],I("foreground")),$s=({type:e})=>"query"===e,Ys=(0,u.ZP)(Oe).withConfig({displayName:"QueryPicker__Title"})(["\n  padding: 0.6rem 1.2rem 0.4rem;\n  margin-top: 0.6rem;\n  border-top: 1px solid ",";\n  background: ",";\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.black40)),Ks=(0,u.ZP)(Oe).withConfig({displayName:"QueryPicker__Description"})(["\n  padding: 0 1.2rem 1rem;\n  color: ",";\n  opacity: 0.7;\n  background: ",";\n"],(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.black40)),Xs=({hidePicker:e,queries:t,ref:n})=>{const r=qe("ArrowDown"),o=qe("ArrowUp"),a=qe("Enter"),[l,s]=(0,i.useState)(-1),[c,d]=(0,i.useState)([]),{appendQuery:u}=an();(0,i.useEffect)((()=>{d((e=>{const t=[...e],n=[];let r=0;for(;t.length;){const e=t.shift();if(void 0===e.queries)n.push({type:"query",id:r,data:e});else{const o=e;n.push({type:"descriptor",id:r,data:o}),t.unshift(...o.queries)}r++}return n})(t))}),[t]);const m=(0,i.useCallback)((t=>{e(),u(t.value)}),[e]);return(0,i.useEffect)((()=>{if(c.length){if(r){const e=c.find($s)?.id??0,t=c.slice(l+1).find($s)?.id??e;s(t)}if(o){const e=[...c].reverse(),t=e.find($s)?.id??c.length-1,n=[...c].slice(0,l).reverse().find($s)?.id??t;s(n)}}}),[o,r,c]),(0,i.useEffect)((()=>{if(a){const e=c.find((({id:e,type:t})=>e===l&&"query"===t));e&&m(e.data)}}),[l,a,e,t,m]),i.createElement(Vs,{ref:n},i.createElement(Ws,{_style:"italic",color:"foreground",size:"xs"},"Navigate the list with ",i.createElement(Ds.j,{size:"16px"}),i.createElement(Ms.o,{size:"16px"})," keys, exit with",i.createElement(Qs,{_style:"normal",size:"ms",weight:700},"Esc")),c.map((t=>{if("query"===t.type){const n=t.data;return i.createElement(Gs,{active:t.id===l,hidePicker:e,key:t.id,onClick:()=>m(n),onMouseEnter:()=>s(t.id),onMouseLeave:()=>s(-1),query:n})}const{title:n,description:r}=t.data;return i.createElement(i.Fragment,{key:t.id},i.createElement(Ys,{color:"foreground",size:"md"},n),i.createElement(Ks,{color:"foreground"},r))})))},Js=(e,t)=>i.createElement(Xs,Hs({},e,{ref:t})),ec=(0,i.forwardRef)(Js);var tc=n(62712);const nc=(0,u.ZP)(xe).withConfig({displayName:"Menu__Wrapper"})(["\n  width: 100%;\n  background: transparent;\n  z-index: 15;\n  padding-right: 1rem;\n\n  .algolia-autocomplete {\n    display: "," !important;\n    flex: 0 1 168px;\n  }\n"],(({_display:e})=>e)),rc=u.ZP.div.withConfig({displayName:"Menu__Separator"})(["\n  flex: 1;\n"]),oc=(0,u.ZP)(ae).withConfig({displayName:"Menu__QueryPickerButton"})(["\n  position: relative;\n  margin: 0 1rem;\n  flex: 0 0 auto;\n\n  ","\n"],(({firstTimeVisitor:e})=>e&&'&:after {\n    border-radius: 50%;\n    content: "";\n    background: #dc4949;\n    width: 8px;\n    height: 8px;\n    position: absolute;\n    top: -3px;\n    right: -3px;\n  }')),ac=(0,u.ZP)(Bs.v).withConfig({displayName:"Menu__MenuIcon"})(["\n  color: ",";\n"],I("foreground")),ic=(0,u.ZP)(Ee.x).withConfig({displayName:"Menu__CloseIcon"})(["\n  color: ",";\n"],I("foreground")),lc=(0,u.ZP)(fe).withConfig({displayName:"Menu__SideMenuMenuButton"})(["\n  padding: 0;\n\n  .fade-enter {\n    opacity: 0;\n  }\n\n  .fade-enter-active {\n    opacity: 1;\n    transition: opacity ","ms;\n  }\n\n  .fade-exit {\n    opacity: 0;\n  }\n\n  .fade-exit-active {\n    opacity: 1;\n    transition: opacity ","ms;\n  }\n"],V.REG,V.REG),sc=u.ZP.div.withConfig({displayName:"Menu__MenuItems"})(["\n  display: grid;\n  grid-auto-flow: column;\n  align-items: center;\n"]),cc=()=>{const e=(0,s.I0)(),[t,n]=(0,i.useState)(),r=qe("Escape"),{savedQueries:o}=(0,s.v9)(ur.console.getConfig),a=(0,s.v9)(ur.query.getRunning),l=(0,s.v9)(ur.console.getSideMenuOpened),{sm:c}=He(),{exampleQueriesVisited:d,updateSettings:u}=pi(),m=(0,i.useCallback)((()=>{e(Zn())}),[e]),g=(0,i.useCallback)((e=>{!d&&e&&u(Ht.EXAMPLE_QUERIES_VISITED,!0),n(e)}),[]),f=(0,i.useCallback)((()=>{n(!1)}),[]),p=(0,i.useCallback)((()=>{e(Dn.toggleSideMenu())}),[e]);return(0,i.useEffect)((()=>{n(!1)}),[r]),(0,i.useEffect)((()=>{!c&&l&&e(Dn.toggleSideMenu())}),[e,l,c]),i.createElement(nc,{_display:c?"none":"inline"},i.createElement(rc,null),o.length>0&&i.createElement(it,{active:t,onToggle:g,trigger:i.createElement(oc,{firstTimeVisitor:!d},i.createElement(Ps.m,{size:"18px"}),i.createElement("span",null,"Example queries"))},i.createElement(ec,{hidePicker:f,queries:o})),i.createElement(rc,null),a.value&&i.createElement(ue,{onClick:m},i.createElement(Ls.d,{size:"18px"}),i.createElement("span",null,"Cancel")),!a.value&&i.createElement(se,{title:"Ctrl+Enter",onClick:m},i.createElement(As.s,{size:"18px"}),i.createElement("span",null,"Run")),i.createElement(sc,null,i.createElement(tc.F,{appId:"QL9L2YL7AQ",apiKey:"2f67aeacbe73ad08a49efb9214ea27f3",indexName:"questdb",placeholder:"Search docs",translations:{button:{buttonText:"Search docs"}},hitComponent:({hit:e,children:t})=>i.createElement("a",{href:e.url,target:"_blank",rel:"noreferrer"},t),navigator:{navigate:({itemUrl:e})=>window.open(e,"_blank")}})),c&&i.createElement(lc,{onClick:p},i.createElement(ot.Z,{classNames:"fade",in:l,timeout:V.REG},l?i.createElement(ic,{size:"26px"}):i.createElement(ac,{size:"26px"}))))};var dc=n(90738);const uc=(0,u.ZP)(ni.x).attrs({align:"center"}).withConfig({displayName:"version__Root"})(["\n  gap: 1.5rem;\n  flex-shrink: 0;\n  padding-left: 1.5rem;\n"]),mc=(0,u.ZP)(ni.x).attrs({align:"center"}).withConfig({displayName:"version__Tag"})(["\n  height: 2.8rem;\n  border-radius: 0.8rem;\n  padding: 0 1rem;\n  font-family: ",";\n  font-size: 1.6rem;\n  font-weight: 600;\n"],(({theme:e})=>e.fontMonospace)),gc=(0,u.ZP)(mc).withConfig({displayName:"version__Badge"})(["\n  color: #191a21;\n  background: #bbbbbb;\n\n  ","\n\n  ","\n\n  ","\n"],(({theme:e,instance_rgb:t})=>"r"===t&&`\n    color: ${e.color.foreground};\n    background: #c7072d;\n  `),(({theme:e,instance_rgb:t})=>"g"===t&&`\n    color: ${e.color.foreground};\n    background: #00aa3b;\n  `),(({theme:e,instance_rgb:t})=>"b"===t&&`\n    color: ${e.color.foreground};\n    background: #007aff;\n  `)),fc=(0,u.ZP)(ni.x).attrs({gap:"0.5rem"}).withConfig({displayName:"version__User"})(["\n  background: ",";\n  border-radius: 0.4rem;\n  height: 3rem;\n  padding: 0 1rem;\n  font-weight: 600;\n"],(({theme:e})=>e.color.backgroundLighter)),pc=()=>{const{quest:e}=(0,i.useContext)(Mt),t=(0,s.v9)(ur.query.getResult),[n,r]=(0,i.useState)(null),o=async()=>{try{const t=await e.query("SELECT instance_name, instance_rgb, current_user",{limit:"0,1"});t.type===N.DQL&&1===t.count&&r({instance_name:t.data[0].instance_name,instance_rgb:t.data[0].instance_rgb,current_user:t.data[0].current_user})}catch(e){return}};return(0,i.useEffect)((()=>{o()}),[]),(0,i.useEffect)((()=>{t&&t.type===N.DDL&&o()}),[t]),i.createElement(uc,null,i.createElement(Oe,{color:"foreground"},"Web Console"),n&&i.createElement(ni.x,{gap:"0.5rem"},n.instance_name&&i.createElement(gc,{instance_rgb:n.instance_rgb},n.instance_name),n.current_user&&i.createElement(fc,null,i.createElement(dc.n,{size:"18px"}),i.createElement(Oe,{color:"foreground"},n.current_user))))};var hc=n(76378);const bc=(0,u.ZP)(Et).withConfig({displayName:"back-button__Root"})(["\n  margin-left: 0.5rem;\n"]),Ec=({onClick:e,label:t})=>i.createElement(at,{placement:"right",modifiers:[{name:"offset",options:{offset:[5,15]}}],trigger:i.createElement(bc,{onClick:e},i.createElement(hc.X,{size:w}))},i.createElement(Ct,null,t||"Back to the Cloud")),yc=(0,u.ZP)(ni.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"TopBar__Root"})(["\n  width: 100%;\n  height: 4.5rem;\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),wc=()=>{const e=(0,tn.useLiveQuery)((async()=>({returnTo:(await $t.editor_settings.where("key").equals("returnTo").first())?.value??"",returnToLabel:(await $t.editor_settings.where("key").equals("returnToLabel").first())?.value??""})),[]);return i.createElement(yc,null,e?.returnTo&&i.createElement(Ec,{label:e?.returnToLabel,onClick:()=>{window.location.href=e.returnTo}}),i.createElement(pc,null),i.createElement(cc,null))};var vc=n(20281),Cc=n(9173);const _c=u.ZP.span.withConfig({displayName:"UnreadItemsIcon__Root"})(["\n  position: relative;\n"]),xc=u.ZP.span.withConfig({displayName:"UnreadItemsIcon__Tick"})(["\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 1.3rem;\n  height: 1.3rem;\n  border-radius: 50%;\n  background-color: ",";\n"],(({theme:e})=>e.color.red)),Sc=u.ZP.span.withConfig({displayName:"UnreadItemsIcon__Count"})(["\n  position: absolute;\n  left: 100%;\n  top: -50%;\n  font-size: ",";\n  border-radius: 6px;\n  background-color: #c64242;\n  color: ",";\n  padding: 0.2rem 0.4rem;\n"],(({theme:e})=>e.fontSize.ms),(({theme:e})=>e.color.white)),kc=({icon:e,label:t,tick:n,count:r})=>i.createElement(_c,null,"number"==typeof r&&r>0&&i.createElement(Sc,null,r),e,n&&i.createElement(xc,null),t&&i.createElement("span",null,t)),Nc=u.ZP.div.withConfig({displayName:"thumbnail__Root"})(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 100%;\n  margin: 2rem 0;\n  border-radius: ",";\n  box-shadow: 0 7px 30px -10px ",";\n  overflow: hidden;\n  background: ",";\n\n  svg {\n    position: absolute;\n  }\n"],(({theme:e})=>e.borderRadius),(({theme:e})=>e.color.black),(({theme:e})=>e.color.backgroundLighter)),Tc=u.ZP.img.withConfig({displayName:"thumbnail__ThumbImg"})(["\n  width: 46rem;\n  height: auto;\n\n  ","\n"],(({loaded:e})=>`\n    opacity: ${e?1:0};\n    transition: opacity 0.2s ease-in-out;\n  `)),Oc=({src:e,alt:t,width:n,height:r,containerWidth:o})=>{const[a,l]=(0,i.useState)(!1),s=o,c=s/n*r;return(0,i.useEffect)((()=>{const t=new Image;t.src=e,t.onload=()=>{l(!0)}}),[e]),i.createElement(Nc,null,!a&&i.createElement(Cc.a,null),i.createElement(Tc,{src:e,alt:t,width:s,height:c,loaded:a}))};var Rc=n(59590);const Ic="10deg",Pc=(0,u.F4)(["\n  0%, 50%, 100% {\n    transform: rotate(0);\n  }\n\n  10%, 20%, 30% {\n    transform: rotate(-",");\n  }\n\n  15%, 25%, 40% {\n    transform: rotate(",");\n  }\n"],Ic,Ic),Lc=(0,u.iv)(["\n  animation: "," 2s infinite ease-in-out;\n  transform-origin: 50% 0;\n"],Pc),Ac=(0,u.ZP)(Rc.d).withConfig({displayName:"bell__Bell"})(["\n  color: ",";\n\n  ","\n"],(({theme:e,$unread:t})=>e.color[t?"foreground":"inherit"]),(({$unread:e})=>e&&Lc));function Bc(){return Bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bc.apply(this,arguments)}const Dc=u.ZP.div.withConfig({displayName:"News__Loading"})(["\n  display: grid;\n  grid-auto-flow: column;\n  gap: 1rem;\n  justify-self: center;\n  margin-top: 2rem;\n"]),Mc=u.ZP.div.withConfig({displayName:"News__Items"})(["\n  display: grid;\n  width: 100%;\n  overflow: auto;\n"]),Fc=u.ZP.div.withConfig({displayName:"News__Item"})(["\n  display: grid;\n  gap: 1rem;\n  padding: 2rem;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n"],(({theme:e})=>e.color.backgroundLighter)),qc=u.ZP.h2.withConfig({displayName:"News__Title"})(["\n  margin: 0;\n  font-size: 2rem;\n"]),zc=(0,u.ZP)(Oe).attrs({color:"foreground"}).withConfig({displayName:"News__NewsText"})(["\n  a {\n    color: ",";\n  }\n\n  h2 {\n    font-size: 1.8rem;\n  }\n\n  h3 {\n    font-size: 1.6rem;\n  }\n\n  p {\n    font-size: ",";\n    line-height: 1.75;\n  }\n\n  code {\n    background-color: ",";\n    padding: 0.2rem 0.4rem;\n    border-radius: 0.2rem;\n  }\n\n  li:not(:last-child) {\n    margin-bottom: 0.5rem;\n  }\n"],(({theme:e})=>e.color.cyan),(({theme:e})=>e.fontSize.lg),(({theme:e})=>e.color.selection)),Zc=()=>{const e=(0,s.I0)(),{quest:t}=(0,i.useContext)(Mt),n=(0,s.v9)(ur.telemetry.getConfig),[r,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(void 0),[u,m]=(0,i.useState)(!1),[g,f]=(0,i.useState)([]),[p,h]=(0,i.useState)(!1),b=(0,s.v9)(ur.console.getActiveSidebar),E=async()=>{o(!0),l(!1);try{const e=await t.getNews({category:"enterprise",telemetryConfig:n});d(e)}catch(e){l(!0)}finally{o(!1)}};return(0,i.useEffect)((()=>(E(),window.addEventListener("focus",E),()=>window.removeEventListener("focus",E))),[]),(0,i.useEffect)((()=>{c&&(async()=>{if(c){const e=await $t.read_notifications.toArray(),t=c.map((e=>e.id)).filter((t=>!e.find((e=>e.newsId===t))));f(t),h(t?.length>0)}})()}),[c]),(0,i.useEffect)((()=>{c&&(u?(async()=>{if(c){const e=c.map((e=>e.id)),t=(await $t.read_notifications.toArray()).map((e=>e.newsId)),n=e.filter((e=>!t.includes(e)));await $t.read_notifications.bulkPut(n.map((e=>({newsId:e}))),{allKeys:!0}),h(!1)}})():f([]))}),[u,c]),(0,i.useEffect)((()=>{m("news"===b)}),[b]),i.createElement(Fe,{mode:"side",title:"QuestDB News",open:u,onOpenChange:async t=>{e(Dn.setActiveSidebar(t?"news":void 0))},trigger:i.createElement(We,{icon:i.createElement(Et,{"data-hook":"news-panel-button",onClick:()=>m(!u),selected:u},i.createElement(kc,{icon:i.createElement(Ac,{size:w,$unread:p}),tick:p})),placement:"left",tooltip:"QuestDB News"})},i.createElement(Fe.ContentWrapper,{mode:"side"},i.createElement(Mc,null,r&&!c&&i.createElement(Dc,null,i.createElement(Oe,{color:"foreground"},"Loading news..."),i.createElement(Cc.a,null)),a&&i.createElement(Dc,null,i.createElement(Oe,{color:"red"},"Error loading news. Please try again shortly.")),(!r||c)&&!a&&c&&c.map(((e,t)=>i.createElement(Fc,{key:`${t}-${e.title}`,unread:void 0!==g.find((t=>e.id===t))},i.createElement(qc,null,e.title),i.createElement(Oe,{color:"gray2"},e.date),e.thumbnail&&e.thumbnail.length>0&&e.thumbnail[0].thumbnails.large&&i.createElement(Oc,{containerWidth:460,src:e.thumbnail[0].thumbnails.large.url,alt:`${e.title} thumbnail`,width:e.thumbnail[0].thumbnails.large.width,height:e.thumbnail[0].thumbnails.large.height}),i.createElement(zc,null,i.createElement(vc.D,{components:{a:({node:e,children:t,...n})=>i.createElement("a",Bc({},n.href?.startsWith("http")?{target:"_blank",rel:"noopener noreferrer"}:{},n),t)}},e.body))))))))};function jc(){return jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jc.apply(this,arguments)}const Uc=()=>{const[e,t]=(0,i.useState)(void 0),n=(0,s.I0)(),r=(0,s.v9)(ur.query.getTables),o=(0,s.v9)(ur.console.getActiveSidebar),{readOnly:a}=(0,s.v9)(ur.console.getConfig),{appendQuery:l}=an();return(0,i.useEffect)((()=>{t("create"===o?"add":void 0)}),[o]),(0,i.useEffect)((()=>{void 0!==e&&n(Dn.setActiveSidebar("create"))}),[e]),i.createElement(Gl,{action:"add",isEditLocked:!1,hasWalSetting:!0,walEnabled:!1,name:"",partitionBy:"NONE",schema:[],tables:r,timestamp:"",onOpenChange:e=>t(e),open:void 0!==e,onSchemaChange:e=>{const{name:t,partitionBy:r,timestamp:o,schemaColumns:a,walEnabled:i}=e,s=Pa({name:t,partitionBy:r,timestamp:o,walEnabled:"true"===i,schemaColumns:a.map((e=>({column:e.name,type:e.type}))),dedup:!1});l(s,{appendAt:"end"}),n(Zn())},trigger:i.createElement(We,{icon:i.createElement(Et,jc({"data-hook":"create-table-panel-button",readOnly:a,selected:void 0!==e},!a&&{onClick:()=>{n(Dn.setActiveSidebar(e?void 0:"create"))}}),i.createElement(Pt.i,{size:w})),placement:"left",tooltip:a?"To use this feature, turn off read-only mode in the configuration file":"Create table"}),ctaText:"Create"})};var Gc=n(16076),Hc=n(65421),Vc=n(45440),Wc=n(39309),Qc=n(4798),$c=n(43607);const Yc=u.ZP.div.withConfig({displayName:"Shortcuts__Wrapper"})(["\n  display: flex;\n  max-height: 650px;\n  width: 300px;\n  max-width: 100vw;\n  flex-direction: column;\n  background: ",";\n  box-shadow: "," 0px 5px 8px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  overflow: auto;\n"],I("backgroundDarker"),I("black"),I("black")),Kc=u.ZP.div.withConfig({displayName:"Shortcuts__List"})(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]),Xc=(0,u.ZP)(Oe).withConfig({displayName:"Shortcuts__ListTitle"})(["\n  padding: 0.6rem 1.2rem;\n  margin-bottom: 0.6rem;\n  border-top: 1px solid ",";\n  background: ",";\n  width: 100%;\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.black40)),Jc=u.ZP.div.withConfig({displayName:"Shortcuts__Item"})(["\n  display: flex;\n  align-items: center;\n  padding: 0.6rem 1.2rem;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n"],I("background")),ed=u.ZP.div.withConfig({displayName:"Shortcuts__ItemKeys"})(["\n  margin-left: auto;\n"]),td=u.ZP.span.withConfig({displayName:"Shortcuts__KeyGroup"})(["\n  color: ",';\n\n  &:not(:last-child):after {\n    content: "or";\n    padding: 0 0.5rem;\n  }\n'],I("gray2")),nd=u.ZP.span.withConfig({displayName:"Shortcuts__Key"})(["\n  padding: 0 4px;\n  background: ",";\n  border-radius: 2px;\n  color: ",";\n\n  &:not(:last-child) {\n    margin-right: 0.25rem;\n  }\n"],I("gray2"),I("black")),rd=A.isMacintosh||A.isIOS?"":"Ctrl",od=A.isMacintosh||A.isIOS?"":"Alt",ad=[{keys:[[od,rd,""]],title:"Add cursor above"},{keys:[[od,rd,""]],title:"Add cursor below"},{keys:[["",od,""]],title:"Copy line up"},{keys:[["",od,""]],title:"Copy line down"},{keys:[[od,""]],title:"Move line up"},{keys:[[od,""]],title:"Move line down"},{keys:[["",od,"F"]],title:"Format document"},{keys:[["F1"]],title:"Command palette"}],id=[{keys:[["F9"],[rd,"Enter"]],title:"Run query"},{keys:[["F2"]],title:"Focus results grid"},{keys:[[rd,"K"]],title:"Clear all notifications"}],ld=({list:e,title:t})=>i.createElement(Kc,null,i.createElement(Xc,null,i.createElement(Oe,{color:"gray2"},t)),e.map(((e,t)=>i.createElement(Jc,{key:`shortcut-${t}`},i.createElement(Oe,{color:"white"},e.title),i.createElement(ed,null,e.keys.map(((e,t)=>i.createElement(td,{key:`keyGroup-${t}`},e.map(((e,t)=>i.createElement(nd,{key:`shortcutItem-key-${e}-${t}`},i.createElement(Oe,{color:"black",size:"xs",weight:600},e)))))))))))),sd=()=>i.createElement(Yc,null,i.createElement(ld,{list:id,title:"Global shortcuts"}),i.createElement(ld,{list:ad,title:"SQL editor shortcuts"}));function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(this,arguments)}const dd=(0,u.ZP)(Et).withConfig({displayName:"help__HelpButton"})(["\n  padding: 0;\n"]),ud=(0,u.ZP)(Qc.h.Content).withConfig({displayName:"help__DropdownMenuContent"})(["\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),md=(0,u.ZP)(Qc.h.Item).withConfig({displayName:"help__DropdownMenuItem"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),gd=(0,u.ZP)(ni.x).attrs({justifyContent:"center"}).withConfig({displayName:"help__TooltipWrapper"})(["\n  width: 100%;\n  height: 100%;\n"]),fd=({href:e,text:t})=>i.createElement(et,{color:"foreground",hoverColor:"foreground",href:e,rel:"noreferrer",target:"_blank"},t),pd=()=>{const{quest:e}=(0,i.useContext)(Mt),t=(0,s.v9)(ur.telemetry.getConfig),[n,r]=(0,i.useState)(),o=(0,i.useCallback)((e=>{r(e)}),[]),[a,l]=(0,i.useState)(!1);return i.createElement(i.Fragment,null,i.createElement(Qc.h.Root,{modal:!1,onOpenChange:l},i.createElement(Qc.h.Trigger,{asChild:!0},i.createElement(dd,cd({},a&&{selected:!0},{"data-hook":"help-panel-button"}),i.createElement(We,{icon:i.createElement(gd,null,i.createElement(Gc.H,{size:w})),placement:"left",tooltip:"Help"}))),i.createElement(Qc.h.Portal,null,i.createElement(ud,null,i.createElement(md,{onSelect:e=>e.preventDefault()},i.createElement(Hc.f,{size:"18px"}),i.createElement($c.o,{withEmailInput:!0,title:"Contact us",subtitle:"Let us know your thoughts",trigger:({setOpen:e})=>i.createElement(Oe,{color:"foreground",onClick:()=>e(!0)},"Contact us"),onSubmit:async({email:n,message:r})=>{try{await e.sendFeedback({email:n,message:r,telemetryConfig:t}),dt.success("Thank you for your feedback! Our team will review it shortly.")}catch(e){throw dt.error("Something went wrong. Please try again later."),e}}})),i.createElement(md,null,i.createElement(Wc.j,{size:"18px"}),i.createElement(fd,{href:"https://slack.questdb.io/",text:"Slack community"})),i.createElement(md,null,i.createElement(Gc.H,{size:"18px"}),i.createElement(fd,{href:"https://questdb.io/docs/develop/web-console/",text:"Web Console Docs"})),i.createElement(md,{onClick:()=>o(!0)},i.createElement(Vc.m,{size:"18px"}),i.createElement(Oe,{color:"foreground"},"Shortcuts"))))),i.createElement(it,{active:n,onToggle:o,trigger:i.createElement(i.Fragment,null)},i.createElement(sd,null)))},hd=u.ZP.div.withConfig({displayName:"Layout__Page"})(["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n  font-size: 1.4rem;\n  background: #21222c;\n\n  ::selection {\n    background: #44475a;\n  }\n"]),bd=u.ZP.div.withConfig({displayName:"Layout__Root"})(["\n  display: flex;\n  width: 100%;\n  flex: 1;\n  overflow-y: auto;\n"]),Ed=u.ZP.div.withConfig({displayName:"Layout__Main"})(["\n  flex: 1;\n  display: flex;\n  width: ",";\n"],(({sideOpened:e})=>e?"calc(100% - 50rem - 4.5rem)":"calc(100% - 4.5rem)")),yd=u.ZP.div.withConfig({displayName:"Layout__Drawer"})(["\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),wd=()=>{const e=(0,s.v9)(ur.console.getActiveSidebar);return(0,i.useEffect)((()=>{window.bus.trigger(b.REACT_READY)}),[]),i.createElement(Ft,null,i.createElement(on,null,i.createElement(wc,null),i.createElement(bd,null,i.createElement(Ed,{sideOpened:void 0!==e},i.createElement(hd,null,i.createElement(Ts,null))),i.createElement(yd,{id:"side-panel-right"}),i.createElement(hi,{align:"top"},i.createElement(pd,null),i.createElement(Zc,null),i.createElement(Uc,null))),i.createElement(Is,null),i.createElement(Zr,null)))},vd=(0,d.k)(),Cd=(0,c.MT)(cr,(0,c.qC)((0,c.md)(vd)));vd.run(or),Cd.dispatch(Dn.bootstrap());const _d=W("fade-reg",V.REG),xd=W("fade-slow",V.SLOW);l.render(i.createElement(Ge,null,i.createElement(s.zt,{store:Cd},i.createElement(u.f6,{theme:ct},i.createElement(g,null),l.createPortal(i.createElement(ut,null),document.body),i.createElement(fi,null,i.createElement(xd,null),i.createElement(_d,null),i.createElement(wd,null))))),document.getElementById("root"))},33301:e=>{e.exports={arrayEquals:function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!e[n].equals(t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=r,e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,o]=e[d],l=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[s])))?n.splice(s--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={87:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,l,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var d=s(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=self.webpackChunk_questdb_web_console=self.webpackChunk_questdb_web_console||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var i=a.O(void 0,[736],(()=>a(15422)));i=a.O(i)})();